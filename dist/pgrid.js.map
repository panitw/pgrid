{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/grid/event.js","webpack:///./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","webpack:///./src/grid/view.js","webpack:///./src/grid/model.js","webpack:///./src/data/table.js","webpack:///./src/grid/extension.js","webpack:///./src/grid/state.js","webpack:///./src/grid/utils.js","webpack:///./src/extensions/selection.js","webpack:///./src/extensions/editor.js","webpack:///./src/extensions/copypaste.js","webpack:///./src/extensions/view-updater.js","webpack:///./src/extensions/formatter.js","webpack:///./src/main.js","webpack:///./src/grid/grid.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","EventDispatcher","[object Object]","this","_handlers","eventName","handler","push","index","indexOf","splice","length","eventArg","hasListener","listeners","MapShim","Map","getIndex","arr","result","some","entry","anonymous","__entries__","prototypeAccessors","size","configurable","set","delete","entries","has","clear","forEach","callback","ctx","list","defineProperties","isBrowser","window","document","global$1","global","Math","self","Function","requestAnimationFrame$1","requestAnimationFrame","setTimeout","Date","now","trailingTimeout","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","refresh","delay","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","throttle","addObserver","observer","connect_","removeObserver","observers","disconnect_","updateObservers_","activeObservers","filter","gatherActive","hasActive","broadcastActive","addEventListener","observe","attributes","childList","characterData","subtree","removeEventListener","disconnect","ref","propertyName","getInstance","instance_","defineConfigurable","target","props","keys","writable","getWindowOf","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","parseFloat","getBordersSize","styles","positions","len","arguments","reduce","position","getHTMLElementContentRect","clientWidth","clientHeight","getComputedStyle","paddings","getPaddings","horizPad","left","right","vertPad","top","bottom","width","height","boxSizing","round","documentElement","isDocumentElement","vertScrollbar","horizScrollbar","abs","isSVGGraphicsElement","SVGGraphicsElement","SVGElement","getBBox","getContentRect","bbox","getSVGContentRect","x","y","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","rect","broadcastRect","ResizeObserverEntry","rectInit","Constr","contentRect","DOMRectReadOnly","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","TypeError","callback_","controller_","callbackCtx_","Element","observations","unobserve","clearActive","this$1","observation","map","WeakMap","ResizeObserver","method","apply","ResizeObserver_es","view_View","model","extensions","super","_model","_extensions","_recycledCells","_cellReference","_template","element","_element","className","innerHTML","style","overflow","tabIndex","_contentPane","querySelector","_topLeftPane","_topLeftInner","_topPane","_topInner","_leftPane","_leftInner","_centerPane","_centerInner","_bottomPane","_bottomInner","_bottomLeftPane","_bottomLeftInner","_scrollWidth","_measureScrollbarWidth","_hScroll","_vScroll","_hScrollThumb","_vScrollThumb","_observeSize","_resturecture","_attachHandlers","executeExtension","grid","calcTotalSize","adjustScrollBar","scrollLeft","undefined","maxScrollY","scrollTop","rowIndex","colIndex","alignTop","cell","getCell","origScrollTop","parentElement","origScrollLeft","scrollIntoViewIfNeeded","setScrollY","setScrollX","leftFreezeSize","getLeftFreezeSize","topFreezeSize","getTopFreezeSize","bottomFreezeSize","getBottomFreezeSize","cellRect","_getCellRect","scrollX","getScrollX","scrollY","getScrollY","gridRect","getBoundingClientRect","_renderCells","cellContent","firstChild","classList","contains","createElement","appendChild","data","getDataAt","arg","handledByExt","rowId","getRowId","field","getColumnField","hasExtension","handled","_vScrollHandler","e","dispatch","_hScrollHandler","_wheelHandler","currentX","currentY","deltaX","deltaY","_keyDownHandler","_updateScrollBar","_resizeObserver","totalWidth","getTotalWidth","totalHeight","getTotalHeight","determineScrollbarState","display","topRunner","leftRunner","cellWidth","cellHeight","getRowHeight","getColumnWidth","topFreeze","getTopFreezeRows","leftFreeze","getLeftFreezeRows","bottomFreeze","getBottomFreezeRows","rowCount","getRowCount","columnCount","getColumnCount","colWidth","paneScrollLeft","paneScrollTop","paneWidth","paneHeight","paneScrollLeft2","paneScrollTop2","paneWidth2","paneHeight2","offsetWidth","offsetHeight","j","rowHeight","_renderCell","cellX","cellY","pop","visibility","dataset","pane","_isCellVisible","_recycleCell","_createCell","cellClasses","getCellClasses","join","inner","outmost","outer","body","w1","w2","removeChild","_detectIE","ua","navigator","userAgent","msie","parseInt","substring","rv","edge","model_Model","config","extension","_config","_data","_extension","_columnModel","_rowModel","_headerRowModel","_cellModel","_headerCellModel","headerRows","columns","rows","cells","headerCells","rowModel","getRowModel","colModel","getColumnModel","cellModel","getCellModel","editable","dataRow","getRowData","canEdit","headerRowCount","columnWidth","isHeaderRow","dataRowIndex","freezePane","topFreezeRow","sum","_bottomFreezeSize","_totalWidth","_totalHeight","propName","columnModel","output","cssClass","unshift","isHeader","viewWidth","viewHeight","scrollbarSize","needH","needV","title","getRowDataAt","setDataAt","getRowIndex","_calcTotalWidth","_calcTotalHeight","_calcBottomFreezeSize","headerRowModelCount","rowModelCount","CHANGE_EVENT_NAME","table_DataTable","dataModel","_idRunner","_rid","_rowMap","_blockEvent","_processedEvent","_transformedRid","_searchQuery","_searchFields","_freezeCount","format","fields","_dataFormat","_fields","Array","isArray","addRow","row","beforeUpdateArg","changeType","cancel","blocked","updates","setData","rowData","count","insertRow","rid","inserted","_generateRowId","newObj","_createObject","search","slice","tIndex","removeRow","query","fieldMap","acc","val","regex","RegExp","test","arrayValues","Extension","_grid","cellRender","cellAfterRender","cellUpdate","cellAfterUpdate","cellEditableCheck","keyDown","gridAfterRender","dataBeforeRender","dataBeforeUpdate","dataAfterUpdate","dataFinishUpdate","ext","extPoint","queryExtension","State","_state","Utils","source","prop","SelectionExtension","_currentSelection","_selectionClass","selection","state","keyCode","view","_selectCell","scrollToCell","preventDefault","stopPropagation","actualCell","actualRow","actualCol","remove","add","getElement","focus","w","h","EditorExtension","_editorAttached","scrollHandler","listen","_detachEditor","ctrlKey","edit","_editCell","cellBound","scrollingElement","_editorContainer","customEditor","getCascadedCellProp","attach","done","_done","_attachEditor","_editingCol","_editingRow","_inputElement","type","select","_arrowKeyLocked","_keydownHandler","_blurHandler","activeElement","tagName","_clickHandler","multiFields","updateCell","CopyPasteExtension","_globalClipboard","_copy","clipboardData","_paste","getData","pasteEvent","copyEvent","cols","replace","split","pasteRow","pasteCol","ViewUpdaterExtension","rowIndexCache","colIndexCache","getColumnIndex","FormatterExtension","formatter","render","newEvent","assign","update","PGrid","mixin","footerRowCount","_view","loadExtension","editing","copypaste","autoUpdate","columnFormatter","centerIfNeeded","makeRange","start","end","coverRange","max","min","makePoint","translate","dX","dY","absolute","elem","pt","offsetLeft","offsetTop","offsetParent","origin","extent","parentNode","HTMLElement","clientLeft","clientTop"],"mappings":"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","file":"pgrid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export class EventDispatcher {\r\n\r\n\tconstructor() {\r\n\t\tthis._handlers = {};\r\n\t}\r\n\r\n\tlisten(eventName, handler) {\r\n\t\tif (!this._handlers[eventName]) {\r\n\t\t\tthis._handlers[eventName] = [];\r\n\t\t}\r\n\t\tthis._handlers[eventName].push(handler);\r\n\t}\r\n\r\n\tunlisten(eventName, handler) {\r\n\t\tif (this._handlers[eventName]) {\r\n\t\t\tlet index = this._handlers[eventName].indexOf(handler);\r\n\t\t\tif (index > -1) {\r\n\t\t\t\tthis._handlers[eventName].splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thasListener(eventName) {\r\n\t\treturn this._handlers[eventName] && this._handlers[eventName].length > 0;\r\n\t}\r\n\r\n\tdispatch(eventName, eventArg) {\r\n\t\tif (this.hasListener(eventName)) {\r\n\t\t\tlet listeners = this._handlers[eventName];\r\n\t\t\tfor (let i=0; i<listeners.length; i++) {\r\n\t\t\t\tlisteners[i](eventArg);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\n/* eslint-disable require-jsdoc, valid-jsdoc */\nvar MapShim = (function () {\n    if (typeof Map !== 'undefined') {\n        return Map;\n    }\n\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\n    function getIndex(arr, key) {\n        var result = -1;\n\n        arr.some(function (entry, index) {\n            if (entry[0] === key) {\n                result = index;\n\n                return true;\n            }\n\n            return false;\n        });\n\n        return result;\n    }\n\n    return (function () {\n        function anonymous() {\n            this.__entries__ = [];\n        }\n\n        var prototypeAccessors = { size: { configurable: true } };\n\n        /**\r\n         * @returns {boolean}\r\n         */\n        prototypeAccessors.size.get = function () {\n            return this.__entries__.length;\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\n        anonymous.prototype.get = function (key) {\n            var index = getIndex(this.__entries__, key);\n            var entry = this.__entries__[index];\n\n            return entry && entry[1];\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.set = function (key, value) {\n            var index = getIndex(this.__entries__, key);\n\n            if (~index) {\n                this.__entries__[index][1] = value;\n            } else {\n                this.__entries__.push([key, value]);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.delete = function (key) {\n            var entries = this.__entries__;\n            var index = getIndex(entries, key);\n\n            if (~index) {\n                entries.splice(index, 1);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.has = function (key) {\n            return !!~getIndex(this.__entries__, key);\n        };\n\n        /**\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.clear = function () {\n            this.__entries__.splice(0);\n        };\n\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.forEach = function (callback, ctx) {\n            var this$1 = this;\n            if ( ctx === void 0 ) ctx = null;\n\n            for (var i = 0, list = this$1.__entries__; i < list.length; i += 1) {\n                var entry = list[i];\n\n                callback.call(ctx, entry[1], entry[0]);\n            }\n        };\n\n        Object.defineProperties( anonymous.prototype, prototypeAccessors );\n\n        return anonymous;\n    }());\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\nvar global$1 = (function () {\n    if (typeof global !== 'undefined' && global.Math === Math) {\n        return global;\n    }\n\n    if (typeof self !== 'undefined' && self.Math === Math) {\n        return self;\n    }\n\n    if (typeof window !== 'undefined' && window.Math === Math) {\n        return window;\n    }\n\n    // eslint-disable-next-line no-new-func\n    return Function('return this')();\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\nvar requestAnimationFrame$1 = (function () {\n    if (typeof requestAnimationFrame === 'function') {\n        // It's required to use a bounded function because IE sometimes throws\n        // an \"Invalid calling object\" error if rAF is invoked without the global\n        // object on the left hand side.\n        return requestAnimationFrame.bind(global$1);\n    }\n\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\n})();\n\n// Defines minimum timeout before adding a trailing call.\nvar trailingTimeout = 2;\n\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\nvar throttle = function (callback, delay) {\n    var leadingCall = false,\n        trailingCall = false,\n        lastCallTime = 0;\n\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\n    function resolvePending() {\n        if (leadingCall) {\n            leadingCall = false;\n\n            callback();\n        }\n\n        if (trailingCall) {\n            proxy();\n        }\n    }\n\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\n    function timeoutCallback() {\n        requestAnimationFrame$1(resolvePending);\n    }\n\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\n    function proxy() {\n        var timeStamp = Date.now();\n\n        if (leadingCall) {\n            // Reject immediately following calls.\n            if (timeStamp - lastCallTime < trailingTimeout) {\n                return;\n            }\n\n            // Schedule new call to be in invoked when the pending one is resolved.\n            // This is important for \"transitions\" which never actually start\n            // immediately so there is a chance that we might miss one if change\n            // happens amids the pending invocation.\n            trailingCall = true;\n        } else {\n            leadingCall = true;\n            trailingCall = false;\n\n            setTimeout(timeoutCallback, delay);\n        }\n\n        lastCallTime = timeStamp;\n    }\n\n    return proxy;\n};\n\n// Minimum delay before invoking the update of observers.\nvar REFRESH_DELAY = 20;\n\n// A list of substrings of CSS properties used to find transition events that\n// might affect dimensions of observed elements.\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\n\n// Check if MutationObserver is available.\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\n\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\nvar ResizeObserverController = function() {\n    this.connected_ = false;\n    this.mutationEventsAdded_ = false;\n    this.mutationsObserver_ = null;\n    this.observers_ = [];\n\n    this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\n    this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\n};\n\n/**\r\n * Adds observer to observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be added.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Holds reference to the controller's instance.\r\n *\r\n * @private {ResizeObserverController}\r\n */\n\n\n/**\r\n * Keeps reference to the instance of MutationObserver.\r\n *\r\n * @private {MutationObserver}\r\n */\n\n/**\r\n * Indicates whether DOM listeners have been added.\r\n *\r\n * @private {boolean}\r\n */\nResizeObserverController.prototype.addObserver = function (observer) {\n    if (!~this.observers_.indexOf(observer)) {\n        this.observers_.push(observer);\n    }\n\n    // Add listeners if they haven't been added yet.\n    if (!this.connected_) {\n        this.connect_();\n    }\n};\n\n/**\r\n * Removes observer from observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.removeObserver = function (observer) {\n    var observers = this.observers_;\n    var index = observers.indexOf(observer);\n\n    // Remove observer if it's present in registry.\n    if (~index) {\n        observers.splice(index, 1);\n    }\n\n    // Remove listeners if controller has no connected observers.\n    if (!observers.length && this.connected_) {\n        this.disconnect_();\n    }\n};\n\n/**\r\n * Invokes the update of observers. It will continue running updates insofar\r\n * it detects changes.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.refresh = function () {\n    var changesDetected = this.updateObservers_();\n\n    // Continue running updates if changes have been detected as there might\n    // be future ones caused by CSS transitions.\n    if (changesDetected) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Updates every observer from observers list and notifies them of queued\r\n * entries.\r\n *\r\n * @private\r\n * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n *  dimensions of it's elements.\r\n */\nResizeObserverController.prototype.updateObservers_ = function () {\n    // Collect observers that have active observations.\n    var activeObservers = this.observers_.filter(function (observer) {\n        return observer.gatherActive(), observer.hasActive();\n    });\n\n    // Deliver notifications in a separate cycle in order to avoid any\n    // collisions between observers, e.g. when multiple instances of\n    // ResizeObserver are tracking the same element and the callback of one\n    // of them changes content dimensions of the observed target. Sometimes\n    // this may result in notifications being blocked for the rest of observers.\n    activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\n\n    return activeObservers.length > 0;\n};\n\n/**\r\n * Initializes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.connect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already added.\n    if (!isBrowser || this.connected_) {\n        return;\n    }\n\n    // Subscription to the \"Transitionend\" event is used as a workaround for\n    // delayed transitions. This way it's possible to capture at least the\n    // final state of an element.\n    document.addEventListener('transitionend', this.onTransitionEnd_);\n\n    window.addEventListener('resize', this.refresh);\n\n    if (mutationObserverSupported) {\n        this.mutationsObserver_ = new MutationObserver(this.refresh);\n\n        this.mutationsObserver_.observe(document, {\n            attributes: true,\n            childList: true,\n            characterData: true,\n            subtree: true\n        });\n    } else {\n        document.addEventListener('DOMSubtreeModified', this.refresh);\n\n        this.mutationEventsAdded_ = true;\n    }\n\n    this.connected_ = true;\n};\n\n/**\r\n * Removes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.disconnect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already removed.\n    if (!isBrowser || !this.connected_) {\n        return;\n    }\n\n    document.removeEventListener('transitionend', this.onTransitionEnd_);\n    window.removeEventListener('resize', this.refresh);\n\n    if (this.mutationsObserver_) {\n        this.mutationsObserver_.disconnect();\n    }\n\n    if (this.mutationEventsAdded_) {\n        document.removeEventListener('DOMSubtreeModified', this.refresh);\n    }\n\n    this.mutationsObserver_ = null;\n    this.mutationEventsAdded_ = false;\n    this.connected_ = false;\n};\n\n/**\r\n * \"Transitionend\" event handler.\r\n *\r\n * @private\r\n * @param {TransitionEvent} event\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.onTransitionEnd_ = function (ref) {\n        var propertyName = ref.propertyName; if ( propertyName === void 0 ) propertyName = '';\n\n    // Detect whether transition may affect dimensions of an element.\n    var isReflowProperty = transitionKeys.some(function (key) {\n        return !!~propertyName.indexOf(key);\n    });\n\n    if (isReflowProperty) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Returns instance of the ResizeObserverController.\r\n *\r\n * @returns {ResizeObserverController}\r\n */\nResizeObserverController.getInstance = function () {\n    if (!this.instance_) {\n        this.instance_ = new ResizeObserverController();\n    }\n\n    return this.instance_;\n};\n\nResizeObserverController.instance_ = null;\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\nvar defineConfigurable = (function (target, props) {\n    for (var i = 0, list = Object.keys(props); i < list.length; i += 1) {\n        var key = list[i];\n\n        Object.defineProperty(target, key, {\n            value: props[key],\n            enumerable: false,\n            writable: false,\n            configurable: true\n        });\n    }\n\n    return target;\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\nvar getWindowOf = (function (target) {\n    // Assume that the element is an instance of Node, which means that it\n    // has the \"ownerDocument\" property from which we can retrieve a\n    // corresponding global object.\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\n\n    // Return the local global object if it's not possible extract one from\n    // provided element.\n    return ownerGlobal || global$1;\n});\n\n// Placeholder of an empty content rectangle.\nvar emptyRect = createRectInit(0, 0, 0, 0);\n\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\nfunction toFloat(value) {\n    return parseFloat(value) || 0;\n}\n\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\nfunction getBordersSize(styles) {\n    var positions = [], len = arguments.length - 1;\n    while ( len-- > 0 ) positions[ len ] = arguments[ len + 1 ];\n\n    return positions.reduce(function (size, position) {\n        var value = styles['border-' + position + '-width'];\n\n        return size + toFloat(value);\n    }, 0);\n}\n\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\nfunction getPaddings(styles) {\n    var positions = ['top', 'right', 'bottom', 'left'];\n    var paddings = {};\n\n    for (var i = 0, list = positions; i < list.length; i += 1) {\n        var position = list[i];\n\n        var value = styles['padding-' + position];\n\n        paddings[position] = toFloat(value);\n    }\n\n    return paddings;\n}\n\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getSVGContentRect(target) {\n    var bbox = target.getBBox();\n\n    return createRectInit(0, 0, bbox.width, bbox.height);\n}\n\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\nfunction getHTMLElementContentRect(target) {\n    // Client width & height properties can't be\n    // used exclusively as they provide rounded values.\n    var clientWidth = target.clientWidth;\n    var clientHeight = target.clientHeight;\n\n    // By this condition we can catch all non-replaced inline, hidden and\n    // detached elements. Though elements with width & height properties less\n    // than 0.5 will be discarded as well.\n    //\n    // Without it we would need to implement separate methods for each of\n    // those cases and it's not possible to perform a precise and performance\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\n    // gives wrong results for elements with width & height less than 0.5.\n    if (!clientWidth && !clientHeight) {\n        return emptyRect;\n    }\n\n    var styles = getWindowOf(target).getComputedStyle(target);\n    var paddings = getPaddings(styles);\n    var horizPad = paddings.left + paddings.right;\n    var vertPad = paddings.top + paddings.bottom;\n\n    // Computed styles of width & height are being used because they are the\n    // only dimensions available to JS that contain non-rounded values. It could\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\n    var width = toFloat(styles.width),\n        height = toFloat(styles.height);\n\n    // Width & height include paddings and borders when the 'border-box' box\n    // model is applied (except for IE).\n    if (styles.boxSizing === 'border-box') {\n        // Following conditions are required to handle Internet Explorer which\n        // doesn't include paddings and borders to computed CSS dimensions.\n        //\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\n        // properties then it's either IE, and thus we don't need to subtract\n        // anything, or an element merely doesn't have paddings/borders styles.\n        if (Math.round(width + horizPad) !== clientWidth) {\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\n        }\n\n        if (Math.round(height + vertPad) !== clientHeight) {\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\n        }\n    }\n\n    // Following steps can't be applied to the document's root element as its\n    // client[Width/Height] properties represent viewport area of the window.\n    // Besides, it's as well not necessary as the <html> itself neither has\n    // rendered scroll bars nor it can be clipped.\n    if (!isDocumentElement(target)) {\n        // In some browsers (only in Firefox, actually) CSS width & height\n        // include scroll bars size which can be removed at this step as scroll\n        // bars are the only difference between rounded dimensions + paddings\n        // and \"client\" properties, though that is not always true in Chrome.\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\n\n        // Chrome has a rather weird rounding of \"client\" properties.\n        // E.g. for an element with content width of 314.2px it sometimes gives\n        // the client width of 315px and for the width of 314.7px it may give\n        // 314px. And it doesn't happen all the time. So just ignore this delta\n        // as a non-relevant.\n        if (Math.abs(vertScrollbar) !== 1) {\n            width -= vertScrollbar;\n        }\n\n        if (Math.abs(horizScrollbar) !== 1) {\n            height -= horizScrollbar;\n        }\n    }\n\n    return createRectInit(paddings.left, paddings.top, width, height);\n}\n\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nvar isSVGGraphicsElement = (function () {\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\n    // interface.\n    if (typeof SVGGraphicsElement !== 'undefined') {\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\n    }\n\n    // If it's so, then check that element is at least an instance of the\n    // SVGElement and that it has the \"getBBox\" method.\n    // eslint-disable-next-line no-extra-parens\n    return function (target) { return target instanceof getWindowOf(target).SVGElement && typeof target.getBBox === 'function'; };\n})();\n\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nfunction isDocumentElement(target) {\n    return target === getWindowOf(target).document.documentElement;\n}\n\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getContentRect(target) {\n    if (!isBrowser) {\n        return emptyRect;\n    }\n\n    if (isSVGGraphicsElement(target)) {\n        return getSVGContentRect(target);\n    }\n\n    return getHTMLElementContentRect(target);\n}\n\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\nfunction createReadOnlyRect(ref) {\n    var x = ref.x;\n    var y = ref.y;\n    var width = ref.width;\n    var height = ref.height;\n\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\n    var rect = Object.create(Constr.prototype);\n\n    // Rectangle's properties are not writable and non-enumerable.\n    defineConfigurable(rect, {\n        x: x, y: y, width: width, height: height,\n        top: y,\n        right: x + width,\n        bottom: height + y,\n        left: x\n    });\n\n    return rect;\n}\n\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\nfunction createRectInit(x, y, width, height) {\n    return { x: x, y: y, width: width, height: height };\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\nvar ResizeObservation = function(target) {\n    this.broadcastWidth = 0;\n    this.broadcastHeight = 0;\n    this.contentRect_ = createRectInit(0, 0, 0, 0);\n\n    this.target = target;\n};\n\n/**\r\n * Updates content rectangle and tells whether it's width or height properties\r\n * have changed since the last broadcast.\r\n *\r\n * @returns {boolean}\r\n */\n\n\n/**\r\n * Reference to the last observed content rectangle.\r\n *\r\n * @private {DOMRectInit}\r\n */\n\n\n/**\r\n * Broadcasted width of content rectangle.\r\n *\r\n * @type {number}\r\n */\nResizeObservation.prototype.isActive = function () {\n    var rect = getContentRect(this.target);\n\n    this.contentRect_ = rect;\n\n    return rect.width !== this.broadcastWidth || rect.height !== this.broadcastHeight;\n};\n\n/**\r\n * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n * from the corresponding properties of the last observed content rectangle.\r\n *\r\n * @returns {DOMRectInit} Last observed content rectangle.\r\n */\nResizeObservation.prototype.broadcastRect = function () {\n    var rect = this.contentRect_;\n\n    this.broadcastWidth = rect.width;\n    this.broadcastHeight = rect.height;\n\n    return rect;\n};\n\nvar ResizeObserverEntry = function(target, rectInit) {\n    var contentRect = createReadOnlyRect(rectInit);\n\n    // According to the specification following properties are not writable\n    // and are also not enumerable in the native implementation.\n    //\n    // Property accessors are not being used as they'd require to define a\n    // private WeakMap storage which may cause memory leaks in browsers that\n    // don't support this type of collections.\n    defineConfigurable(this, { target: target, contentRect: contentRect });\n};\n\nvar ResizeObserverSPI = function(callback, controller, callbackCtx) {\n    this.activeObservations_ = [];\n    this.observations_ = new MapShim();\n\n    if (typeof callback !== 'function') {\n        throw new TypeError('The callback provided as parameter 1 is not a function.');\n    }\n\n    this.callback_ = callback;\n    this.controller_ = controller;\n    this.callbackCtx_ = callbackCtx;\n};\n\n/**\r\n * Starts observing provided element.\r\n *\r\n * @param {Element} target - Element to be observed.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Registry of the ResizeObservation instances.\r\n *\r\n * @private {Map<Element, ResizeObservation>}\r\n */\n\n\n/**\r\n * Public ResizeObserver instance which will be passed to the callback\r\n * function and used as a value of it's \"this\" binding.\r\n *\r\n * @private {ResizeObserver}\r\n */\n\n/**\r\n * Collection of resize observations that have detected changes in dimensions\r\n * of elements.\r\n *\r\n * @private {Array<ResizeObservation>}\r\n */\nResizeObserverSPI.prototype.observe = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is already being observed.\n    if (observations.has(target)) {\n        return;\n    }\n\n    observations.set(target, new ResizeObservation(target));\n\n    this.controller_.addObserver(this);\n\n    // Force the update of observations.\n    this.controller_.refresh();\n};\n\n/**\r\n * Stops observing provided element.\r\n *\r\n * @param {Element} target - Element to stop observing.\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.unobserve = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is not being observed.\n    if (!observations.has(target)) {\n        return;\n    }\n\n    observations.delete(target);\n\n    if (!observations.size) {\n        this.controller_.removeObserver(this);\n    }\n};\n\n/**\r\n * Stops observing all elements.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.disconnect = function () {\n    this.clearActive();\n    this.observations_.clear();\n    this.controller_.removeObserver(this);\n};\n\n/**\r\n * Collects observation instances the associated element of which has changed\r\n * it's content rectangle.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.gatherActive = function () {\n        var this$1 = this;\n\n    this.clearActive();\n\n    this.observations_.forEach(function (observation) {\n        if (observation.isActive()) {\n            this$1.activeObservations_.push(observation);\n        }\n    });\n};\n\n/**\r\n * Invokes initial callback function with a list of ResizeObserverEntry\r\n * instances collected from active resize observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.broadcastActive = function () {\n    // Do nothing if observer doesn't have active observations.\n    if (!this.hasActive()) {\n        return;\n    }\n\n    var ctx = this.callbackCtx_;\n\n    // Create ResizeObserverEntry instance for every active observation.\n    var entries = this.activeObservations_.map(function (observation) {\n        return new ResizeObserverEntry(observation.target, observation.broadcastRect());\n    });\n\n    this.callback_.call(ctx, entries, ctx);\n    this.clearActive();\n};\n\n/**\r\n * Clears the collection of active observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.clearActive = function () {\n    this.activeObservations_.splice(0);\n};\n\n/**\r\n * Tells whether observer has active observations.\r\n *\r\n * @returns {boolean}\r\n */\nResizeObserverSPI.prototype.hasActive = function () {\n    return this.activeObservations_.length > 0;\n};\n\n// Registry of internal observers. If WeakMap is not available use current shim\n// for the Map collection as it has all required methods and because WeakMap\n// can't be fully polyfilled anyway.\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\n\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\nvar ResizeObserver = function(callback) {\n    if (!(this instanceof ResizeObserver)) {\n        throw new TypeError('Cannot call a class as a function.');\n    }\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    var controller = ResizeObserverController.getInstance();\n    var observer = new ResizeObserverSPI(callback, controller, this);\n\n    observers.set(this, observer);\n};\n\n// Expose public methods of ResizeObserver.\n['observe', 'unobserve', 'disconnect'].forEach(function (method) {\n    ResizeObserver.prototype[method] = function () {\n        return (ref = observers.get(this))[method].apply(ref, arguments);\n        var ref;\n    };\n});\n\nvar index = (function () {\n    // Export existing implementation if available.\n    if (typeof global$1.ResizeObserver !== 'undefined') {\n        return global$1.ResizeObserver;\n    }\n\n    return ResizeObserver;\n})();\n\nexport default index;\n","import { EventDispatcher } from './event';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\nexport class View extends EventDispatcher {\r\n\r\n\tconstructor (model, extensions) {\r\n\t\tsuper();\r\n\t\tthis._model = model;\r\n        this._extensions = extensions;\r\n        this._recycledCells = [];\r\n        this._cellReference = {};\r\n\t\tthis._template = \t'<div class=\"pgrid-content-pane\" style=\"position: relative;\">' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-top-left-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-top-left-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-top-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-top-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-left-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-left-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-center-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-center-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-bottom-left-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-bottom-left-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-bottom-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-bottom-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t'<div class=\"pgrid-hscroll\" style=\"position: absolute; bottom: 0px; overflow-y: hidden; overflow-x: scroll;\">' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-hscroll-thumb\"></div>' +\r\n\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t'<div class=\"pgrid-vscroll\" style=\"position: absolute; right: 0px; top: 0px; overflow-y: scroll; overflow-x: hidden;\">' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-vscroll-thumb\"></div>' +\r\n\t\t\t\t\t\t\t'</div>';\r\n\t}\r\n\r\n\trender (element) {\r\n\t\tthis._element = element;\r\n\t\tthis._element.className = 'pgrid';\r\n\t\tthis._element.innerHTML = this._template;\r\n\t\tthis._element.style.position = 'relative';\r\n\t\tthis._element.style.overflow = 'hidden';\r\n\t\tthis._element.tabIndex = 1;\r\n\r\n\t\tthis._contentPane = this._element.querySelector('.pgrid-content-pane');\r\n\t\tthis._topLeftPane = this._element.querySelector('.pgrid-top-left-pane');\r\n\t\tthis._topLeftInner = this._element.querySelector('.pgrid-top-left-inner');\r\n\t\tthis._topPane = this._element.querySelector('.pgrid-top-pane');\r\n\t\tthis._topInner = this._element.querySelector('.pgrid-top-inner');\r\n\t\tthis._leftPane = this._element.querySelector('.pgrid-left-pane');\r\n\t\tthis._leftInner = this._element.querySelector('.pgrid-left-inner');\r\n\t\tthis._centerPane = this._element.querySelector('.pgrid-center-pane');\r\n\t\tthis._centerInner = this._element.querySelector('.pgrid-center-inner');\r\n\t\tthis._bottomPane = this._element.querySelector('.pgrid-bottom-pane');\r\n\t\tthis._bottomInner = this._element.querySelector('.pgrid-bottom-inner');\r\n\t\tthis._bottomLeftPane = this._element.querySelector('.pgrid-bottom-left-pane');\r\n\t\tthis._bottomLeftInner = this._element.querySelector('.pgrid-bottom-left-inner');\r\n\r\n\t\tthis._scrollWidth = this._measureScrollbarWidth();\r\n\r\n\t\tthis._hScroll = this._element.querySelector('.pgrid-hscroll');\r\n\t\tthis._vScroll = this._element.querySelector('.pgrid-vscroll');\r\n\t\tthis._hScrollThumb = this._element.querySelector('.pgrid-hscroll-thumb');\r\n\t\tthis._vScrollThumb = this._element.querySelector('.pgrid-vscroll-thumb');\r\n\t\tthis._hScroll.style.height = this._scrollWidth + 'px';\r\n\t\tthis._vScroll.style.width = this._scrollWidth + 'px';\r\n\t\tthis._hScrollThumb.style.height = this._scrollWidth + 'px';\r\n\t\tthis._vScrollThumb.style.width = this._scrollWidth + 'px';\r\n\r\n\t\tthis._observeSize();\r\n\t\tthis._resturecture();\r\n\t\tthis._attachHandlers();\r\n\r\n\t\tthis._extensions.executeExtension('gridAfterRender', {\r\n\t\t\tgrid: this\r\n\t\t});\r\n\t}\r\n\r\n\treRender () {\r\n\t\tthis._topLeftInner.innerHTML = '';\r\n\t\tthis._topInner.innerHTML = '';\r\n\t\tthis._leftInner.innerHTML = '';\r\n\t\tthis._centerInner.innerHTML = '';\r\n\t\tthis._bottomLeftInner.innerHTML = '';\r\n        this._bottomInner.innerHTML = '';\r\n        this._cellReference = [];\r\n\r\n        this._model.calcTotalSize();\r\n\t\tthis._resturecture();\r\n\t}\r\n\r\n\tgetElement () {\r\n\t\treturn this._element;\r\n\t}\r\n\r\n\tsetScrollX (x, adjustScrollBar) {\r\n\t\tthis._topPane.scrollLeft = x;\r\n\t\tthis._centerPane.scrollLeft = x;\r\n\t\tthis._bottomPane.scrollLeft = x;\r\n\t\tif (adjustScrollBar || adjustScrollBar === undefined) {\r\n\t\t\tthis._hScroll.scrollLeft = x;\r\n\t\t}\r\n\t}\r\n\r\n\tgetScrollX () {\r\n\t\treturn this._centerPane.scrollLeft;\r\n\t}\r\n\r\n\tsetScrollY (y, adjustScrollBar) {\r\n        let maxScrollY = this._leftInner.clientHeight - this._leftPane.clientHeight;\r\n        if (y > maxScrollY) {\r\n            y = maxScrollY;\r\n        }\r\n\t\tthis._centerPane.scrollTop = y;\r\n\t\tthis._leftPane.scrollTop = y;\r\n\t\tif (adjustScrollBar || adjustScrollBar === undefined) {\r\n\t\t\tthis._vScroll.scrollTop = y;\r\n\t\t}\r\n\t}\r\n\r\n\tgetScrollY () {\r\n\t\treturn this._centerPane.scrollTop;\r\n\t}\r\n\r\n\tscrollToCell (rowIndex, colIndex, alignTop) {\r\n\t\tlet cell = this.getCell(rowIndex, colIndex);\r\n\t\tlet origScrollTop = cell.parentElement.parentElement.scrollTop;\r\n\t\tlet origScrollLeft = cell.parentElement.parentElement.scrollLeft;\r\n\r\n\t\tcell.scrollIntoViewIfNeeded(false);\r\n\r\n\t\tif (origScrollTop !== cell.parentElement.parentElement.scrollTop) {\r\n\t\t\tthis.setScrollY(cell.parentElement.parentElement.scrollTop, true);\r\n\t\t}\r\n\t\tif (origScrollLeft !== cell.parentElement.parentElement.scrollLeft) {\r\n\t\t\tthis.setScrollX(cell.parentElement.parentElement.scrollLeft, true);\r\n\t\t}\r\n\t}\r\n\r\n\tgetCell (rowIndex, colIndex) {\r\n        let cell = this._element.querySelector('[data-row-index=\"'+rowIndex+'\"][data-col-index=\"'+colIndex+'\"]');\r\n        if (cell) {\r\n            return cell;\r\n        } else {\r\n            let leftFreezeSize = this._model.getLeftFreezeSize();\r\n            let topFreezeSize = this._model.getTopFreezeSize();\r\n            let bottomFreezeSize = this._model.getBottomFreezeSize();\r\n            let cellRect = this._getCellRect(rowIndex, colIndex);\r\n            let scrollX = this.getScrollX();\r\n            let scrollY = this.getScrollY();\r\n            let gridRect = this._element.getBoundingClientRect();\r\n            if (cellRect.x > leftFreezeSize) {\r\n                if (cellRect.x < (scrollX + leftFreezeSize)) {\r\n                    this.setScrollX(cellRect.x - leftFreezeSize);\r\n                } else\r\n                if (scrollX + gridRect.width < cellRect.x + cellRect.width) {\r\n                    this.setScrollX((cellRect.x + cellRect.width) - gridRect.width);\r\n                }\r\n            }\r\n            if (cellRect.y < (scrollY + topFreezeSize)) {\r\n                this.setScrollY(cellRect.y);\r\n            } else\r\n            if ((scrollY + gridRect.height) - bottomFreezeSize < cellRect.y + cellRect.height) {\r\n                this.setScrollY((cellRect.y + cellRect.height) - gridRect.height);\r\n            }\r\n            this._renderCells();\r\n        }\r\n\t}\r\n\r\n\tupdateCell (rowIndex, colIndex) {\r\n\t\tlet cell = this.getCell(rowIndex, colIndex);\r\n\t\tif (cell) {\r\n\t\t\t//Create cell content wrapper if not any\r\n\t\t\tlet cellContent = null;\r\n\t\t\tif (!cell.firstChild || !cell.firstChild.classList.contains('pgrid-cell-content')) {\r\n\t\t\t\t//Clear cell\r\n\t\t\t\tcell.innerHTML = '';\r\n\r\n\t\t\t\t//Add new cell content\r\n\t\t\t\tcellContent = document.createElement('div');\r\n\t\t\t\tcellContent.className = 'pgrid-cell-content';\r\n\t\t\t\tcell.appendChild(cellContent);\r\n\t\t\t} else {\r\n\t\t\t\tcellContent = cell.firstChild;\r\n\t\t\t}\r\n\r\n\t\t\t//Get data to be updated\r\n\t\t\tlet data = this._model.getDataAt(rowIndex, colIndex);\r\n\r\n\t\t\t//Data can be transformed before rendering using dataBeforeRender extension\r\n\t\t\tlet arg = {data: data};\r\n\t\t\tthis._extensions.executeExtension('dataBeforeRender', arg);\r\n\t\t\tdata = arg.data;\r\n\r\n\t\t\t//If there's cellUpdate extension, then execute it to update the cell data\r\n\t\t\t//Else use default way to put the data directly to the cell content\r\n            let handledByExt = false;\r\n            let rowId = this._model.getRowId(rowIndex);\r\n            let field = this._model.getColumnField(colIndex);\r\n\t\t\tif (this._extensions.hasExtension('cellUpdate')) {\r\n\t\t\t\targ = {\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tcell,\r\n\t\t\t\t\tcellContent,\r\n\t\t\t\t\trowIndex,\r\n\t\t\t\t\tcolIndex,\r\n\t\t\t\t\trowId,\r\n\t\t\t\t\tfield,\r\n\t\t\t\t\thandled: false\r\n\t\t\t\t}\r\n\t\t\t\tthis._extensions.executeExtension('cellUpdate', arg);\r\n\t\t\t\thandledByExt = arg.handled;\r\n\t\t\t}\r\n\r\n\t\t\tif (!handledByExt) {\r\n\t\t\t\tif (data !== undefined && data !== null) {\r\n\t\t\t\t\tcellContent.innerHTML = data;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcellContent.innerHTML = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._extensions.executeExtension('cellAfterUpdate', {\r\n                data,\r\n                cell,\r\n                cellContent,\r\n                rowIndex,\r\n                colIndex,\r\n                rowId,\r\n                field,\r\n            });\r\n\t\t}\r\n\t}\r\n\r\n\t_attachHandlers () {\r\n\r\n\t\tthis._vScrollHandler = (e) => {\r\n            this.setScrollY(e.target.scrollTop, false);\r\n            this._renderCells();\r\n\t\t\tthis.dispatch('vscroll', e);\r\n\t\t};\r\n\r\n\t\tthis._hScrollHandler = (e) => {\r\n\t\t\tthis.setScrollX(e.target.scrollLeft, false);\r\n            this._renderCells();\r\n\t\t\tthis.dispatch('hscroll', e);\r\n\t\t};\r\n\r\n\t\tthis._wheelHandler = (e) => {\r\n\t\t\tlet currentX = this.getScrollX();\r\n\t\t\tlet currentY = this.getScrollY();\r\n\t\t\tthis.setScrollX(currentX + e.deltaX);\r\n\t\t\tthis.setScrollY(currentY + e.deltaY);\r\n            this._renderCells();\r\n\t\t\tif (e.deltaX !== 0) {\r\n\t\t\t\tthis.dispatch('hscroll', e);\r\n\t\t\t}\r\n\t\t\tif (e.deltaY !== 0) {\r\n\t\t\t\tthis.dispatch('vscroll', e);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis._keyDownHandler = (e) => {\r\n\t\t\tthis._extensions.executeExtension('keyDown', e);\r\n\t\t};\r\n\r\n\t\tthis._vScroll.addEventListener('scroll', this._vScrollHandler);\r\n\t\tthis._hScroll.addEventListener('scroll', this._hScrollHandler);\r\n\t\tthis._contentPane.addEventListener('wheel', this._wheelHandler);\r\n\t\tthis._element.addEventListener('keydown', this._keyDownHandler);\r\n\r\n\t}\r\n\r\n\t_resturecture () {\r\n\t\tthis._contentPane.style.width = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\tthis._contentPane.style.height = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\r\n\t\tlet topFreezeSize = this._model.getTopFreezeSize();\r\n\t\tlet bottomFreezeSize = this._model.getBottomFreezeSize();\r\n\t\tlet leftFreezeSize = this._model.getLeftFreezeSize();\r\n\r\n\t\tthis._topLeftPane.style.left = '0px';\r\n\t\tthis._topLeftPane.style.top = '0px';\r\n\t\tthis._topLeftPane.style.width = leftFreezeSize + 'px';\r\n\t\tthis._topLeftPane.style.height = topFreezeSize + 'px';\r\n\t\tthis._topPane.style.left = leftFreezeSize + 'px';\r\n\t\tthis._topPane.style.top = '0px';\r\n\t\tthis._topPane.style.width = 'calc(100% - ' + leftFreezeSize + 'px)';\r\n\t\tthis._topPane.style.height = topFreezeSize + 'px';\r\n\t\tthis._leftPane.style.left = '0px';\r\n\t\tthis._leftPane.style.top = topFreezeSize + 'px';\r\n\t\tthis._leftPane.style.width = leftFreezeSize + 'px';\r\n\t\tthis._leftPane.style.height = 'calc(100% - ' + (topFreezeSize + bottomFreezeSize) + 'px)';\r\n\t\tthis._centerPane.style.left = leftFreezeSize + 'px';\r\n\t\tthis._centerPane.style.top = topFreezeSize + 'px';\r\n\t\tthis._centerPane.style.width = 'calc(100% - ' + leftFreezeSize + 'px)';\r\n\t\tthis._centerPane.style.height = 'calc(100% - ' + (topFreezeSize + bottomFreezeSize) + 'px)';\r\n\t\tthis._bottomLeftPane.style.left = '0px';\r\n\t\tthis._bottomLeftPane.style.bottom = '0px';\r\n\t\tthis._bottomLeftPane.style.width = leftFreezeSize + 'px';\r\n\t\tthis._bottomLeftPane.style.height = bottomFreezeSize + 'px';\r\n\t\tthis._bottomPane.style.left = leftFreezeSize + 'px';\r\n\t\tthis._bottomPane.style.bottom = '0px';\r\n\t\tthis._bottomPane.style.width = 'calc(100% - ' + leftFreezeSize + 'px)';\r\n\t\tthis._bottomPane.style.height = bottomFreezeSize + 'px';\r\n\r\n\t\tthis._renderCells();\r\n\t\tthis._updateScrollBar();\r\n\t}\r\n\r\n\t_observeSize () {\r\n\t\tthis._resizeObserver = new ResizeObserver((entries, observer) => {\r\n\t\t\tthis._updateScrollBar();\r\n\t\t});\r\n\t\tthis._resizeObserver.observe(this._element);\r\n\t}\r\n\r\n\t_updateScrollBar () {\r\n\t\tlet totalWidth = this._model.getTotalWidth();\r\n\t\tlet totalHeight = this._model.getTotalHeight();\r\n\t\tthis._hScrollThumb.style.width = totalWidth + 'px';\r\n\t\tthis._vScrollThumb.style.height = totalHeight + 'px';\r\n\r\n\t\tlet gridRect = this._element.getBoundingClientRect();\r\n\t\tlet scrollBarState = this._model.determineScrollbarState(gridRect.width, gridRect.height, this._scrollWidth);\r\n\r\n\t\tswitch (scrollBarState) {\r\n\t\t\tcase 'n':\r\n\t\t\t\tthis._hScroll.style.display = 'none';\r\n\t\t\t\tthis._vScroll.style.display = 'none';\r\n\t\t\t\tthis._contentPane.style.width = '100%';\r\n\t\t\t\tthis._contentPane.style.height = '100%';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'h':\r\n\t\t\t\tthis._hScroll.style.display = 'block';\r\n\t\t\t\tthis._vScroll.style.display = 'none';\r\n\t\t\t\tthis._hScroll.style.width = '100%';\r\n\t\t\t\tthis._contentPane.style.width = '100%';\r\n\t\t\t\tthis._contentPane.style.height = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'v':\r\n\t\t\t\tthis._hScroll.style.display = 'none';\r\n\t\t\t\tthis._vScroll.style.display = 'block';\r\n\t\t\t\tthis._vScroll.style.height = '100%';\r\n\t\t\t\tthis._contentPane.style.width = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tthis._contentPane.style.height = '100%';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'b':\r\n\t\t\t\tthis._hScroll.style.display = 'block';\r\n\t\t\t\tthis._vScroll.style.display = 'block';\r\n\t\t\t\tthis._hScroll.style.width = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tthis._vScroll.style.height = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tthis._contentPane.style.width = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tthis._contentPane.style.height = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n    }\r\n\r\n    _getCellRect (rowIndex, colIndex) {\r\n\t\tlet topRunner = 0;\r\n        let leftRunner = 0;\r\n        let cellWidth = 0;\r\n        let cellHeight = 0;\r\n        for (let i=0; i<rowIndex; i++) {\r\n            cellHeight = this._model.getRowHeight(i)\r\n            topRunner += cellHeight;\r\n        }\r\n        for (let i=0; i<colIndex; i++) {\r\n            cellWidth = this._model.getColumnWidth(i);\r\n            leftRunner += cellWidth;\r\n        }\r\n        return {x: leftRunner, y: topRunner, width: cellWidth, height: cellHeight};\r\n    }\r\n\r\n\t_renderCells () {\r\n\t\tlet topFreeze = this._model.getTopFreezeRows();\r\n\t\tlet leftFreeze = this._model.getLeftFreezeRows();\r\n\t\tlet bottomFreeze = this._model.getBottomFreezeRows();\r\n\t\tlet rowCount = this._model.getRowCount();\r\n\t\tlet columnCount = this._model.getColumnCount();\r\n\t\tlet topRunner = 0;\r\n\t\tlet leftRunner = 0;\r\n\t\tlet colWidth = [];\r\n        let paneScrollLeft = 0;\r\n        let paneScrollTop = 0;\r\n        let paneWidth = 0;\r\n        let paneHeight = 0;\r\n        let paneScrollLeft2 = 0;\r\n        let paneScrollTop2 = 0;\r\n        let paneWidth2 = 0;\r\n        let paneHeight2 = 0;\r\n\r\n\t\t//Render top rows\r\n        paneScrollLeft = this._topLeftPane.scrollLeft;\r\n        paneScrollTop = this._topLeftPane.scrollTop;\r\n        paneWidth = this._topLeftPane.offsetWidth;\r\n        paneHeight = this._topLeftPane.offsetHeight;\r\n        paneScrollLeft2 = this._topPane.scrollLeft;\r\n        paneScrollTop2 = this._topPane.scrollTop;\r\n        paneWidth2 = this._topPane.offsetWidth;\r\n        paneHeight2 = this._topPane.offsetHeight;\r\n        topRunner = 0;\r\n\t\tfor (let j=0; j<topFreeze; j++) {\r\n\t\t\tlet rowHeight = this._model.getRowHeight(j);\r\n\t\t\t//Render top left cells\r\n            leftRunner = 0;\r\n\t\t\tfor (let i=0; i<leftFreeze; i++) {\r\n\t\t\t\tcolWidth[i] = this._model.getColumnWidth(i);\r\n                this._renderCell(j, i, this._topLeftInner, paneWidth, paneHeight, paneScrollLeft, paneScrollTop, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n            }\r\n\r\n\t\t\t//Render top cells\r\n\t\t\tleftRunner = 0;\r\n\t\t\tfor (let i=leftFreeze; i<columnCount; i++) {\r\n\t\t\t\tcolWidth[i] = this._model.getColumnWidth(i);\r\n\t\t\t\tthis._renderCell(j, i, this._topInner, paneWidth2, paneHeight2, paneScrollLeft2, paneScrollTop2, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n\t\t\t}\r\n\t\t\ttopRunner += rowHeight;\r\n        }\r\n        this._topInner.style.width = leftRunner + 'px';\r\n        this._topInner.style.height = topRunner + 'px';\r\n\r\n\t\t//Render middle rows\r\n        paneScrollLeft = this._leftPane.scrollLeft;\r\n        paneScrollTop = this._leftPane.scrollTop;\r\n        paneWidth = this._leftPane.offsetWidth;\r\n        paneHeight = this._leftPane.offsetHeight;\r\n        paneScrollLeft2 = this._centerPane.scrollLeft;\r\n        paneScrollTop2 = this._centerPane.scrollTop;\r\n        paneWidth2 = this._centerPane.offsetWidth;\r\n        paneHeight2 = this._centerPane.offsetHeight;\r\n        topRunner = 0;\r\n\t\tfor (let j=topFreeze; j<(rowCount-bottomFreeze); j++) {\r\n\t\t\tlet rowHeight = this._model.getRowHeight(j);\r\n\t\t\t//Render left cells\r\n\t\t\tleftRunner = 0;\r\n\t\t\tfor (let i=0; i<leftFreeze; i++) {\r\n\t\t\t\tthis._renderCell(j, i, this._leftInner, paneWidth, paneHeight, paneScrollLeft, paneScrollTop, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n\t\t\t}\r\n\t\t\t//Render center cells\r\n\t\t\tleftRunner = 0;\r\n\t\t\tfor (let i=leftFreeze; i<columnCount; i++) {\r\n\t\t\t\tthis._renderCell(j, i, this._centerInner, paneWidth2, paneHeight2, paneScrollLeft2, paneScrollTop2, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n\t\t\t}\r\n\t\t\ttopRunner += rowHeight;\r\n\t\t}\r\n        this._leftInner.style.height = topRunner + 'px';\r\n        this._centerInner.style.width = leftRunner + 'px';\r\n        this._centerInner.style.height = topRunner + 'px';\r\n\r\n\t\t//Render bottom rows\r\n        paneScrollLeft = this._bottomLeftPane.scrollLeft;\r\n        paneScrollTop = this._bottomLeftPane.scrollTop;\r\n        paneWidth = this._bottomLeftPane.offsetWidth;\r\n        paneHeight = this._bottomLeftPane.offsetHeight;\r\n        paneScrollLeft2 = this._bottomPane.scrollLeft;\r\n        paneScrollTop2 = this._bottomPane.scrollTop;\r\n        paneWidth2 = this._bottomPane.offsetWidth;\r\n        paneHeight2 = this._bottomPane.offsetHeight;\r\n        topRunner = 0;\r\n\t\tfor (let j=(rowCount-bottomFreeze); j<rowCount; j++) {\r\n\t\t\tlet rowHeight = this._model.getRowHeight(j);\r\n\t\t\t//Render left cells\r\n\t\t\tleftRunner = 0;\r\n\t\t\tfor (let i=0; i<leftFreeze; i++) {\r\n\t\t\t\tthis._renderCell(j, i, this._bottomLeftInner, paneWidth, paneHeight, paneScrollLeft, paneScrollTop, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n\t\t\t}\r\n\t\t\t//Render center cells\r\n\t\t\tleftRunner = 0;\r\n\t\t\tfor (let i=leftFreeze; i<columnCount; i++) {\r\n\t\t\t\tthis._renderCell(j, i, this._bottomInner, paneWidth2, paneHeight2, paneScrollLeft2, paneScrollTop2, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n\t\t\t}\r\n\t\t\ttopRunner += rowHeight;\r\n\t\t}\r\n        this._bottomInner.style.width = leftRunner + 'px';\r\n        this._bottomInner.style.height = topRunner + 'px';\r\n    }\r\n\r\n    _isCellVisible (paneWidth, paneHeight, paneScrollLeft, paneScrollTop, cellX, cellY, cellWidth, cellHeight) {\r\n        if (cellX + cellWidth < paneScrollLeft ||\r\n            cellY + cellHeight < paneScrollTop ||\r\n            cellX > paneScrollLeft + paneWidth ||\r\n            cellY > paneScrollTop + paneHeight) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    _createCell (rowIndex, colIndex, x, y, width, height) {\r\n        let cell = null;\r\n        let key = rowIndex + ',' + colIndex;\r\n        if (this._recycledCells.length > 0) {\r\n            cell = this._recycledCells.pop();\r\n            cell.style.visibility = 'visible';\r\n        } else {\r\n            cell = document.createElement('div');\r\n\r\n            let cellContent = document.createElement('div');\r\n            cellContent.className = 'pgrid-cell-content';\r\n            cell.appendChild(cellContent);\r\n        }\r\n\t\tcell.style.left = x + 'px';\r\n\t\tcell.style.top = y + 'px';\r\n\t\tcell.style.width = width + 'px';\r\n\t\tcell.style.height = height + 'px';\r\n        cell.dataset.rowIndex = rowIndex;\r\n        cell.dataset.colIndex = colIndex;\r\n        cell.dataset.key = key;\r\n\r\n        this._cellReference[key] = cell;\r\n        return cell;\r\n    }\r\n\r\n    _recycleCell (cell) {\r\n        this._cellReference[cell.dataset.key] = null;\r\n        cell.style.visibility = 'hidden';\r\n        this._recycledCells.push(cell);\r\n    }\r\n\r\n\t_renderCell (rowIndex, colIndex, pane, paneWidth, paneHeight, paneScrollLeft, paneScrollTop, x, y, width, height) {\r\n        let key = rowIndex + ',' + colIndex;\r\n\r\n        //If the cell is outside of the viewport, then recycle the cell if it has already been created\r\n        if (!this._isCellVisible(paneWidth, paneHeight, paneScrollLeft, paneScrollTop, x, y, width, height)) {\r\n            let cell = this._cellReference[key];\r\n            if (cell) {\r\n                this._recycleCell(cell);\r\n            }\r\n            return false;\r\n        }\r\n\r\n        //If the cell already rendered, just skip the rendering\r\n        let existingCell = this._cellReference[key];\r\n        if (existingCell) {\r\n            return true;\r\n        }\r\n\r\n\t\tlet data = this._model.getDataAt(rowIndex, colIndex);\r\n\r\n        //Data can be transformed before rendering using dataBeforeRender extension\r\n\t\tlet arg = {data: data};\r\n\t\tthis._extensions.executeExtension('dataBeforeRender', arg);\r\n\t\tdata = arg.data;\r\n\r\n\t\tlet cell = this._createCell(rowIndex, colIndex, x, y, width, height);\r\n\t\tlet cellClasses = this._model.getCellClasses(rowIndex, colIndex);\r\n\t\tcell.className = 'pgrid-cell ' + cellClasses.join(' ');\r\n\r\n\t\tpane.appendChild(cell);\r\n        let cellContent = cell.firstChild;\r\n\t\tlet eventArg = {\r\n\t\t\tcell,\r\n\t\t\tcellContent,\r\n\t\t\trowIndex,\r\n\t\t\tcolIndex,\r\n\t\t\tdata,\r\n\t\t\trowId: this._model.getRowId(rowIndex),\r\n\t\t\tfield: this._model.getColumnField(colIndex),\r\n\t\t\thandled: false\r\n\t\t};\r\n\r\n\t\t//If there's cellRender extension, use cellRender extension to render the cell\r\n\t\t//Else just set the data to the cellContent directly\r\n\t\tlet handledByExt = false;\r\n\t\tif (this._extensions.hasExtension('cellRender')) {\r\n\t\t\tthis._extensions.executeExtension('cellRender', eventArg);\r\n\t\t\thandledByExt = eventArg.handled;\r\n\t\t}\r\n\r\n\t\tif (!handledByExt) {\r\n\t\t\tif (data !== undefined) {\r\n\t\t\t\tcellContent.innerHTML = data;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._extensions.executeExtension('cellAfterRender', eventArg);\r\n\t\tthis._extensions.executeExtension('cellAfterUpdate', eventArg);\r\n\r\n        eventArg = null;\r\n\r\n        return true;\r\n\t}\r\n\r\n\t_measureScrollbarWidth () {\r\n\t\tvar inner = document.createElement('p');\r\n\t\tinner.style.width = '100%';\r\n\t\tinner.style.height = '200px';\r\n\t\tvar outmost = document.createElement('div');\r\n\t\toutmost.className = 'pgrid';\r\n\t\tvar outer = document.createElement('div');\r\n\t\touter.style.position = 'absolute';\r\n\t\touter.style.top = '0px';\r\n\t\touter.style.left = '0px';\r\n\t\touter.style.visibility = 'hidden';\r\n\t\touter.style.width = '200px';\r\n\t\touter.style.height = '150px';\r\n\t\touter.style.overflow = 'hidden';\r\n\t\touter.appendChild(inner);\r\n\t\toutmost.appendChild(outer);\r\n\t\tdocument.body.appendChild(outmost);\r\n\t\tvar w1 = inner.offsetWidth;\r\n\t\touter.style.overflow = 'scroll';\r\n\t\tvar w2 = inner.offsetWidth;\r\n\t\tif (w1 == w2) w2 = outer.clientWidth;\r\n\t\tdocument.body.removeChild (outmost);\r\n\t\treturn (w1 - w2) + (this._detectIE()?1:0);\r\n\t}\r\n\r\n\r\n\t_detectIE () {\r\n\t  var ua = window.navigator.userAgent;\r\n\t  var msie = ua.indexOf('MSIE ');\r\n\t  if (msie > 0) {\r\n\t    // IE 10 or older => return version number\r\n\t    return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n\t  }\r\n\r\n\t  var trident = ua.indexOf('Trident/');\r\n\t  if (trident > 0) {\r\n\t    // IE 11 => return version number\r\n\t    var rv = ua.indexOf('rv:');\r\n\t    return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\r\n\t  }\r\n\r\n\t  var edge = ua.indexOf('Edge/');\r\n\t  if (edge > 0) {\r\n\t    // Edge (IE 12+) => return version number\r\n\t    return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\r\n\t  }\r\n\t  // other browser\r\n\t  return false;\r\n\t}\r\n}","import { EventDispatcher } from './event';\r\n\r\nexport class Model extends EventDispatcher {\r\n\r\n\tconstructor (config, data, extension) {\r\n\t\tsuper();\r\n\t\tthis._config = config;\r\n\t\tthis._data = data;\r\n\t\tthis._extension = extension;\r\n\r\n\t\tthis._columnModel = [];\r\n\t\tthis._rowModel = {};\r\n\t\tthis._headerRowModel = {};\r\n\t\tthis._cellModel = {};\r\n\t\tthis._headerCellModel = {};\r\n\r\n\t\tif (this._config.headerRows) {\r\n\t\t\tfor (let i=0; i<this._config.headerRows.length; i++) {\r\n\t\t\t\tif (this._config.headerRows[i].i !== undefined) {\r\n\t\t\t\t\tthis._headerRowModel[this._config.headerRows[i].i] = this._config.headerRows[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._config.columns) {\r\n\t\t\tfor (let i=0; i<this._config.columns.length; i++) {\r\n\t\t\t\tif (this._config.columns[i].i !== undefined) {\r\n\t\t\t\t\tthis._columnModel[this._config.columns[i].i] = this._config.columns[i];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._columnModel[i] = this._config.columns[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._config.rows) {\r\n\t\t\tfor (let i=0; i<this._config.rows.length; i++) {\r\n\t\t\t\tthis._rowModel[this._config.rows[i].i] = this._config.rows[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._config.cells) {\r\n\t\t\tfor (let i=0; i<this._config.cells.length; i++) {\r\n\t\t\t\tlet model = this._config.cells[i];\r\n\t\t\t\tif (!this._cellModel[model.c]) {\r\n\t\t\t\t\tthis._cellModel[model.c] = {};\r\n\t\t\t\t}\r\n\t\t\t\tthis._cellModel[model.c][model.r] = model;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._config.headerCells) {\r\n\t\t\tfor (let i=0; i<this._config.headerCells.length; i++) {\r\n\t\t\t\tlet model = this._config.headerCells[i];\r\n\t\t\t\tif (!this._headerCellModel[model.c]) {\r\n\t\t\t\t\tthis._headerCellModel[model.c] = {};\r\n\t\t\t\t}\r\n\t\t\t\tthis._headerCellModel[model.c][model.r] = model;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.calcTotalSize();\r\n\t}\r\n\r\n\tcanEdit (rowIndex, colIndex) {\r\n\t\tlet rowModel = this.getRowModel(rowIndex);\r\n\t\tlet colModel = this.getColumnModel(colIndex);\r\n\t\tlet cellModel = this.getCellModel(rowIndex, colIndex);\r\n\t\tlet result = false;\r\n\r\n\t\tif ((rowModel && rowModel.editable) ||\r\n\t\t\t(colModel && colModel.editable) ||\r\n\t\t\t(cellModel && cellModel.editable)) {\r\n\t\t\tif ((rowModel && rowModel.editable === false) ||\r\n\t\t\t\t(colModel && colModel.editable === false) ||\r\n\t\t\t\t(cellModel && cellModel.editable === false)) {\r\n\t\t\t\tresult = false;\r\n\t\t\t} else {\r\n\t\t\t\tresult = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Editibility can be overridden by extension\r\n\t\tif (this._extension.hasExtension('cellEditableCheck')) {\r\n\t\t\t\r\n\t\t\t//Can Edit Overriding\r\n\t\t\tconst rowId = this.getRowId(rowIndex);\r\n\t\t\tconst field = this.getColumnField(colIndex);\r\n\t\t\tconst dataRow = this._data.getRowData(rowId);\r\n\t\t\tconst e = {\r\n\t\t\t\trowIndex: rowIndex,\r\n\t\t\t\tcolIndex: colIndex,\r\n\t\t\t\trowId: rowId,\r\n\t\t\t\tfield: field,\r\n\t\t\t\tdataRow: dataRow,\r\n\t\t\t\trowModel: rowModel,\r\n\t\t\t\tcolModel: colModel,\r\n\t\t\t\tcellModel: cellModel,\r\n\t\t\t\tcanEdit: result\r\n\t\t\t};\r\n\t\t\tthis._extension.executeExtension('cellEditableCheck', e);\r\n\t\t\tresult = e.canEdit;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tisHeaderRow (rowIndex) {\r\n\t\treturn rowIndex < this._config.headerRowCount;\r\n\t}\r\n\r\n\tgetColumnWidth (colIndex) {\r\n\t\tlet colModel = this._columnModel[colIndex];\r\n\t\tif (colModel && colModel.width !== undefined) {\r\n\t\t\treturn colModel.width;\r\n\t\t} else {\r\n\t\t\treturn this._config.columnWidth;\r\n\t\t}\r\n\t}\r\n\r\n\tgetRowHeight (rowIndex) {\r\n\t\tif (this.isHeaderRow(rowIndex)) {\r\n\r\n\t\t} else {\r\n\t\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n\t\t\tlet rowModel = this._rowModel[dataRowIndex];\r\n\t\t\tif (rowModel && rowModel.height !== undefined) {\r\n\t\t\t\treturn rowModel.height;\r\n\t\t\t} else {\r\n\t\t\t\treturn this._config.rowHeight;\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n\r\n\tgetColumnCount () {\r\n\t\treturn this._config.columns.length;\r\n\t}\r\n\r\n\tgetRowCount () {\r\n\t\tlet headerRowCount = this._config.headerRowCount;\r\n\t\treturn headerRowCount + this._data.getRowCount();\r\n\t}\r\n\r\n\tgetTopFreezeRows () {\r\n\t\tlet topFreeze = 0;\r\n\t\tif (this._config.headerRowCount !== undefined) {\r\n\t\t\ttopFreeze += this._config.headerRowCount; \r\n\t\t} else {\r\n\t\t\ttopFreeze += 1;\r\n\t\t}\r\n\t\tif (this._config.freezePane && this._config.freezePane.top > 0) {\r\n\t\t\ttopFreeze += this._config.freezePane.top;\r\n\t\t}\r\n\t\treturn topFreeze;\r\n\t}\r\n\r\n\tgetTopFreezeSize () {\r\n\t\tconst topFreezeRow = this.getTopFreezeRows(); \r\n\t\tlet sum = 0;\r\n\t\tfor (let i=0; i<topFreezeRow; i++) {\r\n\t\t\tsum += this.getRowHeight(i);\r\n\t\t}\r\n\t\treturn sum;\r\n\t}\r\n\r\n\tgetLeftFreezeRows () {\r\n\t\tif (this._config.freezePane && this._config.freezePane.left > 0) {\r\n\t\t\treturn this._config.freezePane.left;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tgetLeftFreezeSize () {\r\n\t\tif (this._config.freezePane && this._config.freezePane.left > 0) {\r\n\t\t\tlet sum = 0;\r\n\t\t\tfor (let i=0; i<this._config.freezePane.left; i++) {\r\n\t\t\t\tsum += this.getColumnWidth(i);\r\n\t\t\t}\r\n\t\t\treturn sum;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tgetBottomFreezeRows () {\r\n\t\tif (this._config.freezePane && this._config.freezePane.bottom > 0) {\r\n\t\t\treturn this._config.freezePane.bottom;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tgetBottomFreezeSize () {\r\n\t\treturn this._bottomFreezeSize;\r\n\t}\r\n\r\n\tgetColumnWidth (index) {\r\n\t\tif (this._columnModel[index] && this._columnModel[index].width !== undefined) {\r\n\t\t\treturn this._columnModel[index].width;\r\n\t\t}\r\n\t\treturn this._config.columnWidth;\r\n\t}\r\n\r\n\tgetRowHeight (index) {\r\n\t\tif (this._rowModel[index] && this._rowModel[index].height !== undefined) {\r\n\t\t\treturn this._rowModel[index].height;\r\n\t\t}\r\n\t\treturn this._config.rowHeight;\r\n\t}\r\n\r\n\tgetTotalWidth () {\r\n\t\treturn this._totalWidth;\r\n\t}\r\n\r\n\tgetTotalHeight () {\r\n\t\treturn this._totalHeight;\r\n\t}\r\n\r\n\tgetRowModel (rowIndex) {\r\n\t\tif (this.isHeaderRow(rowIndex)) {\r\n\t\t\treturn this._headerRowModel[rowIndex];\r\n\t\t} else {\r\n\t\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n\t\t\treturn this._rowModel[dataRowIndex];\r\n\t\t}\r\n\t}\r\n\r\n\tgetColumnModel (colIndex) {\r\n\t\treturn this._columnModel[colIndex];\r\n\t}\r\n\r\n\tgetCellModel (rowIndex, colIndex) {\r\n\t\tif (this.isHeaderRow(rowIndex)) {\r\n\t\t\tif (this._headerCellModel[colIndex]) {\r\n\t\t\t\treturn this._headerCellModel[colIndex][rowIndex];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n\t\t\tif (this._cellModel[colIndex]) {\r\n\t\t\t\treturn this._cellModel[colIndex][dataRowIndex];\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n\r\n\tgetCascadedCellProp (rowIndex, colIndex, propName) {\r\n\t\tconst cellModel = this.getCellModel(rowIndex, colIndex);\r\n\t\tif (cellModel && cellModel[propName]) {\r\n\t\t\treturn cellModel[propName];\r\n\t\t}\r\n\r\n\t\tconst rowModel = this.getRowModel(rowIndex);\r\n\t\tif (rowModel && rowModel[propName]) {\r\n\t\t\treturn rowModel[propName];\r\n\t\t}\r\n\r\n\t\tconst columnModel = this.getColumnModel(colIndex);\r\n\t\tif (columnModel && columnModel[propName]) {\r\n\t\t\treturn columnModel[propName];\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tgetCellClasses (rowIndex, colIndex) {\r\n\t\tlet output = [];\r\n\t\tconst colModel = this.getColumnModel(colIndex);\r\n\t\tif (colModel) {\r\n\t\t\tif (colModel.cssClass) {\r\n\t\t\t\toutput.unshift(colModel.cssClass);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst isHeader = this.isHeaderRow(rowIndex);\r\n\t\tconst rowModel = this.getRowModel(rowIndex);\r\n\t\tif (rowModel) {\r\n\t\t\tif (isHeader) {\r\n\t\t\t\toutput.unshift('pgrid-row-header');\r\n\t\t\t}\r\n\t\t\tif (rowModel.cssClass) {\r\n\t\t\t\toutput.unshift(rowModel.cssClass);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst cellModel = this.getCellModel(rowIndex, colIndex);\r\n\t\tif (cellModel) {\r\n\t\t\tif (cellModel.cssClass) {\r\n\t\t\t\toutput.unshift(cellModel.cssClass);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n\r\n\tdetermineScrollbarState (viewWidth, viewHeight, scrollbarSize) {\r\n\t\tlet needH = this._totalWidth > viewWidth;\r\n\t\tlet needV = this._totalHeight > viewHeight;\r\n\r\n\t\tif (needH && !needV) {\r\n\t\t\tneedV = this._totalHeight > (viewHeight - scrollbarSize);\r\n\t\t} else\r\n\t\tif (!needH && needV) {\r\n\t\t\tneedH = this._totalWidth > (viewWidth - scrollbarSize);\r\n\t\t}\r\n\r\n\t\tif (needH && needV) {\r\n\t\t\treturn 'b';\r\n\t\t} else\r\n\t\tif (!needH && needV) {\r\n\t\t\treturn 'v';\r\n\t\t} else\r\n\t\tif (needH && !needV) {\r\n\t\t\treturn 'h';\r\n\t\t}\r\n\t\treturn 'n';\r\n\t}\r\n\r\n\tgetDataAt (rowIndex, colIndex) {\r\n\t\tif (this.isHeaderRow(rowIndex)) {\r\n\t\t\tconst colModel = this.getColumnModel(colIndex);\r\n\t\t\tif (colModel && colModel.title) {\r\n\t\t\t\treturn colModel.title;\r\n\t\t\t} else {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n\t\t\tconst colModel = this.getColumnModel(colIndex);\r\n\t\t\tif (colModel && colModel.field) {\r\n\t\t\t\treturn this._data.getDataAt(dataRowIndex, colModel.field);\r\n\t\t\t} else {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n\r\n    getRowDataAt (rowIndex) {\r\n\t\tif (this.isHeaderRow(rowIndex)) {\r\n            return undefined;\r\n\t\t} else {\r\n\t\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n            return this._data.getRowDataAt(dataRowIndex);\r\n\t\t}\r\n\t}\r\n\r\n\tsetDataAt (rowIndex, colIndex, data) {\r\n\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n\t\tconst colModel = this.getColumnModel(colIndex);\r\n\t\tif (colModel && colModel.field) {\r\n\t\t\tthis._data.setDataAt(dataRowIndex, colModel.field, data);\r\n\t\t}\r\n\t}\r\n\r\n\tgetRowIndex (rowId) {\r\n\t\treturn this._config.headerRowCount + this._data.getRowIndex(rowId);\r\n\t}\r\n\r\n\tgetRowId (rowIndex) {\r\n\t\tif (rowIndex >= this._config.headerRowCount) {\r\n\t\t\treturn this._data.getRowId(rowIndex - this._config.headerRowCount);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tgetColumnIndex (field) {\r\n\t\tfor (let i=0; i<this._config.columns.length; i++) {\r\n\t\t\tif (this._config.columns[i].field === field) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tgetColumnField (colIndex) {\r\n\t\tif (this._config.columns[colIndex]) {\r\n\t\t\treturn this._config.columns[colIndex].field;\r\n\t\t}\r\n\t}\r\n\r\n\tcalcTotalSize() {\r\n\t\tthis._calcTotalWidth();\r\n\t\tthis._calcTotalHeight();\r\n\t\tthis._calcBottomFreezeSize();\r\n\t}\r\n\r\n\t_calcTotalWidth () {\r\n\t\tthis._totalWidth = 0;\r\n\t\tfor (let i=0; i<this._columnModel.length; i++) {\r\n\t\t\tif (this._columnModel[i].width !== undefined) {\r\n\t\t\t\tthis._totalWidth += this._columnModel[i].width;\r\n\t\t\t} else {\r\n\t\t\t\tthis._totalWidth += this._config.columnWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_calcTotalHeight () {\r\n\t\tlet headerRowModelCount = Object.keys(this._headerRowModel);\r\n\t\tthis._totalHeight = this._config.rowHeight * (this._config.headerRowCount - headerRowModelCount.length);\r\n\t\tfor (let index in this._headerRowModel) {\r\n\t\t\tif (this._headerRowModel[index].height !== undefined) {\r\n\t\t\t\tthis._totalHeight += this._headerRowModel[index].height;\r\n\t\t\t} else {\r\n\t\t\t\tthis._totalHeight += this._config.rowHeight;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet rowModelCount = Object.keys(this._rowModel);\r\n\t\tthis._totalHeight += this._config.rowHeight * (this._data.getRowCount() - rowModelCount.length);\r\n\t\tfor (let index in this._rowModel) {\r\n\t\t\tif (this._rowModel[index].height !== undefined) {\r\n\t\t\t\tthis._totalHeight += this._rowModel[index].height;\r\n\t\t\t} else {\r\n\t\t\t\tthis._totalHeight += this._config.rowHeight;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_calcBottomFreezeSize () {\r\n\t\tif (this._config.freezePane && this._config.freezePane.bottom > 0) {\r\n\t\t\tlet sum = 0;\r\n\t\t\tfor (let i=0; i<this._config.freezePane.bottom; i++) {\r\n\t\t\t\tsum += this.getRowHeight((this._config.rowCount-1)-i);\r\n\t\t\t}\r\n\t\t\tthis._bottomFreezeSize = sum;\r\n\t\t} else {\r\n\t\t\tthis._bottomFreezeSize = 0;\r\n\t\t}\r\n\t}\r\n}","import { EventDispatcher } from \"../grid/event\";\r\n\r\nconst CHANGE_EVENT_NAME = 'dataChanged';\r\n\r\nexport class DataTable extends EventDispatcher {\r\n\r\n    constructor (dataModel, extension) {\r\n        super();\r\n\r\n        this._extension = extension;\r\n        this._idRunner = 0;\r\n        this._rid = [];\r\n        this._rowMap = {};\r\n        this._data = [];\r\n        this._blockEvent = false;\r\n        this._processedEvent = [];\r\n        this._transformedRid = [];\r\n        this._searchQuery = null;\r\n        this._searchFields = null;\r\n        this._freezeCount = 0;\r\n\r\n        let { format, data, fields } = dataModel;\r\n\r\n        // Set default format at rows\r\n        if (!format) {\r\n            format = 'rows';\r\n        }\r\n        this._dataFormat = format;\r\n        this._fields = fields;\r\n\r\n        if (Array.isArray(data)) {\r\n            for (let i=0; i<data.length; i++) {\r\n                this.addRow(data[i]);\r\n            }\r\n        } else {\r\n            this._data = [];\r\n        }\r\n    }\r\n\r\n    getRowCount () {\r\n        return this._transformedRid.length;\r\n    }\r\n\r\n    getAllData() {\r\n        return this._data;\r\n    }\r\n\r\n    getData (rowId, field) {\r\n        let row = this._rowMap[rowId];\r\n        if (row) {\r\n            return row[field];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    getDataAt (rowIndex, field) {\r\n        let rowId = this._transformedRid[rowIndex];\r\n        if (rowId) {\r\n            let row = this._rowMap[rowId];\r\n            if (row) {\r\n                return row[field];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    getRowData (rowId) {\r\n        return this._rowMap[rowId];\r\n    }\r\n\r\n    getRowDataAt (rowIndex) {\r\n        let rowId = this._transformedRid[rowIndex];\r\n        if (rowId) {\r\n            return this._rowMap[rowId];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    getRowIndex (rowId) {\r\n        return this._transformedRid.indexOf(rowId);\r\n    }\r\n\r\n    getRowId (rowIndex) {\r\n        return this._transformedRid[rowIndex];\r\n    }\r\n\r\n    freeze () {\r\n        this._freezeCount++;\r\n    }\r\n\r\n    unfreeze () {\r\n        this._freezeCount--;\r\n        if (this._freezeCount < 0) {\r\n            this._freezeCount = 0;\r\n        }\r\n    }\r\n\r\n    setData (rowId, field, value) {\r\n\r\n        let row = this._rowMap[rowId];\r\n\r\n        //Skip updating if the data is not changing\r\n        if (row && row[field] === value) {\r\n            return;\r\n        }\r\n\r\n        const beforeUpdateArg = {\r\n            changeType: 'fieldChange',\r\n\t\t\trowId: rowId,\r\n\t\t\tfield: field,\r\n\t\t\tdata: value,\r\n\t\t\tcancel: false\r\n        };\r\n\r\n        this._processedEvent.push(beforeUpdateArg);\r\n\r\n        let blocked = false;\r\n\r\n        if (!this._blockEvent) {\r\n\t\t\tthis._blockEvent = true;\r\n\t\t\tthis._extension.executeExtension('dataBeforeUpdate', beforeUpdateArg);\r\n\t\t\tthis._blockEvent = false;\r\n\t\t} else {\r\n            blocked = true;\r\n        }\r\n\r\n\t\tif (!beforeUpdateArg.cancel) {\r\n            if (row) {\r\n                row[field] = beforeUpdateArg.data;\r\n                if (!this._blockEvent) {\r\n                    this._blockEvent = true;\r\n                    this._extension.executeExtension('dataAfterUpdate', beforeUpdateArg);\r\n                    this._blockEvent = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!blocked) {\r\n            let eventArg = {\r\n                updates: this._processedEvent\r\n            };\r\n            this._extension.executeExtension('dataFinishUpdate', eventArg);\r\n            if (this._freezeCount === 0) {\r\n                setTimeout(() => {\r\n                    this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n                }, 100);\r\n            }\r\n            this._processedEvent = [];\r\n        }\r\n    }\r\n\r\n    setDataAt (rowIndex, field, value) {\r\n        const rowId = this._transformedRid[rowIndex];\r\n        if (rowId !== undefined) {\r\n            this.setData(rowId, field, value);\r\n        }\r\n    }\r\n\r\n    addRow (rowData) {\r\n        const count = this.getRowCount();\r\n        this.insertRow(count, rowData);\r\n    }\r\n\r\n    insertRow (rowIndex, rowData) {\r\n        let rid = null;\r\n        let inserted = false;\r\n        if (this._dataFormat === 'rows') {\r\n            rid = this._generateRowId();\r\n            this._rid.splice(rowIndex, 0, rid);\r\n            this._rowMap[rid] = rowData;\r\n            this._data.splice(rowIndex, 0, rowData);\r\n            inserted = true;\r\n        } else\r\n        if (this._dataFormat === 'array') {\r\n            if (Array.isArray(this._fields)) {\r\n                rid = this._generateRowId();\r\n                this._rid.splice(rowIndex, 0, rid);\r\n                let newObj = this._createObject(rowData, this._fields);\r\n                this._rowMap[rid] = newObj;\r\n                this._data.splice(rowIndex, 0, newObj);\r\n                inserted = true;\r\n            }\r\n        }\r\n\r\n        //Dispatch change event\r\n        if (inserted) {\r\n            if (this._freezeCount === 0) {\r\n                const eventArg = {\r\n                    updates: [{\r\n                        changeType: 'rowAdded',\r\n                        rowId: rid,\r\n                        data: this.getRowData(rid)\r\n                    }]\r\n                };\r\n                this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n            }\r\n        }\r\n\r\n        //Re-apply transformation if it's already there\r\n        if (this._searchQuery) {\r\n            this.search(this._searchQuery, this._searchFields);\r\n        } else {\r\n            this._transformedRid = this._rid.slice();\r\n        }\r\n    }\r\n\r\n    removeRow (rid) {\r\n        let row = this._rowMap[rid];\r\n        let index = this._data.indexOf(row);\r\n        let tIndex = this._transformedRid.indexOf(rid);\r\n        this._data.splice(index, 1);\r\n        this._rid.splice(index, 1);\r\n        this._transformedRid.splice(tIndex, 1);\r\n        delete this._rowMap[rid];\r\n\r\n        if (this._freezeCount === 0) {\r\n            const eventArg = {\r\n                updates: [{\r\n                    changeType: 'rowRemoved',\r\n                    rowId: rid\r\n                }]\r\n            };\r\n            this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n        }\r\n    }\r\n\r\n    removeRowAt (index) {\r\n        let rid = this.getRowId(index);\r\n        this.removeRow(rid);\r\n    }\r\n\r\n    removeAllRows () {\r\n        this._rid = [];\r\n        this._transformedRid = [];\r\n        this._rowMap = {};\r\n        this._data = [];\r\n\r\n        if (this._freezeCount === 0) {\r\n            const eventArg = {\r\n                updates: [{\r\n                    changeType: 'global'\r\n                }]\r\n            };\r\n            setTimeout(() => {\r\n                this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n            }, 100);\r\n        }\r\n    }\r\n\r\n    search (query, fields) {\r\n        //Store for later use\r\n        this._searchQuery = query;\r\n        this._searchFields = fields;\r\n\r\n        //Cache field map for faster field search\r\n        let fieldMap = null;\r\n        if (fields) {\r\n            fieldMap = fields.reduce((acc, val) => {\r\n                acc[val] = true;\r\n            }, {});\r\n        }\r\n\r\n        //Filter rows\r\n        const regex = new RegExp(query, 'i');\r\n        this._transformedRid = this._rid.filter((rid) => {\r\n            const rowData = this._rowMap[rid];\r\n            if (rowData) {\r\n                for (var field in rowData) {\r\n                    if ((!fieldMap || fieldMap[field]) && rowData[field]) {\r\n                        if (regex.test(rowData[field])) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        //Dispatch global change event\r\n        if (this._freezeCount === 0) {\r\n            const eventArg = {\r\n                updates: [{\r\n                    changeType: 'global'\r\n                }]\r\n            };\r\n            this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n        }\r\n    }\r\n\r\n    clearSearch () {\r\n        this._transformedRid = this._rid.slice();\r\n        this._searchQuery = null;\r\n        this._searchFields = null;\r\n        if (this._freezeCount === 0) {\r\n            const eventArg = {\r\n                updates: [{\r\n                    changeType: 'global'\r\n                }]\r\n            };\r\n            this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n        }\r\n    }\r\n\r\n    _generateRowId () {\r\n        this._idRunner++;\r\n        return '' + this._idRunner;\r\n    }\r\n\r\n    _createObject(arrayValues, fields) {\r\n        let newObj = {};\r\n        for (let i=0; i<fields.length; i++) {\r\n            newObj[fields[i]] = arrayValues[i];\r\n        }\r\n        return newObj;\r\n    }\r\n\r\n}","export class Extension {\r\n\r\n\tconstructor (grid, config) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._config = config;\r\n\r\n\t\tthis._extensions = {\r\n\t\t\tcellRender: [],\r\n\t\t\tcellAfterRender: [],\r\n\t\t\tcellUpdate: [],\r\n\t\t\tcellAfterUpdate: [],\r\n\t\t\tcellEditableCheck: [],\r\n\t\t\tkeyDown: [],\r\n\t\t\tgridAfterRender: [],\r\n\t\t\tdataBeforeRender: [],\r\n\t\t\tdataBeforeUpdate: [],\r\n\t\t\tdataAfterUpdate: [],\r\n\t\t\tdataFinishUpdate: []\r\n\t\t}\r\n\t}\r\n\r\n\tloadExtension (ext) {\r\n\t\tif (ext['init']) {\r\n\t\t\text['init'](this._grid, this._config);\r\n\t\t}\r\n\t\tfor (let extPoint in this._extensions) {\r\n\t\t\tif (ext[extPoint]) {\r\n\t\t\t\tthis._extensions[extPoint].push(ext);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thasExtension (extPoint) {\r\n\t\treturn (this._extensions[extPoint] && this._extensions[extPoint].length > 0)\r\n\t}\r\n\r\n\tqueryExtension (extPoint) {\r\n\t\tif (this._extensions[extPoint]) {\r\n\t\t\treturn this._extensions[extPoint];\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\texecuteExtension (extPoint) {\r\n\t\tthis.queryExtension(extPoint).forEach((ext) => {\r\n\t\t\text[extPoint].apply(ext, Array.prototype.slice.call(arguments, 1));\r\n\t\t});\r\n\t}\r\n\r\n}","export class State {\r\n\r\n\tconstructor () {\r\n\t\tthis._state = {};\r\n\t}\r\n\r\n\texists (key) {\r\n\t\treturn (this._state[key] !== undefined);\r\n\t}\r\n\r\n\tget (key) {\r\n\t\treturn this._state[key];\r\n\t}\r\n\r\n\tset (key, value) {\r\n\t\tthis._state[key] = value;\r\n\t}\r\n\t\r\n}","export class Utils {\r\n\r\n\tstatic mixin(source, target) {\r\n\t\tfor (var prop in source) {\r\n\t\t\tif (source.hasOwnProperty(prop)) {\r\n\t\t\t\ttarget[prop] = source[prop];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n}","export class SelectionExtension {\r\n\r\n\tinit (grid, config) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._config = config;\r\n\t\tthis._currentSelection = null;\r\n\t\tthis._selectionClass = (this._config.selection && this._config.selection.cssClass)?this._config.selection.cssClass:'pgrid-cell-selection';\r\n\t}\r\n\r\n\tkeyDown (e) {\r\n\t\tlet editing = this._grid.state.get('editing');\r\n\t\tif (editing) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet selection = this._grid.state.get('selection');\r\n\t\tif (selection && selection.length > 0) {\r\n\t\t\tlet rowIndex = selection[0].r;\r\n\t\t\tlet colIndex = selection[0].c;\r\n\t\t\tlet alignTop = true;\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t\tcase 40: //Down\r\n\t\t\t\t\trowIndex++;\r\n\t\t\t\t\talignTop = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 38: //Up\r\n\t\t\t\t\trowIndex--;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 37: //Left\r\n\t\t\t\t\tcolIndex--;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 39: //Right\r\n\t\t\t\tcase 9: //Tab\r\n\t\t\t\t\tcolIndex++;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (rowIndex >= 0 && rowIndex < this._grid.model.getRowCount() &&\r\n\t\t\t\tcolIndex >= 0 && colIndex < this._grid.model.getColumnCount()) {\r\n\t\t\t\tconst isHeader = this._grid.model.isHeaderRow(rowIndex);\r\n\t\t\t\tconst rowModel = this._grid.model.getRowModel(rowIndex);\r\n\t\t\t\tif (!rowModel || !isHeader) {\r\n\t\t\t\t\tlet cell = this._grid.view.getCell(rowIndex, colIndex);\r\n\t\t\t\t\tif (cell) {\r\n\t\t\t\t\t\tthis._selectCell(cell, rowIndex, colIndex);\r\n\t\t\t\t\t\tthis._grid.view.scrollToCell(rowIndex, colIndex, alignTop);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcellAfterRender (e) {\r\n\t\te.cell.addEventListener('mousedown', (e) => {\r\n\t\t\tconst actualCell = e.target;\r\n\t\t\tconst actualRow = parseInt(actualCell.dataset.rowIndex);\r\n\t\t\tconst actualCol = parseInt(actualCell.dataset.colIndex);\r\n\t\t\tconst rowModel = this._grid.model.getRowModel(actualRow);\r\n\t\t\tconst isHeader = this._grid.model.isHeaderRow(actualRow);\r\n\t\t\tif (!rowModel || !isHeader) {\r\n\t\t\t\tif (actualCell.classList.contains('pgrid-cell')) {\r\n\t\t\t\t\tthis._selectCell(actualCell, actualRow, actualCol);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_selectCell (cell, rowIndex, colIndex) {\r\n\t\t//Clear old selection\r\n\t\tif (this._currentSelection && this._currentSelection !== cell) {\r\n\t\t\tthis._currentSelection.classList.remove(this._selectionClass);\r\n\t\t}\r\n\r\n\t\t//Set selection\r\n\t\tthis._currentSelection = cell;\r\n\t\tthis._currentSelection.classList.add(this._selectionClass);\r\n\t\tthis._grid.view.getElement().focus();\r\n\r\n\t\t//Store selection state\r\n\t\tlet selection = this._grid.state.get('selection');\r\n\t\tif (!selection) {\r\n\t\t\tselection = [];\r\n\t\t\tthis._grid.state.set('selection', selection);\r\n\t\t}\r\n\t\tselection.length = 0;\r\n\t\tselection.push({\r\n\t\t\tr: rowIndex,\r\n\t\t\tc: colIndex,\r\n\t\t\tw: 1,\r\n\t\t\th: 1\r\n\t\t});\r\n\r\n\t}\r\n\r\n}","export class EditorExtension {\r\n\r\n\tinit (grid, config) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._config = config;\r\n\t\tthis._editorAttached = false;\r\n\t\tthis.scrollHandler = this.scrollHandler.bind(this);\r\n\t\tthis._grid.view.listen('vscroll', this.scrollHandler);\r\n\t\tthis._grid.view.listen('hscroll', this.scrollHandler);\r\n\t}\r\n\r\n\tscrollHandler () {\r\n\t\tthis._detachEditor();\r\n\t}\r\n\r\n\tkeyDown (e) {\r\n\t\tif (!this._editorAttached) {\r\n\t\t\tif (!e.ctrlKey) {\r\n\t\t\t\tlet selection = this._grid.state.get('selection');\r\n\t\t\t\tif (selection && selection.length > 0) {\r\n\t\t\t\t\tlet rowIndex = selection[0].r;\r\n\t\t\t\t\tlet colIndex = selection[0].c;\r\n\t\t\t\t\tlet edit = false;\r\n\t\t\t\t\tif (e.keyCode === 13 || (e.keyCode > 31 && !(e.keyCode >= 37 && e.keyCode <= 40))) {\r\n\t\t\t\t\t\tedit = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (edit &&\r\n\t\t\t\t\t\trowIndex >= 0 && rowIndex < this._grid.model.getRowCount() &&\r\n\t\t\t\t\t\tcolIndex >= 0 && colIndex < this._grid.model.getColumnCount()) {\r\n\t\t\t\t\t\tlet cell = this._grid.view.getCell(rowIndex, colIndex);\r\n\t\t\t\t\t\tif (cell) {\r\n\t\t\t\t\t\t\tthis._editCell(cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcellAfterRender (e) {\r\n\t\te.cell.addEventListener('dblclick', (e) => {\r\n\t\t\tlet actualCell = e.target;\r\n\t\t\tif (actualCell) {\r\n\t\t\t\tthis._editCell(actualCell);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_editCell (cell) {\r\n\t\tlet actualCell = cell;\r\n\t\tlet actualRow = parseInt(actualCell.dataset.rowIndex);\r\n\t\tlet actualCol = parseInt(actualCell.dataset.colIndex);\r\n\t\tif (this._grid.model.canEdit(actualRow, actualCol)) {\r\n\r\n\t\t\t//If there's custom editor, use custom editor to attach the editor\r\n\t\t\tthis._grid.state.set('editing', true);\r\n\r\n\t\t\t//Create float editor container\r\n\t\t\tlet cellBound = cell.getBoundingClientRect();\r\n\t\t\tconst scrollingElement = document.scrollingElement || document.documentElement;\r\n\t\t\tlet scrollTop = scrollingElement.scrollTop;\r\n\t\t\tlet scrollLeft = scrollingElement.scrollLeft;\r\n\t\t\tthis._editorContainer = document.createElement('div');\r\n\t\t\tthis._editorContainer.style.position = 'absolute';\r\n\t\t\tthis._editorContainer.style.top = (cellBound.top + scrollTop) + 'px';\r\n\t\t\tthis._editorContainer.style.left = (cellBound.left + scrollLeft) + 'px';\r\n\t\t\tthis._editorContainer.style.width = cellBound.width + 'px';\r\n\t\t\tthis._editorContainer.style.height = cellBound.height + 'px';\r\n\t\t\tdocument.body.appendChild(this._editorContainer);\r\n\r\n            //Get edited data field\r\n            let data = this._grid.model.getDataAt(actualRow, actualCol);\r\n\r\n\t\t\t//Check if there's any custom editor\r\n\t\t\tlet customEditor = this._grid.model.getCascadedCellProp(actualCell.dataset.rowIndex, actualCell.dataset.colIndex, 'editor');\r\n\t\t\tif (customEditor && customEditor.attach) {\r\n                let dataRow = this._grid.model.getRowDataAt(actualRow, actualCol);\r\n                let eventArg = {\r\n                    cell: this._editorContainer,\r\n                    data: data,\r\n                    dataRow: dataRow,\r\n                    done: this._done.bind(this)\r\n                };\r\n\t\t\t\tcustomEditor.attach(eventArg);\r\n\t\t\t} else {\r\n\t\t\t\tthis._attachEditor(this._editorContainer, data, this._done.bind(this));\r\n\t\t\t}\r\n\r\n\t\t\tthis._editorAttached = true;\r\n\t\t\tthis._editingCol = actualCol;\r\n\t\t\tthis._editingRow = actualRow;\r\n\t\t}\r\n\t}\r\n\r\n\t_attachEditor (cell, data, done) {\r\n\t\tif (!this._inputElement) {\r\n\t\t\tlet cellBound = cell.getBoundingClientRect();\r\n\t\t\tthis._inputElement = document.createElement('input');\r\n\t\t\tthis._inputElement.type = 'text';\r\n\t\t\tthis._inputElement.value = data;\r\n\t\t\tthis._inputElement.style.width = (cellBound.width) + 'px';\r\n\t\t\tthis._inputElement.style.height = (cellBound.height) + 'px';\r\n\t\t\tthis._inputElement.className = 'pgrid-cell-text-editor';\r\n\r\n\t\t\tcell.appendChild(this._inputElement);\r\n\r\n\t\t\tthis._inputElement.focus();\r\n\t\t\tthis._inputElement.select();\r\n\r\n\t\t\tthis._arrowKeyLocked = false;\r\n\r\n\t\t\tthis._keydownHandler = (e) => {\r\n\t\t\t\tswitch (e.keyCode) {\r\n\t\t\t\t\tcase 13: //Enter\r\n\t\t\t\t\t\t//Prevent double done() call\r\n\t\t\t\t\t\tif (this._inputElement) {\r\n\t\t\t\t\t\t\tthis._inputElement.removeEventListener('blur', this._blurHandler);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdone(e.target.value);\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 27: //ESC\r\n\t\t\t\t\t\t//Prevent double done() call\r\n\t\t\t\t\t\tif (this._inputElement) {\r\n\t\t\t\t\t\t\tthis._inputElement.removeEventListener('blur', this._blurHandler);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdone();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 40: //Down\r\n\t\t\t\t\tcase 38: //Up\r\n\t\t\t\t\tcase 37: //Left\r\n\t\t\t\t\tcase 39: //Right\r\n                        const activeTag = document.activeElement.tagName;\r\n                        if (activeTag !== 'INPUT') {\r\n                            done(e.target.value);\r\n                        }\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis._blurHandler = (e) => {\r\n\t\t\t\tdone(e.target.value);\r\n\t\t\t};\r\n\r\n\t\t\tthis._inputElement.addEventListener('keydown', this._keydownHandler);\r\n\t\t\tthis._inputElement.addEventListener('blur', this._blurHandler);\r\n\t\t}\r\n\t}\r\n\r\n\t_detachEditor () {\r\n\t\tif (this._editorContainer) {\r\n\t\t\t//Double checking to fix wiered bug\r\n\t\t\tthis._editorContainer.parentElement.removeChild(this._editorContainer);\r\n\t\t\tthis._editorContainer = null;\r\n\t\t\tif (this._inputElement) {\r\n\t\t\t\tthis._inputElement.removeEventListener('keydown', this._keydownHandler);\r\n\t\t\t\tthis._inputElement.removeEventListener('blur', this._blurHandler);\r\n\t\t\t\tthis._inputElement.removeEventListener('click', this._clickHandler);\r\n\t\t\t\tthis._inputElement.parentElement.removeChild(this._inputElement);\r\n\t\t\t\tthis._inputElement = null;\r\n\t\t\t\tthis._keydownHandler = null;\r\n\t\t\t\tthis._blurHandler = null;\r\n\t\t\t\tthis._clickHandler = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_done (result, multiFields) {\r\n\t\tthis._detachEditor();\r\n\t\tif (result !== undefined) {\r\n\t\t\tif (!multiFields) {\r\n\t\t\t\tthis._grid.model.setDataAt(this._editingRow, this._editingCol, result);\r\n\t\t\t} else {\r\n\t\t\t\tlet rowId = this._grid.model.getRowId(this._editingRow);\r\n\t\t\t\tif (rowId) {\r\n\t\t\t\t\tfor (let prop in result) {\r\n\t\t\t\t\t\tif (result.hasOwnProperty(prop)) {\r\n\t\t\t\t\t\t\tthis._grid.data.setData(rowId, prop, result[prop]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._grid.view.updateCell(this._editingRow, this._editingCol);\r\n\t\tthis._editingRow = -1;\r\n\t\tthis._editingCol = -1;\r\n\t\tthis._editorAttached = false;\r\n\t\tthis._grid.state.set('editing', false);\r\n\r\n\t\t//Re-focus at the grid\r\n\t\tthis._grid.view.getElement().focus();\r\n\t}\r\n\r\n}","export class CopyPasteExtension {\r\n\r\n    constructor() {\r\n        this._globalClipboard = false;\r\n    }\r\n\r\n\tinit (grid, config) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._config = config;\r\n\t}\r\n\r\n\tkeyDown (e) {\r\n        if (this._globalClipboard && e.ctrlKey) {\r\n            if (e.key === 'c') {\r\n                let data = this._copy();\r\n                if (data !== null) {\r\n                    window.clipboardData.setData('text', data);\r\n                }\r\n            } else\r\n            if (e.key === 'v') {\r\n                this._paste(window.clipboardData.getData('text'));\r\n            }\r\n        }\r\n    }\r\n\r\n    gridAfterRender(e) {\r\n        if (!window.clipboardData) {\r\n            this._grid.view.getElement().addEventListener('paste', (pasteEvent) => {\r\n                this._paste(pasteEvent.clipboardData.getData('text'));\r\n            });\r\n            this._grid.view.getElement().addEventListener('copy', (copyEvent) => {\r\n                let data = this._copy();\r\n                if (data !== null) {\r\n                    copyEvent.clipboardData.setData('text/plain', data);\r\n                    copyEvent.preventDefault();\r\n                }\r\n            });\r\n            this._globalClipboard = false;\r\n        } else {\r\n            this._globalClipboard = true;\r\n        }\r\n    }\r\n\r\n    _copy(clipboardData) {\r\n        let selection = this._grid.state.get('selection');\r\n        if (selection && selection.length > 0) {\r\n            let s = selection[0];\r\n            let rows = [];\r\n            for (let i=0; i<s.h; i++) {\r\n                let cols = [];\r\n                for (let j=0; j<s.w; j++) {\r\n                    cols.push(this._grid.model.getDataAt(s.r + i, s.c + j));\r\n                }\r\n                rows.push(cols.join('\\t'));\r\n            }\r\n            return rows.join('\\n');\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    _paste(data) {\r\n        if (data) {\r\n            data = data.replace(/\\n$/g, '');\r\n            let selection = this._grid.state.get('selection');\r\n            if (selection && selection.length > 0) {\r\n                let s = selection[0];\r\n                let rows = data.split('\\n');\r\n                for (let i=0; i<rows.length; i++) {\r\n                    let cols = rows[i].split('\\t');\r\n                    for (let j=0; j<cols.length; j++) {\r\n                        let pasteRow =  s.r + i;\r\n                        let pasteCol = s.c + j;\r\n                        if (this._grid.model.canEdit(pasteRow, pasteCol)) {\r\n                            this._grid.model.setDataAt(pasteRow, pasteCol, cols[j]);\r\n                            this._grid.view.updateCell(pasteRow, pasteCol);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}","export class ViewUpdaterExtension {\r\n\r\n    init (grid, config) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._config = config;\r\n\t}\r\n\r\n    dataFinishUpdate (e) {\r\n        let rowIndexCache = {};\r\n        let colIndexCache = {};\r\n        for (let i=0; i<e.updates.length; i++) {\r\n            let {rowId, field} = e.updates[i];\r\n            let rowIndex = null;\r\n            let colIndex = null;\r\n            if (rowIndexCache[rowId]) {\r\n                rowIndex = rowIndexCache[rowId];\r\n            } else {\r\n                rowIndex = this._grid.model.getRowIndex(rowId);\r\n                rowIndexCache[rowId] = rowIndex;                \r\n            }\r\n            if (colIndexCache[field]) {\r\n                colIndex = colIndexCache[field];\r\n            } else {\r\n                colIndex = this._grid.model.getColumnIndex(field);\r\n                colIndexCache[rowId] = colIndex;                \r\n            }            \r\n            this._grid.view.updateCell(rowIndex, colIndex);\r\n        }\r\n    }\r\n\r\n}","export class FormatterExtension {\r\n\r\n    init (grid, config) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._config = config;\r\n    }\r\n\r\n    render (e, model, formatter) {\r\n        if (formatter.render) {\r\n            let newEvent = Object.assign({}, e);\r\n            newEvent.colModel = model;\r\n            newEvent.grid = this._grid;\r\n            formatter.render(newEvent);\r\n            e.handled = true;\r\n        }\r\n    }\r\n\r\n    update (e, model, formatter) {\r\n        if (formatter.update) {\r\n            let newEvent = Object.assign({}, e);\r\n            newEvent.colModel = model;\r\n            newEvent.grid = this._grid;\r\n            formatter.update(newEvent);\r\n            e.handled = true;\r\n        }\r\n    }\r\n\r\n    cellRender (e) {\r\n        const model = this._grid.model.getColumnModel(e.colIndex);\r\n        if (model && model.formatter) {\r\n            if (Array.isArray(model.formatter)) {\r\n                for (let i=0; i<model.formatter.length; i++) {\r\n                    this.render(e, model, model.formatter[i]);\r\n                }\r\n            } else {\r\n                this.render(e, model, model.formatter);\r\n            }\r\n        }\r\n    }\r\n\r\n    cellUpdate (e) {\r\n        const model = this._grid.model.getColumnModel(e.colIndex);\r\n        if (model && model.formatter) {\r\n            if (Array.isArray(model.formatter)) {\r\n                for (let i=0; i<model.formatter.length; i++) {\r\n                    this.update(e, model, model.formatter[i]);\r\n                }\r\n            } else {\r\n                this.update(e, model, model.formatter);\r\n            }\r\n        }\r\n    }\r\n\r\n}","import { PGrid } from './grid/grid';\r\n\r\nwindow.PGrid = PGrid;\r\n\r\n// Polyfill - Element.scrollIntoViewIfNeeded\r\n\r\nif (!Element.prototype.scrollIntoViewIfNeeded) {\r\n    Element.prototype.scrollIntoViewIfNeeded = function (centerIfNeeded) {\r\n        \"use strict\";\r\n\r\n        function makeRange(start, length) {\r\n            return {\"start\": start, \"length\": length, \"end\": start + length};\r\n        }\r\n\r\n        function coverRange(inner, outer) {\r\n            if (\r\n                false === centerIfNeeded ||\r\n                (outer.start < inner.end && inner.start < outer.end)\r\n            ) {\r\n                return Math.max(\r\n                    inner.end - outer.length,\r\n                    Math.min(outer.start, inner.start)\r\n                );\r\n            }\r\n            return (inner.start + inner.end - outer.length) / 2;\r\n        }\r\n\r\n        function makePoint(x, y) {\r\n            return {\r\n                \"x\": x,\r\n                \"y\": y,\r\n                \"translate\": function translate(dX, dY) {\r\n                    return makePoint(x + dX, y + dY);\r\n                }\r\n            };\r\n        }\r\n\r\n        function absolute(elem, pt) {\r\n            while (elem) {\r\n                pt = pt.translate(elem.offsetLeft, elem.offsetTop);\r\n                elem = elem.offsetParent;\r\n            }\r\n            return pt;\r\n        }\r\n\r\n        var target = absolute(this, makePoint(0, 0)),\r\n            extent = makePoint(this.offsetWidth, this.offsetHeight),\r\n            elem = this.parentNode,\r\n            origin;\r\n\r\n        while (elem instanceof HTMLElement) {\r\n            // Apply desired scroll amount.\r\n            origin = absolute(elem, makePoint(elem.clientLeft, elem.clientTop));\r\n            elem.scrollLeft = coverRange(\r\n                makeRange(target.x - origin.x, extent.x),\r\n                makeRange(elem.scrollLeft, elem.clientWidth)\r\n            );\r\n            elem.scrollTop = coverRange(\r\n                makeRange(target.y - origin.y, extent.y),\r\n                makeRange(elem.scrollTop, elem.clientHeight)\r\n            );\r\n\r\n            // Determine actual scroll amount by reading back scroll properties.\r\n            target = target.translate(-elem.scrollLeft, -elem.scrollTop);\r\n            elem = elem.parentNode;\r\n        }\r\n    };\r\n}","import { View } from './view';\r\nimport { Model } from './model';\r\nimport { DataTable } from '../data/table';\r\nimport { Extension } from './extension';\r\nimport { State } from './state';\r\nimport { EventDispatcher } from './event';\r\nimport { Utils } from './utils';\r\n\r\nimport { SelectionExtension } from '../extensions/selection';\r\nimport { EditorExtension } from '../extensions/editor';\r\nimport { CopyPasteExtension } from '../extensions/copypaste';\r\nimport { ViewUpdaterExtension } from '../extensions/view-updater';\r\nimport { FormatterExtension } from '../extensions/formatter';\r\n\r\nexport class PGrid extends EventDispatcher {\r\n\r\n\tconstructor(config) {\r\n\t\tsuper();\r\n\r\n\t\t//Merge config with default config\r\n\t\tlet defaultConfig = {\r\n\t\t\trowCount: 0,\r\n\t\t\theaderRowCount: 1,\r\n\t\t\tfooterRowCount: 0,\r\n\t\t\tcolumnCount: 0,\r\n\t\t\trowHeight: 32,\r\n\t\t\tcolumnWidth: 100\r\n\t\t};\r\n\t\tthis._config = Utils.mixin(config, defaultConfig);\r\n\r\n\t\t//Extensions Store\r\n\t\tthis._extensions = new Extension(this, this._config);\r\n\r\n\t\tthis._data = new DataTable(this._config.dataModel, this._extensions);\r\n\t\tthis._model = new Model(this._config, this._data, this._extensions);\r\n\t\tthis._view = new View(this._model, this._extensions);\r\n\t\tthis._state = new State();\r\n\r\n\t\t//Load default extensions\r\n\t\tif (this._config.selection) {\r\n\t\t\tthis._extensions.loadExtension(new SelectionExtension());\r\n\t\t}\r\n\t\tif (this._config.editing) {\r\n\t\t\tthis._extensions.loadExtension(new EditorExtension());\r\n\t\t}\r\n\t\tif (this._config.copypaste) {\r\n\t\t\tthis._extensions.loadExtension(new CopyPasteExtension());\r\n\t\t}\r\n\t\tif (this._config.autoUpdate) {\r\n\t\t\tthis._extensions.loadExtension(new ViewUpdaterExtension());\r\n\t\t}\r\n\t\tif (this._config.columnFormatter) {\r\n\t\t\tthis._extensions.loadExtension(new FormatterExtension());\r\n\t\t}\r\n\r\n\t\t//Load initial external extensions\r\n\t\tif (this._config.extensions && this._config.extensions.length > 0) {\r\n\t\t\tthis._config.extensions.forEach((ext) => {\r\n\t\t\t\tthis._extensions.loadExtension(ext);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tget view() {\r\n\t\treturn this._view;\r\n\t}\r\n\r\n\tget model() {\r\n\t\treturn this._model;\r\n\t}\r\n\r\n\tget data() {\r\n\t\treturn this._data;\r\n\t}\r\n\r\n\tget extension() {\r\n\t\treturn this._extensions;\r\n\t}\r\n\r\n\tget state () {\r\n\t\treturn this._state;\r\n\t}\r\n\r\n\trender(element) {\r\n\t\tthis._view.render(element);\r\n\t}\r\n\r\n}"],"sourceRoot":""}