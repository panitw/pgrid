{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/grid/event.js","webpack:///./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","webpack:///./src/grid/view.js","webpack:///./src/grid/model.js","webpack:///./src/data/table.js","webpack:///./src/grid/extension.js","webpack:///./src/grid/state.js","webpack:///./src/extensions/selection.js","webpack:///./src/extensions/editor.js","webpack:///./src/extensions/copypaste.js","webpack:///./src/extensions/view-updater.js","webpack:///./src/extensions/formatter.js","webpack:///./src/main.js","webpack:///./src/grid/grid.js","webpack:///./src/grid/utils.js"],"names":["enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","EventDispatcher","this","_handlers","eventName","handler","push","index","indexOf","splice","length","eventArg","hasListener","listeners","i","MapShim","Map","getIndex","arr","result","some","entry","anonymous","__entries__","prototypeAccessors","size","configurable","set","delete","entries","has","clear","forEach","callback","ctx","list","defineProperties","isBrowser","window","document","global$1","global","Math","self","Function","requestAnimationFrame$1","requestAnimationFrame","setTimeout","Date","now","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","refresh","delay","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","throttle","addObserver","observer","connect_","removeObserver","observers","disconnect_","updateObservers_","activeObservers","filter","gatherActive","hasActive","broadcastActive","addEventListener","observe","attributes","childList","characterData","subtree","removeEventListener","disconnect","ref","propertyName","getInstance","instance_","defineConfigurable","target","props","keys","defineProperty","writable","getWindowOf","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","parseFloat","getBordersSize","styles","positions","len","arguments","reduce","position","getHTMLElementContentRect","clientWidth","clientHeight","getComputedStyle","paddings","getPaddings","horizPad","left","right","vertPad","top","bottom","width","height","boxSizing","round","documentElement","isDocumentElement","vertScrollbar","horizScrollbar","abs","isSVGGraphicsElement","SVGGraphicsElement","SVGElement","getBBox","getContentRect","bbox","getSVGContentRect","x","y","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","rect","broadcastRect","ResizeObserverEntry","rectInit","Constr","contentRect","DOMRectReadOnly","create","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","TypeError","callback_","controller_","callbackCtx_","Element","observations","unobserve","clearActive","this$1","observation","map","WeakMap","ResizeObserver","method","apply","model","extensions","super","_model","_extensions","_recycledCells","_cellReference","_template","element","_element","className","innerHTML","style","overflow","tabIndex","_contentPane","querySelector","_topLeftPane","_topLeftInner","_topPane","_topInner","_leftPane","_leftInner","_centerPane","_centerInner","_bottomPane","_bottomInner","_bottomLeftPane","_bottomLeftInner","_scrollWidth","_measureScrollbarWidth","_hScroll","_vScroll","_hScrollThumb","_vScrollThumb","_observeSize","_resturecture","_attachHandlers","executeExtension","grid","calcTotalSize","adjustScrollBar","scrollLeft","undefined","maxScrollY","scrollTop","rowIndex","colIndex","alignTop","cell","getCell","origScrollTop","parentElement","origScrollLeft","scrollIntoViewIfNeeded","setScrollY","setScrollX","createNewCell","leftFreezeSize","getLeftFreezeSize","topFreezeSize","getTopFreezeSize","bottomFreezeSize","getBottomFreezeSize","cellRect","_getCellRect","scrollX","getScrollX","scrollY","getScrollY","gridRect","getBoundingClientRect","_renderCells","cellContent","firstChild","data","getDataAt","arg","handledByExt","rowId","getRowId","field","getColumnField","hasExtension","handled","_vScrollHandler","e","dispatch","_hScrollHandler","_wheelHandler","currentX","currentY","deltaX","deltaY","_keyDownHandler","_updateScrollBar","_resizeObserver","totalWidth","getTotalWidth","totalHeight","getTotalHeight","determineScrollbarState","display","topRunner","leftRunner","cellWidth","cellHeight","getRowHeight","getColumnWidth","topFreeze","getTopFreezeRows","leftFreeze","getLeftFreezeRows","bottomFreeze","getBottomFreezeRows","rowCount","getRowCount","columnCount","getColumnCount","colWidth","paneScrollLeft","paneScrollTop","paneWidth","paneHeight","paneScrollLeft2","paneScrollTop2","paneWidth2","paneHeight2","offsetWidth","offsetHeight","j","rowHeight","_renderCell","cellX","cellY","pop","createElement","appendChild","dataset","title","removeChild","pane","_isCellVisible","_recycleCell","_createCell","cellClasses","getCellClasses","join","inner","outmost","outer","visibility","body","w1","w2","_detectIE","ua","navigator","userAgent","msie","parseInt","substring","rv","edge","config","extension","_config","_data","_extension","_columnModel","_rowModel","_headerRowModel","_cellModel","_headerCellModel","headerRows","columns","rows","cells","c","r","headerCells","rowModel","getRowModel","colModel","getColumnModel","cellModel","getCellModel","editable","dataRow","getRowData","canEdit","headerRowCount","columnWidth","isHeaderRow","dataRowIndex","freezePane","topFreezeRow","sum","_bottomFreezeSize","_totalWidth","_totalHeight","propName","columnModel","output","cssClass","unshift","isHeader","viewWidth","viewHeight","scrollbarSize","needH","needV","getRowDataAt","setDataAt","getRowIndex","_calcTotalWidth","_calcTotalHeight","_calcBottomFreezeSize","headerRowModelCount","rowModelCount","dataModel","_idRunner","_rid","_rowMap","_blockEvent","_processedEvent","_transformedRid","_searchQuery","_searchFields","_freezeCount","format","fields","_dataFormat","_fields","Array","isArray","addRow","row","beforeUpdateArg","changeType","prevData","cancel","blocked","updates","setData","rowData","count","insertRow","rid","inserted","_generateRowId","newObj","_createObject","search","slice","tIndex","removeRow","query","fieldMap","acc","val","queryRegex","q","RegExp","test","arrayValues","Extension","_grid","_extensionTable","cellRender","cellAfterRender","cellUpdate","cellAfterUpdate","cellEditableCheck","cellAfterRecycled","keyDown","gridAfterRender","dataBeforeRender","dataBeforeUpdate","dataAfterUpdate","dataFinishUpdate","ext","name","extPoint","Error","queryExtension","State","_state","SelectionExtension","_currentSelection","_selectionClass","selection","_mouseDownEventHandler","state","keyCode","view","_selectCell","scrollToCell","preventDefault","stopPropagation","classList","add","actualCell","contains","actualRow","actualCol","remove","getElement","focus","w","h","EditorExtension","_editorAttached","_scrollHandler","listen","_cellDblClickedHandler","_detachEditor","ctrlKey","_clearCell","_editCell","_editingRow","_editingCol","customEditor","getCascadedCellProp","done","_done","cellBound","scrollingElement","_editorContainer","attach","_attachEditor","_inputElement","type","select","_arrowKeyLocked","_keydownHandler","_blurHandler","activeElement","tagName","parentNode","_clickHandler","multiFields","goNext","prop","updateCell","selectionExtension","getExtension","selectCell","CopyPasteExtension","_globalClipboard","_srcSelection","_copy","clipboardData","_paste","getData","pasteEvent","copyEvent","s","cols","replace","split","pasteRow","pasteCol","srcRowId","srcField","srcSelection","destRowId","destField","destSelection","ViewUpdaterExtension","rowIndexCache","colIndexCache","getColumnIndex","FormatterExtension","formatter","render","newEvent","assign","update","PGrid","source","mixin","footerRowCount","_view","loadExtension","editing","copypaste","autoUpdate","columnFormatter","centerIfNeeded","makeRange","start","coverRange","end","max","min","makePoint","dX","dY","absolute","elem","pt","translate","offsetLeft","offsetTop","offsetParent","origin","extent","HTMLElement","clientLeft","clientTop"],"mappings":"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","file":"pgrid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export class EventDispatcher {\r\n\r\n\tconstructor() {\r\n\t\tthis._handlers = {};\r\n\t}\r\n\r\n\tlisten(eventName, handler) {\r\n\t\tif (!this._handlers[eventName]) {\r\n\t\t\tthis._handlers[eventName] = [];\r\n\t\t}\r\n\t\tthis._handlers[eventName].push(handler);\r\n\t}\r\n\r\n\tunlisten(eventName, handler) {\r\n\t\tif (this._handlers[eventName]) {\r\n\t\t\tlet index = this._handlers[eventName].indexOf(handler);\r\n\t\t\tif (index > -1) {\r\n\t\t\t\tthis._handlers[eventName].splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thasListener(eventName) {\r\n\t\treturn this._handlers[eventName] && this._handlers[eventName].length > 0;\r\n\t}\r\n\r\n\tdispatch(eventName, eventArg) {\r\n\t\tif (this.hasListener(eventName)) {\r\n\t\t\tlet listeners = this._handlers[eventName];\r\n\t\t\tfor (let i=0; i<listeners.length; i++) {\r\n\t\t\t\tlisteners[i](eventArg);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\n/* eslint-disable require-jsdoc, valid-jsdoc */\nvar MapShim = (function () {\n    if (typeof Map !== 'undefined') {\n        return Map;\n    }\n\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\n    function getIndex(arr, key) {\n        var result = -1;\n\n        arr.some(function (entry, index) {\n            if (entry[0] === key) {\n                result = index;\n\n                return true;\n            }\n\n            return false;\n        });\n\n        return result;\n    }\n\n    return (function () {\n        function anonymous() {\n            this.__entries__ = [];\n        }\n\n        var prototypeAccessors = { size: { configurable: true } };\n\n        /**\r\n         * @returns {boolean}\r\n         */\n        prototypeAccessors.size.get = function () {\n            return this.__entries__.length;\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\n        anonymous.prototype.get = function (key) {\n            var index = getIndex(this.__entries__, key);\n            var entry = this.__entries__[index];\n\n            return entry && entry[1];\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.set = function (key, value) {\n            var index = getIndex(this.__entries__, key);\n\n            if (~index) {\n                this.__entries__[index][1] = value;\n            } else {\n                this.__entries__.push([key, value]);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.delete = function (key) {\n            var entries = this.__entries__;\n            var index = getIndex(entries, key);\n\n            if (~index) {\n                entries.splice(index, 1);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.has = function (key) {\n            return !!~getIndex(this.__entries__, key);\n        };\n\n        /**\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.clear = function () {\n            this.__entries__.splice(0);\n        };\n\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.forEach = function (callback, ctx) {\n            var this$1 = this;\n            if ( ctx === void 0 ) ctx = null;\n\n            for (var i = 0, list = this$1.__entries__; i < list.length; i += 1) {\n                var entry = list[i];\n\n                callback.call(ctx, entry[1], entry[0]);\n            }\n        };\n\n        Object.defineProperties( anonymous.prototype, prototypeAccessors );\n\n        return anonymous;\n    }());\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\nvar global$1 = (function () {\n    if (typeof global !== 'undefined' && global.Math === Math) {\n        return global;\n    }\n\n    if (typeof self !== 'undefined' && self.Math === Math) {\n        return self;\n    }\n\n    if (typeof window !== 'undefined' && window.Math === Math) {\n        return window;\n    }\n\n    // eslint-disable-next-line no-new-func\n    return Function('return this')();\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\nvar requestAnimationFrame$1 = (function () {\n    if (typeof requestAnimationFrame === 'function') {\n        // It's required to use a bounded function because IE sometimes throws\n        // an \"Invalid calling object\" error if rAF is invoked without the global\n        // object on the left hand side.\n        return requestAnimationFrame.bind(global$1);\n    }\n\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\n})();\n\n// Defines minimum timeout before adding a trailing call.\nvar trailingTimeout = 2;\n\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\nvar throttle = function (callback, delay) {\n    var leadingCall = false,\n        trailingCall = false,\n        lastCallTime = 0;\n\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\n    function resolvePending() {\n        if (leadingCall) {\n            leadingCall = false;\n\n            callback();\n        }\n\n        if (trailingCall) {\n            proxy();\n        }\n    }\n\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\n    function timeoutCallback() {\n        requestAnimationFrame$1(resolvePending);\n    }\n\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\n    function proxy() {\n        var timeStamp = Date.now();\n\n        if (leadingCall) {\n            // Reject immediately following calls.\n            if (timeStamp - lastCallTime < trailingTimeout) {\n                return;\n            }\n\n            // Schedule new call to be in invoked when the pending one is resolved.\n            // This is important for \"transitions\" which never actually start\n            // immediately so there is a chance that we might miss one if change\n            // happens amids the pending invocation.\n            trailingCall = true;\n        } else {\n            leadingCall = true;\n            trailingCall = false;\n\n            setTimeout(timeoutCallback, delay);\n        }\n\n        lastCallTime = timeStamp;\n    }\n\n    return proxy;\n};\n\n// Minimum delay before invoking the update of observers.\nvar REFRESH_DELAY = 20;\n\n// A list of substrings of CSS properties used to find transition events that\n// might affect dimensions of observed elements.\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\n\n// Check if MutationObserver is available.\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\n\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\nvar ResizeObserverController = function() {\n    this.connected_ = false;\n    this.mutationEventsAdded_ = false;\n    this.mutationsObserver_ = null;\n    this.observers_ = [];\n\n    this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\n    this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\n};\n\n/**\r\n * Adds observer to observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be added.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Holds reference to the controller's instance.\r\n *\r\n * @private {ResizeObserverController}\r\n */\n\n\n/**\r\n * Keeps reference to the instance of MutationObserver.\r\n *\r\n * @private {MutationObserver}\r\n */\n\n/**\r\n * Indicates whether DOM listeners have been added.\r\n *\r\n * @private {boolean}\r\n */\nResizeObserverController.prototype.addObserver = function (observer) {\n    if (!~this.observers_.indexOf(observer)) {\n        this.observers_.push(observer);\n    }\n\n    // Add listeners if they haven't been added yet.\n    if (!this.connected_) {\n        this.connect_();\n    }\n};\n\n/**\r\n * Removes observer from observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.removeObserver = function (observer) {\n    var observers = this.observers_;\n    var index = observers.indexOf(observer);\n\n    // Remove observer if it's present in registry.\n    if (~index) {\n        observers.splice(index, 1);\n    }\n\n    // Remove listeners if controller has no connected observers.\n    if (!observers.length && this.connected_) {\n        this.disconnect_();\n    }\n};\n\n/**\r\n * Invokes the update of observers. It will continue running updates insofar\r\n * it detects changes.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.refresh = function () {\n    var changesDetected = this.updateObservers_();\n\n    // Continue running updates if changes have been detected as there might\n    // be future ones caused by CSS transitions.\n    if (changesDetected) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Updates every observer from observers list and notifies them of queued\r\n * entries.\r\n *\r\n * @private\r\n * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n *  dimensions of it's elements.\r\n */\nResizeObserverController.prototype.updateObservers_ = function () {\n    // Collect observers that have active observations.\n    var activeObservers = this.observers_.filter(function (observer) {\n        return observer.gatherActive(), observer.hasActive();\n    });\n\n    // Deliver notifications in a separate cycle in order to avoid any\n    // collisions between observers, e.g. when multiple instances of\n    // ResizeObserver are tracking the same element and the callback of one\n    // of them changes content dimensions of the observed target. Sometimes\n    // this may result in notifications being blocked for the rest of observers.\n    activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\n\n    return activeObservers.length > 0;\n};\n\n/**\r\n * Initializes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.connect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already added.\n    if (!isBrowser || this.connected_) {\n        return;\n    }\n\n    // Subscription to the \"Transitionend\" event is used as a workaround for\n    // delayed transitions. This way it's possible to capture at least the\n    // final state of an element.\n    document.addEventListener('transitionend', this.onTransitionEnd_);\n\n    window.addEventListener('resize', this.refresh);\n\n    if (mutationObserverSupported) {\n        this.mutationsObserver_ = new MutationObserver(this.refresh);\n\n        this.mutationsObserver_.observe(document, {\n            attributes: true,\n            childList: true,\n            characterData: true,\n            subtree: true\n        });\n    } else {\n        document.addEventListener('DOMSubtreeModified', this.refresh);\n\n        this.mutationEventsAdded_ = true;\n    }\n\n    this.connected_ = true;\n};\n\n/**\r\n * Removes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.disconnect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already removed.\n    if (!isBrowser || !this.connected_) {\n        return;\n    }\n\n    document.removeEventListener('transitionend', this.onTransitionEnd_);\n    window.removeEventListener('resize', this.refresh);\n\n    if (this.mutationsObserver_) {\n        this.mutationsObserver_.disconnect();\n    }\n\n    if (this.mutationEventsAdded_) {\n        document.removeEventListener('DOMSubtreeModified', this.refresh);\n    }\n\n    this.mutationsObserver_ = null;\n    this.mutationEventsAdded_ = false;\n    this.connected_ = false;\n};\n\n/**\r\n * \"Transitionend\" event handler.\r\n *\r\n * @private\r\n * @param {TransitionEvent} event\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.onTransitionEnd_ = function (ref) {\n        var propertyName = ref.propertyName; if ( propertyName === void 0 ) propertyName = '';\n\n    // Detect whether transition may affect dimensions of an element.\n    var isReflowProperty = transitionKeys.some(function (key) {\n        return !!~propertyName.indexOf(key);\n    });\n\n    if (isReflowProperty) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Returns instance of the ResizeObserverController.\r\n *\r\n * @returns {ResizeObserverController}\r\n */\nResizeObserverController.getInstance = function () {\n    if (!this.instance_) {\n        this.instance_ = new ResizeObserverController();\n    }\n\n    return this.instance_;\n};\n\nResizeObserverController.instance_ = null;\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\nvar defineConfigurable = (function (target, props) {\n    for (var i = 0, list = Object.keys(props); i < list.length; i += 1) {\n        var key = list[i];\n\n        Object.defineProperty(target, key, {\n            value: props[key],\n            enumerable: false,\n            writable: false,\n            configurable: true\n        });\n    }\n\n    return target;\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\nvar getWindowOf = (function (target) {\n    // Assume that the element is an instance of Node, which means that it\n    // has the \"ownerDocument\" property from which we can retrieve a\n    // corresponding global object.\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\n\n    // Return the local global object if it's not possible extract one from\n    // provided element.\n    return ownerGlobal || global$1;\n});\n\n// Placeholder of an empty content rectangle.\nvar emptyRect = createRectInit(0, 0, 0, 0);\n\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\nfunction toFloat(value) {\n    return parseFloat(value) || 0;\n}\n\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\nfunction getBordersSize(styles) {\n    var positions = [], len = arguments.length - 1;\n    while ( len-- > 0 ) positions[ len ] = arguments[ len + 1 ];\n\n    return positions.reduce(function (size, position) {\n        var value = styles['border-' + position + '-width'];\n\n        return size + toFloat(value);\n    }, 0);\n}\n\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\nfunction getPaddings(styles) {\n    var positions = ['top', 'right', 'bottom', 'left'];\n    var paddings = {};\n\n    for (var i = 0, list = positions; i < list.length; i += 1) {\n        var position = list[i];\n\n        var value = styles['padding-' + position];\n\n        paddings[position] = toFloat(value);\n    }\n\n    return paddings;\n}\n\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getSVGContentRect(target) {\n    var bbox = target.getBBox();\n\n    return createRectInit(0, 0, bbox.width, bbox.height);\n}\n\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\nfunction getHTMLElementContentRect(target) {\n    // Client width & height properties can't be\n    // used exclusively as they provide rounded values.\n    var clientWidth = target.clientWidth;\n    var clientHeight = target.clientHeight;\n\n    // By this condition we can catch all non-replaced inline, hidden and\n    // detached elements. Though elements with width & height properties less\n    // than 0.5 will be discarded as well.\n    //\n    // Without it we would need to implement separate methods for each of\n    // those cases and it's not possible to perform a precise and performance\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\n    // gives wrong results for elements with width & height less than 0.5.\n    if (!clientWidth && !clientHeight) {\n        return emptyRect;\n    }\n\n    var styles = getWindowOf(target).getComputedStyle(target);\n    var paddings = getPaddings(styles);\n    var horizPad = paddings.left + paddings.right;\n    var vertPad = paddings.top + paddings.bottom;\n\n    // Computed styles of width & height are being used because they are the\n    // only dimensions available to JS that contain non-rounded values. It could\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\n    var width = toFloat(styles.width),\n        height = toFloat(styles.height);\n\n    // Width & height include paddings and borders when the 'border-box' box\n    // model is applied (except for IE).\n    if (styles.boxSizing === 'border-box') {\n        // Following conditions are required to handle Internet Explorer which\n        // doesn't include paddings and borders to computed CSS dimensions.\n        //\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\n        // properties then it's either IE, and thus we don't need to subtract\n        // anything, or an element merely doesn't have paddings/borders styles.\n        if (Math.round(width + horizPad) !== clientWidth) {\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\n        }\n\n        if (Math.round(height + vertPad) !== clientHeight) {\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\n        }\n    }\n\n    // Following steps can't be applied to the document's root element as its\n    // client[Width/Height] properties represent viewport area of the window.\n    // Besides, it's as well not necessary as the <html> itself neither has\n    // rendered scroll bars nor it can be clipped.\n    if (!isDocumentElement(target)) {\n        // In some browsers (only in Firefox, actually) CSS width & height\n        // include scroll bars size which can be removed at this step as scroll\n        // bars are the only difference between rounded dimensions + paddings\n        // and \"client\" properties, though that is not always true in Chrome.\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\n\n        // Chrome has a rather weird rounding of \"client\" properties.\n        // E.g. for an element with content width of 314.2px it sometimes gives\n        // the client width of 315px and for the width of 314.7px it may give\n        // 314px. And it doesn't happen all the time. So just ignore this delta\n        // as a non-relevant.\n        if (Math.abs(vertScrollbar) !== 1) {\n            width -= vertScrollbar;\n        }\n\n        if (Math.abs(horizScrollbar) !== 1) {\n            height -= horizScrollbar;\n        }\n    }\n\n    return createRectInit(paddings.left, paddings.top, width, height);\n}\n\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nvar isSVGGraphicsElement = (function () {\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\n    // interface.\n    if (typeof SVGGraphicsElement !== 'undefined') {\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\n    }\n\n    // If it's so, then check that element is at least an instance of the\n    // SVGElement and that it has the \"getBBox\" method.\n    // eslint-disable-next-line no-extra-parens\n    return function (target) { return target instanceof getWindowOf(target).SVGElement && typeof target.getBBox === 'function'; };\n})();\n\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nfunction isDocumentElement(target) {\n    return target === getWindowOf(target).document.documentElement;\n}\n\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getContentRect(target) {\n    if (!isBrowser) {\n        return emptyRect;\n    }\n\n    if (isSVGGraphicsElement(target)) {\n        return getSVGContentRect(target);\n    }\n\n    return getHTMLElementContentRect(target);\n}\n\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\nfunction createReadOnlyRect(ref) {\n    var x = ref.x;\n    var y = ref.y;\n    var width = ref.width;\n    var height = ref.height;\n\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\n    var rect = Object.create(Constr.prototype);\n\n    // Rectangle's properties are not writable and non-enumerable.\n    defineConfigurable(rect, {\n        x: x, y: y, width: width, height: height,\n        top: y,\n        right: x + width,\n        bottom: height + y,\n        left: x\n    });\n\n    return rect;\n}\n\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\nfunction createRectInit(x, y, width, height) {\n    return { x: x, y: y, width: width, height: height };\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\nvar ResizeObservation = function(target) {\n    this.broadcastWidth = 0;\n    this.broadcastHeight = 0;\n    this.contentRect_ = createRectInit(0, 0, 0, 0);\n\n    this.target = target;\n};\n\n/**\r\n * Updates content rectangle and tells whether it's width or height properties\r\n * have changed since the last broadcast.\r\n *\r\n * @returns {boolean}\r\n */\n\n\n/**\r\n * Reference to the last observed content rectangle.\r\n *\r\n * @private {DOMRectInit}\r\n */\n\n\n/**\r\n * Broadcasted width of content rectangle.\r\n *\r\n * @type {number}\r\n */\nResizeObservation.prototype.isActive = function () {\n    var rect = getContentRect(this.target);\n\n    this.contentRect_ = rect;\n\n    return rect.width !== this.broadcastWidth || rect.height !== this.broadcastHeight;\n};\n\n/**\r\n * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n * from the corresponding properties of the last observed content rectangle.\r\n *\r\n * @returns {DOMRectInit} Last observed content rectangle.\r\n */\nResizeObservation.prototype.broadcastRect = function () {\n    var rect = this.contentRect_;\n\n    this.broadcastWidth = rect.width;\n    this.broadcastHeight = rect.height;\n\n    return rect;\n};\n\nvar ResizeObserverEntry = function(target, rectInit) {\n    var contentRect = createReadOnlyRect(rectInit);\n\n    // According to the specification following properties are not writable\n    // and are also not enumerable in the native implementation.\n    //\n    // Property accessors are not being used as they'd require to define a\n    // private WeakMap storage which may cause memory leaks in browsers that\n    // don't support this type of collections.\n    defineConfigurable(this, { target: target, contentRect: contentRect });\n};\n\nvar ResizeObserverSPI = function(callback, controller, callbackCtx) {\n    this.activeObservations_ = [];\n    this.observations_ = new MapShim();\n\n    if (typeof callback !== 'function') {\n        throw new TypeError('The callback provided as parameter 1 is not a function.');\n    }\n\n    this.callback_ = callback;\n    this.controller_ = controller;\n    this.callbackCtx_ = callbackCtx;\n};\n\n/**\r\n * Starts observing provided element.\r\n *\r\n * @param {Element} target - Element to be observed.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Registry of the ResizeObservation instances.\r\n *\r\n * @private {Map<Element, ResizeObservation>}\r\n */\n\n\n/**\r\n * Public ResizeObserver instance which will be passed to the callback\r\n * function and used as a value of it's \"this\" binding.\r\n *\r\n * @private {ResizeObserver}\r\n */\n\n/**\r\n * Collection of resize observations that have detected changes in dimensions\r\n * of elements.\r\n *\r\n * @private {Array<ResizeObservation>}\r\n */\nResizeObserverSPI.prototype.observe = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is already being observed.\n    if (observations.has(target)) {\n        return;\n    }\n\n    observations.set(target, new ResizeObservation(target));\n\n    this.controller_.addObserver(this);\n\n    // Force the update of observations.\n    this.controller_.refresh();\n};\n\n/**\r\n * Stops observing provided element.\r\n *\r\n * @param {Element} target - Element to stop observing.\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.unobserve = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is not being observed.\n    if (!observations.has(target)) {\n        return;\n    }\n\n    observations.delete(target);\n\n    if (!observations.size) {\n        this.controller_.removeObserver(this);\n    }\n};\n\n/**\r\n * Stops observing all elements.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.disconnect = function () {\n    this.clearActive();\n    this.observations_.clear();\n    this.controller_.removeObserver(this);\n};\n\n/**\r\n * Collects observation instances the associated element of which has changed\r\n * it's content rectangle.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.gatherActive = function () {\n        var this$1 = this;\n\n    this.clearActive();\n\n    this.observations_.forEach(function (observation) {\n        if (observation.isActive()) {\n            this$1.activeObservations_.push(observation);\n        }\n    });\n};\n\n/**\r\n * Invokes initial callback function with a list of ResizeObserverEntry\r\n * instances collected from active resize observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.broadcastActive = function () {\n    // Do nothing if observer doesn't have active observations.\n    if (!this.hasActive()) {\n        return;\n    }\n\n    var ctx = this.callbackCtx_;\n\n    // Create ResizeObserverEntry instance for every active observation.\n    var entries = this.activeObservations_.map(function (observation) {\n        return new ResizeObserverEntry(observation.target, observation.broadcastRect());\n    });\n\n    this.callback_.call(ctx, entries, ctx);\n    this.clearActive();\n};\n\n/**\r\n * Clears the collection of active observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.clearActive = function () {\n    this.activeObservations_.splice(0);\n};\n\n/**\r\n * Tells whether observer has active observations.\r\n *\r\n * @returns {boolean}\r\n */\nResizeObserverSPI.prototype.hasActive = function () {\n    return this.activeObservations_.length > 0;\n};\n\n// Registry of internal observers. If WeakMap is not available use current shim\n// for the Map collection as it has all required methods and because WeakMap\n// can't be fully polyfilled anyway.\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\n\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\nvar ResizeObserver = function(callback) {\n    if (!(this instanceof ResizeObserver)) {\n        throw new TypeError('Cannot call a class as a function.');\n    }\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    var controller = ResizeObserverController.getInstance();\n    var observer = new ResizeObserverSPI(callback, controller, this);\n\n    observers.set(this, observer);\n};\n\n// Expose public methods of ResizeObserver.\n['observe', 'unobserve', 'disconnect'].forEach(function (method) {\n    ResizeObserver.prototype[method] = function () {\n        return (ref = observers.get(this))[method].apply(ref, arguments);\n        var ref;\n    };\n});\n\nvar index = (function () {\n    // Export existing implementation if available.\n    if (typeof global$1.ResizeObserver !== 'undefined') {\n        return global$1.ResizeObserver;\n    }\n\n    return ResizeObserver;\n})();\n\nexport default index;\n","import { EventDispatcher } from './event';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\nexport class View extends EventDispatcher {\r\n\r\n\tconstructor (model, extensions) {\r\n\t\tsuper();\r\n\t\tthis._model = model;\r\n        this._extensions = extensions;\r\n        this._recycledCells = [];\r\n        this._cellReference = {};\r\n\t\tthis._template = \t'<div class=\"pgrid-content-pane\" style=\"position: relative;\">' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-top-left-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-top-left-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-top-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-top-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-left-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-left-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-center-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-center-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-bottom-left-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-bottom-left-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-bottom-pane\" style=\"position: absolute;\">' +\r\n\t\t\t\t\t\t\t'\t\t<div class=\"pgrid-bottom-inner\" style=\"width: 100%; height: 100%; overflow: hidden; position: relative;\"></div>' +\r\n\t\t\t\t\t\t\t'\t</div>' +\r\n\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t'<div class=\"pgrid-hscroll\" style=\"position: absolute; bottom: 0px; overflow-y: hidden; overflow-x: scroll;\">' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-hscroll-thumb\"></div>' +\r\n\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t'<div class=\"pgrid-vscroll\" style=\"position: absolute; right: 0px; top: 0px; overflow-y: scroll; overflow-x: hidden;\">' +\r\n\t\t\t\t\t\t\t'\t<div class=\"pgrid-vscroll-thumb\"></div>' +\r\n\t\t\t\t\t\t\t'</div>';\r\n\t}\r\n\r\n\trender (element) {\r\n\t\tthis._element = element;\r\n\t\tthis._element.className = 'pgrid';\r\n\t\tthis._element.innerHTML = this._template;\r\n\t\tthis._element.style.position = 'relative';\r\n\t\tthis._element.style.overflow = 'hidden';\r\n\t\tthis._element.tabIndex = 1;\r\n\r\n\t\tthis._contentPane = this._element.querySelector('.pgrid-content-pane');\r\n\t\tthis._topLeftPane = this._element.querySelector('.pgrid-top-left-pane');\r\n\t\tthis._topLeftInner = this._element.querySelector('.pgrid-top-left-inner');\r\n\t\tthis._topPane = this._element.querySelector('.pgrid-top-pane');\r\n\t\tthis._topInner = this._element.querySelector('.pgrid-top-inner');\r\n\t\tthis._leftPane = this._element.querySelector('.pgrid-left-pane');\r\n\t\tthis._leftInner = this._element.querySelector('.pgrid-left-inner');\r\n\t\tthis._centerPane = this._element.querySelector('.pgrid-center-pane');\r\n\t\tthis._centerInner = this._element.querySelector('.pgrid-center-inner');\r\n\t\tthis._bottomPane = this._element.querySelector('.pgrid-bottom-pane');\r\n\t\tthis._bottomInner = this._element.querySelector('.pgrid-bottom-inner');\r\n\t\tthis._bottomLeftPane = this._element.querySelector('.pgrid-bottom-left-pane');\r\n\t\tthis._bottomLeftInner = this._element.querySelector('.pgrid-bottom-left-inner');\r\n\r\n\t\tthis._scrollWidth = this._measureScrollbarWidth();\r\n\r\n\t\tthis._hScroll = this._element.querySelector('.pgrid-hscroll');\r\n\t\tthis._vScroll = this._element.querySelector('.pgrid-vscroll');\r\n\t\tthis._hScrollThumb = this._element.querySelector('.pgrid-hscroll-thumb');\r\n\t\tthis._vScrollThumb = this._element.querySelector('.pgrid-vscroll-thumb');\r\n\t\tthis._hScroll.style.height = this._scrollWidth + 'px';\r\n\t\tthis._vScroll.style.width = this._scrollWidth + 'px';\r\n\t\tthis._hScrollThumb.style.height = this._scrollWidth + 'px';\r\n\t\tthis._vScrollThumb.style.width = this._scrollWidth + 'px';\r\n\r\n\t\tthis._observeSize();\r\n\t\tthis._resturecture();\r\n\t\tthis._attachHandlers();\r\n\r\n\t\tthis._extensions.executeExtension('gridAfterRender', {\r\n\t\t\tgrid: this\r\n\t\t});\r\n\t}\r\n\r\n\treRender () {\r\n\t\tthis._topLeftInner.innerHTML = '';\r\n\t\tthis._topInner.innerHTML = '';\r\n\t\tthis._leftInner.innerHTML = '';\r\n\t\tthis._centerInner.innerHTML = '';\r\n\t\tthis._bottomLeftInner.innerHTML = '';\r\n        this._bottomInner.innerHTML = '';\r\n        this._cellReference = [];\r\n\r\n        this._model.calcTotalSize();\r\n\t\tthis._resturecture();\r\n\t}\r\n\r\n\tgetElement () {\r\n\t\treturn this._element;\r\n\t}\r\n\r\n\tsetScrollX (x, adjustScrollBar) {\r\n\t\tthis._topPane.scrollLeft = x;\r\n\t\tthis._centerPane.scrollLeft = x;\r\n\t\tthis._bottomPane.scrollLeft = x;\r\n\t\tif (adjustScrollBar || adjustScrollBar === undefined) {\r\n\t\t\tthis._hScroll.scrollLeft = x;\r\n\t\t}\r\n\t}\r\n\r\n\tgetScrollX () {\r\n\t\treturn this._centerPane.scrollLeft;\r\n\t}\r\n\r\n\tsetScrollY (y, adjustScrollBar) {\r\n        let maxScrollY = this._leftInner.clientHeight - this._leftPane.clientHeight;\r\n        if (y > maxScrollY) {\r\n            y = maxScrollY;\r\n        }\r\n\t\tthis._centerPane.scrollTop = y;\r\n\t\tthis._leftPane.scrollTop = y;\r\n\t\tif (adjustScrollBar || adjustScrollBar === undefined) {\r\n\t\t\tthis._vScroll.scrollTop = y;\r\n\t\t}\r\n\t}\r\n\r\n\tgetScrollY () {\r\n\t\treturn this._centerPane.scrollTop;\r\n\t}\r\n\r\n\tscrollToCell (rowIndex, colIndex, alignTop) {\r\n\t\tlet cell = this.getCell(rowIndex, colIndex);\r\n\t\tlet origScrollTop = cell.parentElement.parentElement.scrollTop;\r\n\t\tlet origScrollLeft = cell.parentElement.parentElement.scrollLeft;\r\n\r\n\t\tcell.scrollIntoViewIfNeeded(false);\r\n\r\n\t\tif (origScrollTop !== cell.parentElement.parentElement.scrollTop) {\r\n\t\t\tthis.setScrollY(cell.parentElement.parentElement.scrollTop, true);\r\n\t\t}\r\n\t\tif (origScrollLeft !== cell.parentElement.parentElement.scrollLeft) {\r\n\t\t\tthis.setScrollX(cell.parentElement.parentElement.scrollLeft, true);\r\n\t\t}\r\n\t}\r\n\r\n\tgetCell (rowIndex, colIndex, createNewCell) {\r\n        let cell = this._element.querySelector('[data-row-index=\"'+rowIndex+'\"][data-col-index=\"'+colIndex+'\"]');\r\n        if (cell) {\r\n            return cell;\r\n        } else\r\n        if (createNewCell === false) {\r\n            return null;\r\n        } else {\r\n            let leftFreezeSize = this._model.getLeftFreezeSize();\r\n            let topFreezeSize = this._model.getTopFreezeSize();\r\n            let bottomFreezeSize = this._model.getBottomFreezeSize();\r\n            let cellRect = this._getCellRect(rowIndex, colIndex);\r\n            let scrollX = this.getScrollX();\r\n            let scrollY = this.getScrollY();\r\n            let gridRect = this._element.getBoundingClientRect();\r\n            if (cellRect.x > leftFreezeSize) {\r\n                if (cellRect.x < (scrollX + leftFreezeSize)) {\r\n                    this.setScrollX(cellRect.x - leftFreezeSize);\r\n                } else\r\n                if (scrollX + gridRect.width < cellRect.x + cellRect.width) {\r\n                    this.setScrollX((cellRect.x + cellRect.width) - gridRect.width);\r\n                }\r\n            }\r\n            if (cellRect.y < (scrollY + topFreezeSize)) {\r\n                this.setScrollY(cellRect.y);\r\n            } else\r\n            if ((scrollY + gridRect.height) - bottomFreezeSize < cellRect.y + cellRect.height) {\r\n                this.setScrollY((cellRect.y + cellRect.height) - gridRect.height);\r\n            }\r\n            this._renderCells();\r\n            return this._element.querySelector('[data-row-index=\"'+rowIndex+'\"][data-col-index=\"'+colIndex+'\"]');\r\n        }\r\n\t}\r\n\r\n\tupdateCell (rowIndex, colIndex) {\r\n        //Ignore updating cell that's outside of the viewport\r\n\t\tlet cell = this.getCell(rowIndex, colIndex, false);\r\n\t\tif (cell) {\r\n\t\t\t//Create cell content wrapper if not any\r\n\t\t\tlet cellContent = cell.firstChild;\r\n\r\n\t\t\t//Get data to be updated\r\n\t\t\tlet data = this._model.getDataAt(rowIndex, colIndex);\r\n\r\n\t\t\t//Data can be transformed before rendering using dataBeforeRender extension\r\n\t\t\tlet arg = {data: data};\r\n\t\t\tthis._extensions.executeExtension('dataBeforeRender', arg);\r\n\t\t\tdata = arg.data;\r\n\r\n\t\t\t//If there's cellUpdate extension, then execute it to update the cell data\r\n\t\t\t//Else use default way to put the data directly to the cell content\r\n            let handledByExt = false;\r\n            let rowId = this._model.getRowId(rowIndex);\r\n            let field = this._model.getColumnField(colIndex);\r\n\t\t\tif (this._extensions.hasExtension('cellUpdate')) {\r\n\t\t\t\targ = {\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tcell,\r\n\t\t\t\t\tcellContent,\r\n\t\t\t\t\trowIndex,\r\n\t\t\t\t\tcolIndex,\r\n\t\t\t\t\trowId,\r\n\t\t\t\t\tfield,\r\n\t\t\t\t\thandled: false\r\n\t\t\t\t}\r\n\t\t\t\tthis._extensions.executeExtension('cellUpdate', arg);\r\n\t\t\t\thandledByExt = arg.handled;\r\n\t\t\t}\r\n\r\n\t\t\tif (!handledByExt) {\r\n\t\t\t\tif (data !== undefined && data !== null) {\r\n\t\t\t\t\tcellContent.innerHTML = data;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcellContent.innerHTML = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._extensions.executeExtension('cellAfterUpdate', {\r\n                data,\r\n                cell,\r\n                cellContent,\r\n                rowIndex,\r\n                colIndex,\r\n                rowId,\r\n                field,\r\n            });\r\n\t\t}\r\n\t}\r\n\r\n\t_attachHandlers () {\r\n\r\n\t\tthis._vScrollHandler = (e) => {\r\n            this.setScrollY(e.target.scrollTop, false);\r\n            this._renderCells();\r\n\t\t\tthis.dispatch('vscroll', e);\r\n\t\t};\r\n\r\n\t\tthis._hScrollHandler = (e) => {\r\n\t\t\tthis.setScrollX(e.target.scrollLeft, false);\r\n            this._renderCells();\r\n\t\t\tthis.dispatch('hscroll', e);\r\n\t\t};\r\n\r\n\t\tthis._wheelHandler = (e) => {\r\n\t\t\tlet currentX = this.getScrollX();\r\n\t\t\tlet currentY = this.getScrollY();\r\n\t\t\tthis.setScrollX(currentX + e.deltaX);\r\n\t\t\tthis.setScrollY(currentY + e.deltaY);\r\n            this._renderCells();\r\n\t\t\tif (e.deltaX !== 0) {\r\n\t\t\t\tthis.dispatch('hscroll', e);\r\n\t\t\t}\r\n\t\t\tif (e.deltaY !== 0) {\r\n\t\t\t\tthis.dispatch('vscroll', e);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis._keyDownHandler = (e) => {\r\n\t\t\tthis._extensions.executeExtension('keyDown', e);\r\n\t\t};\r\n\r\n\t\tthis._vScroll.addEventListener('scroll', this._vScrollHandler);\r\n\t\tthis._hScroll.addEventListener('scroll', this._hScrollHandler);\r\n\t\tthis._contentPane.addEventListener('wheel', this._wheelHandler);\r\n\t\tthis._element.addEventListener('keydown', this._keyDownHandler);\r\n\r\n\t}\r\n\r\n\t_resturecture () {\r\n\t\tthis._contentPane.style.width = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\tthis._contentPane.style.height = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\r\n\t\tlet topFreezeSize = this._model.getTopFreezeSize();\r\n\t\tlet bottomFreezeSize = this._model.getBottomFreezeSize();\r\n\t\tlet leftFreezeSize = this._model.getLeftFreezeSize();\r\n\r\n\t\tthis._topLeftPane.style.left = '0px';\r\n\t\tthis._topLeftPane.style.top = '0px';\r\n\t\tthis._topLeftPane.style.width = leftFreezeSize + 'px';\r\n\t\tthis._topLeftPane.style.height = topFreezeSize + 'px';\r\n\t\tthis._topPane.style.left = leftFreezeSize + 'px';\r\n\t\tthis._topPane.style.top = '0px';\r\n\t\tthis._topPane.style.width = 'calc(100% - ' + leftFreezeSize + 'px)';\r\n\t\tthis._topPane.style.height = topFreezeSize + 'px';\r\n\t\tthis._leftPane.style.left = '0px';\r\n\t\tthis._leftPane.style.top = topFreezeSize + 'px';\r\n\t\tthis._leftPane.style.width = leftFreezeSize + 'px';\r\n\t\tthis._leftPane.style.height = 'calc(100% - ' + (topFreezeSize + bottomFreezeSize) + 'px)';\r\n\t\tthis._centerPane.style.left = leftFreezeSize + 'px';\r\n\t\tthis._centerPane.style.top = topFreezeSize + 'px';\r\n\t\tthis._centerPane.style.width = 'calc(100% - ' + leftFreezeSize + 'px)';\r\n\t\tthis._centerPane.style.height = 'calc(100% - ' + (topFreezeSize + bottomFreezeSize) + 'px)';\r\n\t\tthis._bottomLeftPane.style.left = '0px';\r\n\t\tthis._bottomLeftPane.style.bottom = '0px';\r\n\t\tthis._bottomLeftPane.style.width = leftFreezeSize + 'px';\r\n\t\tthis._bottomLeftPane.style.height = bottomFreezeSize + 'px';\r\n\t\tthis._bottomPane.style.left = leftFreezeSize + 'px';\r\n\t\tthis._bottomPane.style.bottom = '0px';\r\n\t\tthis._bottomPane.style.width = 'calc(100% - ' + leftFreezeSize + 'px)';\r\n\t\tthis._bottomPane.style.height = bottomFreezeSize + 'px';\r\n\r\n\t\tthis._renderCells();\r\n\t\tthis._updateScrollBar();\r\n\t}\r\n\r\n\t_observeSize () {\r\n\t\tthis._resizeObserver = new ResizeObserver((entries, observer) => {\r\n\t\t\tthis._updateScrollBar();\r\n\t\t});\r\n\t\tthis._resizeObserver.observe(this._element);\r\n\t}\r\n\r\n\t_updateScrollBar () {\r\n\t\tlet totalWidth = this._model.getTotalWidth();\r\n\t\tlet totalHeight = this._model.getTotalHeight();\r\n\t\tthis._hScrollThumb.style.width = totalWidth + 'px';\r\n\t\tthis._vScrollThumb.style.height = totalHeight + 'px';\r\n\r\n\t\tlet gridRect = this._element.getBoundingClientRect();\r\n\t\tlet scrollBarState = this._model.determineScrollbarState(gridRect.width, gridRect.height, this._scrollWidth);\r\n\r\n\t\tswitch (scrollBarState) {\r\n\t\t\tcase 'n':\r\n\t\t\t\tthis._hScroll.style.display = 'none';\r\n\t\t\t\tthis._vScroll.style.display = 'none';\r\n\t\t\t\tthis._contentPane.style.width = '100%';\r\n\t\t\t\tthis._contentPane.style.height = '100%';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'h':\r\n\t\t\t\tthis._hScroll.style.display = 'block';\r\n\t\t\t\tthis._vScroll.style.display = 'none';\r\n\t\t\t\tthis._hScroll.style.width = '100%';\r\n\t\t\t\tthis._contentPane.style.width = '100%';\r\n\t\t\t\tthis._contentPane.style.height = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'v':\r\n\t\t\t\tthis._hScroll.style.display = 'none';\r\n\t\t\t\tthis._vScroll.style.display = 'block';\r\n\t\t\t\tthis._vScroll.style.height = '100%';\r\n\t\t\t\tthis._contentPane.style.width = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tthis._contentPane.style.height = '100%';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'b':\r\n\t\t\t\tthis._hScroll.style.display = 'block';\r\n\t\t\t\tthis._vScroll.style.display = 'block';\r\n\t\t\t\tthis._hScroll.style.width = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tthis._vScroll.style.height = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tthis._contentPane.style.width = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tthis._contentPane.style.height = 'calc(100% - ' + this._scrollWidth + 'px)';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n    }\r\n\r\n    _getCellRect (rowIndex, colIndex) {\r\n\t\tlet topRunner = 0;\r\n        let leftRunner = 0;\r\n        let cellWidth = 0;\r\n        let cellHeight = 0;\r\n        for (let i=0; i<rowIndex; i++) {\r\n            cellHeight = this._model.getRowHeight(i)\r\n            topRunner += cellHeight;\r\n        }\r\n        for (let i=0; i<colIndex; i++) {\r\n            cellWidth = this._model.getColumnWidth(i);\r\n            leftRunner += cellWidth;\r\n        }\r\n        return {x: leftRunner, y: topRunner, width: cellWidth, height: cellHeight};\r\n    }\r\n\r\n\t_renderCells () {\r\n\t\tlet topFreeze = this._model.getTopFreezeRows();\r\n\t\tlet leftFreeze = this._model.getLeftFreezeRows();\r\n\t\tlet bottomFreeze = this._model.getBottomFreezeRows();\r\n\t\tlet rowCount = this._model.getRowCount();\r\n\t\tlet columnCount = this._model.getColumnCount();\r\n\t\tlet topRunner = 0;\r\n\t\tlet leftRunner = 0;\r\n\t\tlet colWidth = [];\r\n        let paneScrollLeft = 0;\r\n        let paneScrollTop = 0;\r\n        let paneWidth = 0;\r\n        let paneHeight = 0;\r\n        let paneScrollLeft2 = 0;\r\n        let paneScrollTop2 = 0;\r\n        let paneWidth2 = 0;\r\n        let paneHeight2 = 0;\r\n\r\n\t\t//Render top rows\r\n        paneScrollLeft = this._topLeftPane.scrollLeft;\r\n        paneScrollTop = this._topLeftPane.scrollTop;\r\n        paneWidth = this._topLeftPane.offsetWidth;\r\n        paneHeight = this._topLeftPane.offsetHeight;\r\n        paneScrollLeft2 = this._topPane.scrollLeft;\r\n        paneScrollTop2 = this._topPane.scrollTop;\r\n        paneWidth2 = this._topPane.offsetWidth;\r\n        paneHeight2 = this._topPane.offsetHeight;\r\n        topRunner = 0;\r\n\t\tfor (let j=0; j<topFreeze; j++) {\r\n\t\t\tlet rowHeight = this._model.getRowHeight(j);\r\n\t\t\t//Render top left cells\r\n            leftRunner = 0;\r\n\t\t\tfor (let i=0; i<leftFreeze; i++) {\r\n\t\t\t\tcolWidth[i] = this._model.getColumnWidth(i);\r\n                this._renderCell(j, i, this._topLeftInner, paneWidth, paneHeight, paneScrollLeft, paneScrollTop, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n            }\r\n\r\n\t\t\t//Render top cells\r\n\t\t\tleftRunner = 0;\r\n\t\t\tfor (let i=leftFreeze; i<columnCount; i++) {\r\n\t\t\t\tcolWidth[i] = this._model.getColumnWidth(i);\r\n\t\t\t\tthis._renderCell(j, i, this._topInner, paneWidth2, paneHeight2, paneScrollLeft2, paneScrollTop2, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n\t\t\t}\r\n\t\t\ttopRunner += rowHeight;\r\n        }\r\n        this._topInner.style.width = leftRunner + 'px';\r\n        this._topInner.style.height = topRunner + 'px';\r\n\r\n\t\t//Render middle rows\r\n        paneScrollLeft = this._leftPane.scrollLeft;\r\n        paneScrollTop = this._leftPane.scrollTop;\r\n        paneWidth = this._leftPane.offsetWidth;\r\n        paneHeight = this._leftPane.offsetHeight;\r\n        paneScrollLeft2 = this._centerPane.scrollLeft;\r\n        paneScrollTop2 = this._centerPane.scrollTop;\r\n        paneWidth2 = this._centerPane.offsetWidth;\r\n        paneHeight2 = this._centerPane.offsetHeight;\r\n        topRunner = 0;\r\n\t\tfor (let j=topFreeze; j<(rowCount-bottomFreeze); j++) {\r\n\t\t\tlet rowHeight = this._model.getRowHeight(j);\r\n\t\t\t//Render left cells\r\n\t\t\tleftRunner = 0;\r\n\t\t\tfor (let i=0; i<leftFreeze; i++) {\r\n\t\t\t\tthis._renderCell(j, i, this._leftInner, paneWidth, paneHeight, paneScrollLeft, paneScrollTop, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n\t\t\t}\r\n\t\t\t//Render center cells\r\n\t\t\tleftRunner = 0;\r\n\t\t\tfor (let i=leftFreeze; i<columnCount; i++) {\r\n\t\t\t\tthis._renderCell(j, i, this._centerInner, paneWidth2, paneHeight2, paneScrollLeft2, paneScrollTop2, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n\t\t\t}\r\n\t\t\ttopRunner += rowHeight;\r\n\t\t}\r\n        this._leftInner.style.height = topRunner + 'px';\r\n        this._centerInner.style.width = leftRunner + 'px';\r\n        this._centerInner.style.height = topRunner + 'px';\r\n\r\n\t\t//Render bottom rows\r\n        paneScrollLeft = this._bottomLeftPane.scrollLeft;\r\n        paneScrollTop = this._bottomLeftPane.scrollTop;\r\n        paneWidth = this._bottomLeftPane.offsetWidth;\r\n        paneHeight = this._bottomLeftPane.offsetHeight;\r\n        paneScrollLeft2 = this._bottomPane.scrollLeft;\r\n        paneScrollTop2 = this._bottomPane.scrollTop;\r\n        paneWidth2 = this._bottomPane.offsetWidth;\r\n        paneHeight2 = this._bottomPane.offsetHeight;\r\n        topRunner = 0;\r\n\t\tfor (let j=(rowCount-bottomFreeze); j<rowCount; j++) {\r\n\t\t\tlet rowHeight = this._model.getRowHeight(j);\r\n\t\t\t//Render left cells\r\n\t\t\tleftRunner = 0;\r\n\t\t\tfor (let i=0; i<leftFreeze; i++) {\r\n\t\t\t\tthis._renderCell(j, i, this._bottomLeftInner, paneWidth, paneHeight, paneScrollLeft, paneScrollTop, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n\t\t\t}\r\n\t\t\t//Render center cells\r\n\t\t\tleftRunner = 0;\r\n\t\t\tfor (let i=leftFreeze; i<columnCount; i++) {\r\n\t\t\t\tthis._renderCell(j, i, this._bottomInner, paneWidth2, paneHeight2, paneScrollLeft2, paneScrollTop2, leftRunner, topRunner, colWidth[i], rowHeight);\r\n\t\t\t\tleftRunner += colWidth[i];\r\n\t\t\t}\r\n\t\t\ttopRunner += rowHeight;\r\n\t\t}\r\n        this._bottomInner.style.width = leftRunner + 'px';\r\n        this._bottomInner.style.height = topRunner + 'px';\r\n    }\r\n\r\n    _isCellVisible (paneWidth, paneHeight, paneScrollLeft, paneScrollTop, cellX, cellY, cellWidth, cellHeight) {\r\n        if (cellX + cellWidth < paneScrollLeft ||\r\n            cellY + cellHeight < paneScrollTop ||\r\n            cellX > paneScrollLeft + paneWidth ||\r\n            cellY > paneScrollTop + paneHeight) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    _createCell (rowIndex, colIndex, x, y, width, height) {\r\n        let cell = null;\r\n        let key = rowIndex + ',' + colIndex;\r\n        if (this._recycledCells.length > 0) {\r\n            cell = this._recycledCells.pop();\r\n            cell.style.display = 'block';\r\n        } else {\r\n            cell = document.createElement('div');\r\n        }\r\n        if (!cell.firstChild) {\r\n            let cellContent = document.createElement('div');\r\n            cellContent.className = 'pgrid-cell-content';\r\n            cell.appendChild(cellContent);\r\n        }\r\n\t\tcell.style.left = x + 'px';\r\n\t\tcell.style.top = y + 'px';\r\n\t\tcell.style.width = width + 'px';\r\n\t\tcell.style.height = height + 'px';\r\n        cell.dataset.rowIndex = rowIndex;\r\n        cell.dataset.colIndex = colIndex;\r\n        cell.dataset.key = key;\r\n\r\n        this._cellReference[key] = cell;\r\n        return cell;\r\n    }\r\n\r\n    _recycleCell (cell) {\r\n        //Clear cell reference cache\r\n        this._cellReference[cell.dataset.key] = null;\r\n\r\n        //Clear cell content\r\n        cell.title = '';\r\n        let cellContent = cell.firstChild;\r\n        if (cellContent) {\r\n            while (cellContent.firstChild) {\r\n                cellContent.removeChild(cellContent.firstChild);\r\n            }\r\n        }\r\n\r\n        //Hide the cell instead of removing it from the DOM\r\n        cell.style.display = 'none';\r\n\r\n        //Push cell in the recycled list to be reused later\r\n        this._recycledCells.push(cell);\r\n\r\n        this._extensions.executeExtension('cellAfterRecycled', { cell });\r\n    }\r\n\r\n\t_renderCell (rowIndex, colIndex, pane, paneWidth, paneHeight, paneScrollLeft, paneScrollTop, x, y, width, height) {\r\n        let key = rowIndex + ',' + colIndex;\r\n\r\n        //If the cell is outside of the viewport, then recycle the cell if it has already been created\r\n        if (!this._isCellVisible(paneWidth, paneHeight, paneScrollLeft, paneScrollTop, x, y, width, height)) {\r\n            let cell = this._cellReference[key];\r\n            if (cell) {\r\n                this._recycleCell(cell);\r\n            }\r\n            return false;\r\n        }\r\n\r\n        //If the cell already rendered, just skip the rendering\r\n        let existingCell = this._cellReference[key];\r\n        if (existingCell) {\r\n            return true;\r\n        }\r\n\r\n\t\tlet data = this._model.getDataAt(rowIndex, colIndex);\r\n\r\n        //Data can be transformed before rendering using dataBeforeRender extension\r\n\t\tlet arg = {data: data};\r\n\t\tthis._extensions.executeExtension('dataBeforeRender', arg);\r\n\t\tdata = arg.data;\r\n\r\n\t\tlet cell = this._createCell(rowIndex, colIndex, x, y, width, height);\r\n\t\tlet cellClasses = this._model.getCellClasses(rowIndex, colIndex);\r\n\t\tcell.className = 'pgrid-cell ' + cellClasses.join(' ');\r\n\r\n\t\tpane.appendChild(cell);\r\n        let cellContent = cell.firstChild;\r\n\t\tlet eventArg = {\r\n\t\t\tcell,\r\n\t\t\tcellContent,\r\n\t\t\trowIndex,\r\n\t\t\tcolIndex,\r\n\t\t\tdata,\r\n\t\t\trowId: this._model.getRowId(rowIndex),\r\n\t\t\tfield: this._model.getColumnField(colIndex),\r\n\t\t\thandled: false\r\n\t\t};\r\n\r\n\t\t//If there's cellRender extension, use cellRender extension to render the cell\r\n\t\t//Else just set the data to the cellContent directly\r\n\t\tlet handledByExt = false;\r\n\t\tif (this._extensions.hasExtension('cellRender')) {\r\n\t\t\tthis._extensions.executeExtension('cellRender', eventArg);\r\n\t\t\thandledByExt = eventArg.handled;\r\n\t\t}\r\n\r\n\t\tif (!handledByExt) {\r\n\t\t\tif (data !== undefined) {\r\n\t\t\t\tcellContent.innerHTML = data;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._extensions.executeExtension('cellAfterRender', eventArg);\r\n\t\tthis._extensions.executeExtension('cellAfterUpdate', eventArg);\r\n\r\n        eventArg = null;\r\n\r\n        return true;\r\n\t}\r\n\r\n\t_measureScrollbarWidth () {\r\n\t\tvar inner = document.createElement('p');\r\n\t\tinner.style.width = '100%';\r\n\t\tinner.style.height = '200px';\r\n\t\tvar outmost = document.createElement('div');\r\n\t\toutmost.className = 'pgrid';\r\n\t\tvar outer = document.createElement('div');\r\n\t\touter.style.position = 'absolute';\r\n\t\touter.style.top = '0px';\r\n\t\touter.style.left = '0px';\r\n\t\touter.style.visibility = 'hidden';\r\n\t\touter.style.width = '200px';\r\n\t\touter.style.height = '150px';\r\n\t\touter.style.overflow = 'hidden';\r\n\t\touter.appendChild(inner);\r\n\t\toutmost.appendChild(outer);\r\n\t\tdocument.body.appendChild(outmost);\r\n\t\tvar w1 = inner.offsetWidth;\r\n\t\touter.style.overflow = 'scroll';\r\n\t\tvar w2 = inner.offsetWidth;\r\n\t\tif (w1 == w2) w2 = outer.clientWidth;\r\n\t\tdocument.body.removeChild (outmost);\r\n\t\treturn (w1 - w2) + (this._detectIE()?1:0);\r\n\t}\r\n\r\n\r\n\t_detectIE () {\r\n\t  var ua = window.navigator.userAgent;\r\n\t  var msie = ua.indexOf('MSIE ');\r\n\t  if (msie > 0) {\r\n\t    // IE 10 or older => return version number\r\n\t    return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n\t  }\r\n\r\n\t  var trident = ua.indexOf('Trident/');\r\n\t  if (trident > 0) {\r\n\t    // IE 11 => return version number\r\n\t    var rv = ua.indexOf('rv:');\r\n\t    return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\r\n\t  }\r\n\r\n\t  var edge = ua.indexOf('Edge/');\r\n\t  if (edge > 0) {\r\n\t    // Edge (IE 12+) => return version number\r\n\t    return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\r\n\t  }\r\n\t  // other browser\r\n\t  return false;\r\n\t}\r\n}","import { EventDispatcher } from './event';\r\n\r\nexport class Model extends EventDispatcher {\r\n\r\n\tconstructor (config, data, extension) {\r\n\t\tsuper();\r\n\t\tthis._config = config;\r\n\t\tthis._data = data;\r\n\t\tthis._extension = extension;\r\n\r\n\t\tthis._columnModel = [];\r\n\t\tthis._rowModel = {};\r\n\t\tthis._headerRowModel = {};\r\n\t\tthis._cellModel = {};\r\n\t\tthis._headerCellModel = {};\r\n\r\n\t\tif (this._config.headerRows) {\r\n\t\t\tfor (let i=0; i<this._config.headerRows.length; i++) {\r\n\t\t\t\tif (this._config.headerRows[i].i !== undefined) {\r\n\t\t\t\t\tthis._headerRowModel[this._config.headerRows[i].i] = this._config.headerRows[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._config.columns) {\r\n\t\t\tfor (let i=0; i<this._config.columns.length; i++) {\r\n\t\t\t\tif (this._config.columns[i].i !== undefined) {\r\n\t\t\t\t\tthis._columnModel[this._config.columns[i].i] = this._config.columns[i];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._columnModel[i] = this._config.columns[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._config.rows) {\r\n\t\t\tfor (let i=0; i<this._config.rows.length; i++) {\r\n\t\t\t\tthis._rowModel[this._config.rows[i].i] = this._config.rows[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._config.cells) {\r\n\t\t\tfor (let i=0; i<this._config.cells.length; i++) {\r\n\t\t\t\tlet model = this._config.cells[i];\r\n\t\t\t\tif (!this._cellModel[model.c]) {\r\n\t\t\t\t\tthis._cellModel[model.c] = {};\r\n\t\t\t\t}\r\n\t\t\t\tthis._cellModel[model.c][model.r] = model;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._config.headerCells) {\r\n\t\t\tfor (let i=0; i<this._config.headerCells.length; i++) {\r\n\t\t\t\tlet model = this._config.headerCells[i];\r\n\t\t\t\tif (!this._headerCellModel[model.c]) {\r\n\t\t\t\t\tthis._headerCellModel[model.c] = {};\r\n\t\t\t\t}\r\n\t\t\t\tthis._headerCellModel[model.c][model.r] = model;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.calcTotalSize();\r\n\t}\r\n\r\n\tcanEdit (rowIndex, colIndex) {\r\n\t\tlet rowModel = this.getRowModel(rowIndex);\r\n\t\tlet colModel = this.getColumnModel(colIndex);\r\n\t\tlet cellModel = this.getCellModel(rowIndex, colIndex);\r\n\t\tlet result = false;\r\n\r\n\t\tif ((rowModel && rowModel.editable) ||\r\n\t\t\t(colModel && colModel.editable) ||\r\n\t\t\t(cellModel && cellModel.editable)) {\r\n\t\t\tif ((rowModel && rowModel.editable === false) ||\r\n\t\t\t\t(colModel && colModel.editable === false) ||\r\n\t\t\t\t(cellModel && cellModel.editable === false)) {\r\n\t\t\t\tresult = false;\r\n\t\t\t} else {\r\n\t\t\t\tresult = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Editibility can be overridden by extension\r\n\t\tif (this._extension.hasExtension('cellEditableCheck')) {\r\n\t\t\t\r\n\t\t\t//Can Edit Overriding\r\n\t\t\tconst rowId = this.getRowId(rowIndex);\r\n\t\t\tconst field = this.getColumnField(colIndex);\r\n\t\t\tconst dataRow = this._data.getRowData(rowId);\r\n\t\t\tconst e = {\r\n\t\t\t\trowIndex: rowIndex,\r\n\t\t\t\tcolIndex: colIndex,\r\n\t\t\t\trowId: rowId,\r\n\t\t\t\tfield: field,\r\n\t\t\t\tdataRow: dataRow,\r\n\t\t\t\trowModel: rowModel,\r\n\t\t\t\tcolModel: colModel,\r\n\t\t\t\tcellModel: cellModel,\r\n\t\t\t\tcanEdit: result\r\n\t\t\t};\r\n\t\t\tthis._extension.executeExtension('cellEditableCheck', e);\r\n\t\t\tresult = e.canEdit;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tisHeaderRow (rowIndex) {\r\n\t\treturn rowIndex < this._config.headerRowCount;\r\n\t}\r\n\r\n\tgetColumnWidth (colIndex) {\r\n\t\tlet colModel = this._columnModel[colIndex];\r\n\t\tif (colModel && colModel.width !== undefined) {\r\n\t\t\treturn colModel.width;\r\n\t\t} else {\r\n\t\t\treturn this._config.columnWidth;\r\n\t\t}\r\n\t}\r\n\r\n\tgetRowHeight (rowIndex) {\r\n\t\tif (this.isHeaderRow(rowIndex)) {\r\n\r\n\t\t} else {\r\n\t\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n\t\t\tlet rowModel = this._rowModel[dataRowIndex];\r\n\t\t\tif (rowModel && rowModel.height !== undefined) {\r\n\t\t\t\treturn rowModel.height;\r\n\t\t\t} else {\r\n\t\t\t\treturn this._config.rowHeight;\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n\r\n\tgetColumnCount () {\r\n\t\treturn this._config.columns.length;\r\n\t}\r\n\r\n\tgetRowCount () {\r\n\t\tlet headerRowCount = this._config.headerRowCount;\r\n\t\treturn headerRowCount + this._data.getRowCount();\r\n\t}\r\n\r\n\tgetTopFreezeRows () {\r\n\t\tlet topFreeze = 0;\r\n\t\tif (this._config.headerRowCount !== undefined) {\r\n\t\t\ttopFreeze += this._config.headerRowCount; \r\n\t\t} else {\r\n\t\t\ttopFreeze += 1;\r\n\t\t}\r\n\t\tif (this._config.freezePane && this._config.freezePane.top > 0) {\r\n\t\t\ttopFreeze += this._config.freezePane.top;\r\n\t\t}\r\n\t\treturn topFreeze;\r\n\t}\r\n\r\n\tgetTopFreezeSize () {\r\n\t\tconst topFreezeRow = this.getTopFreezeRows(); \r\n\t\tlet sum = 0;\r\n\t\tfor (let i=0; i<topFreezeRow; i++) {\r\n\t\t\tsum += this.getRowHeight(i);\r\n\t\t}\r\n\t\treturn sum;\r\n\t}\r\n\r\n\tgetLeftFreezeRows () {\r\n\t\tif (this._config.freezePane && this._config.freezePane.left > 0) {\r\n\t\t\treturn this._config.freezePane.left;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tgetLeftFreezeSize () {\r\n\t\tif (this._config.freezePane && this._config.freezePane.left > 0) {\r\n\t\t\tlet sum = 0;\r\n\t\t\tfor (let i=0; i<this._config.freezePane.left; i++) {\r\n\t\t\t\tsum += this.getColumnWidth(i);\r\n\t\t\t}\r\n\t\t\treturn sum;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tgetBottomFreezeRows () {\r\n\t\tif (this._config.freezePane && this._config.freezePane.bottom > 0) {\r\n\t\t\treturn this._config.freezePane.bottom;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tgetBottomFreezeSize () {\r\n\t\treturn this._bottomFreezeSize;\r\n\t}\r\n\r\n\tgetColumnWidth (index) {\r\n\t\tif (this._columnModel[index] && this._columnModel[index].width !== undefined) {\r\n\t\t\treturn this._columnModel[index].width;\r\n\t\t}\r\n\t\treturn this._config.columnWidth;\r\n\t}\r\n\r\n\tgetRowHeight (index) {\r\n\t\tif (this._rowModel[index] && this._rowModel[index].height !== undefined) {\r\n\t\t\treturn this._rowModel[index].height;\r\n\t\t}\r\n\t\treturn this._config.rowHeight;\r\n\t}\r\n\r\n\tgetTotalWidth () {\r\n\t\treturn this._totalWidth;\r\n\t}\r\n\r\n\tgetTotalHeight () {\r\n\t\treturn this._totalHeight;\r\n\t}\r\n\r\n\tgetRowModel (rowIndex) {\r\n\t\tif (this.isHeaderRow(rowIndex)) {\r\n\t\t\treturn this._headerRowModel[rowIndex];\r\n\t\t} else {\r\n\t\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n\t\t\treturn this._rowModel[dataRowIndex];\r\n\t\t}\r\n\t}\r\n\r\n\tgetColumnModel (colIndex) {\r\n\t\treturn this._columnModel[colIndex];\r\n\t}\r\n\r\n\tgetCellModel (rowIndex, colIndex) {\r\n\t\tif (this.isHeaderRow(rowIndex)) {\r\n\t\t\tif (this._headerCellModel[colIndex]) {\r\n\t\t\t\treturn this._headerCellModel[colIndex][rowIndex];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n\t\t\tif (this._cellModel[colIndex]) {\r\n\t\t\t\treturn this._cellModel[colIndex][dataRowIndex];\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n\r\n\tgetCascadedCellProp (rowIndex, colIndex, propName) {\r\n\t\tconst cellModel = this.getCellModel(rowIndex, colIndex);\r\n\t\tif (cellModel && cellModel[propName]) {\r\n\t\t\treturn cellModel[propName];\r\n\t\t}\r\n\r\n\t\tconst rowModel = this.getRowModel(rowIndex);\r\n\t\tif (rowModel && rowModel[propName]) {\r\n\t\t\treturn rowModel[propName];\r\n\t\t}\r\n\r\n\t\tconst columnModel = this.getColumnModel(colIndex);\r\n\t\tif (columnModel && columnModel[propName]) {\r\n\t\t\treturn columnModel[propName];\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tgetCellClasses (rowIndex, colIndex) {\r\n\t\tlet output = [];\r\n\t\tconst colModel = this.getColumnModel(colIndex);\r\n\t\tif (colModel) {\r\n\t\t\tif (colModel.cssClass) {\r\n\t\t\t\toutput.unshift(colModel.cssClass);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst isHeader = this.isHeaderRow(rowIndex);\r\n\t\tconst rowModel = this.getRowModel(rowIndex);\r\n\t\tif (rowModel) {\r\n\t\t\tif (isHeader) {\r\n\t\t\t\toutput.unshift('pgrid-row-header');\r\n\t\t\t}\r\n\t\t\tif (rowModel.cssClass) {\r\n\t\t\t\toutput.unshift(rowModel.cssClass);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst cellModel = this.getCellModel(rowIndex, colIndex);\r\n\t\tif (cellModel) {\r\n\t\t\tif (cellModel.cssClass) {\r\n\t\t\t\toutput.unshift(cellModel.cssClass);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n\r\n\tdetermineScrollbarState (viewWidth, viewHeight, scrollbarSize) {\r\n\t\tlet needH = this._totalWidth > viewWidth;\r\n\t\tlet needV = this._totalHeight > viewHeight;\r\n\r\n\t\tif (needH && !needV) {\r\n\t\t\tneedV = this._totalHeight > (viewHeight - scrollbarSize);\r\n\t\t} else\r\n\t\tif (!needH && needV) {\r\n\t\t\tneedH = this._totalWidth > (viewWidth - scrollbarSize);\r\n\t\t}\r\n\r\n\t\tif (needH && needV) {\r\n\t\t\treturn 'b';\r\n\t\t} else\r\n\t\tif (!needH && needV) {\r\n\t\t\treturn 'v';\r\n\t\t} else\r\n\t\tif (needH && !needV) {\r\n\t\t\treturn 'h';\r\n\t\t}\r\n\t\treturn 'n';\r\n\t}\r\n\r\n\tgetDataAt (rowIndex, colIndex) {\r\n\t\tif (this.isHeaderRow(rowIndex)) {\r\n\t\t\tconst colModel = this.getColumnModel(colIndex);\r\n\t\t\tif (colModel && colModel.title) {\r\n\t\t\t\treturn colModel.title;\r\n\t\t\t} else {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n\t\t\tconst colModel = this.getColumnModel(colIndex);\r\n\t\t\tif (colModel && colModel.field) {\r\n\t\t\t\treturn this._data.getDataAt(dataRowIndex, colModel.field);\r\n\t\t\t} else {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n\r\n    getRowDataAt (rowIndex) {\r\n\t\tif (this.isHeaderRow(rowIndex)) {\r\n            return undefined;\r\n\t\t} else {\r\n\t\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n            return this._data.getRowDataAt(dataRowIndex);\r\n\t\t}\r\n\t}\r\n\r\n\tsetDataAt (rowIndex, colIndex, data) {\r\n\t\tconst dataRowIndex = rowIndex - this._config.headerRowCount;\r\n\t\tconst colModel = this.getColumnModel(colIndex);\r\n\t\tif (colModel && colModel.field) {\r\n\t\t\tthis._data.setDataAt(dataRowIndex, colModel.field, data);\r\n\t\t}\r\n\t}\r\n\r\n\tgetRowIndex (rowId) {\r\n\t\treturn this._config.headerRowCount + this._data.getRowIndex(rowId);\r\n\t}\r\n\r\n\tgetRowId (rowIndex) {\r\n\t\tif (rowIndex >= this._config.headerRowCount) {\r\n\t\t\treturn this._data.getRowId(rowIndex - this._config.headerRowCount);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tgetColumnIndex (field) {\r\n\t\tfor (let i=0; i<this._config.columns.length; i++) {\r\n\t\t\tif (this._config.columns[i].field === field) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tgetColumnField (colIndex) {\r\n\t\tif (this._config.columns[colIndex]) {\r\n\t\t\treturn this._config.columns[colIndex].field;\r\n\t\t}\r\n\t}\r\n\r\n\tcalcTotalSize() {\r\n\t\tthis._calcTotalWidth();\r\n\t\tthis._calcTotalHeight();\r\n\t\tthis._calcBottomFreezeSize();\r\n\t}\r\n\r\n\t_calcTotalWidth () {\r\n\t\tthis._totalWidth = 0;\r\n\t\tfor (let i=0; i<this._columnModel.length; i++) {\r\n\t\t\tif (this._columnModel[i].width !== undefined) {\r\n\t\t\t\tthis._totalWidth += this._columnModel[i].width;\r\n\t\t\t} else {\r\n\t\t\t\tthis._totalWidth += this._config.columnWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_calcTotalHeight () {\r\n\t\tlet headerRowModelCount = Object.keys(this._headerRowModel);\r\n\t\tthis._totalHeight = this._config.rowHeight * (this._config.headerRowCount - headerRowModelCount.length);\r\n\t\tfor (let index in this._headerRowModel) {\r\n\t\t\tif (this._headerRowModel[index].height !== undefined) {\r\n\t\t\t\tthis._totalHeight += this._headerRowModel[index].height;\r\n\t\t\t} else {\r\n\t\t\t\tthis._totalHeight += this._config.rowHeight;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet rowModelCount = Object.keys(this._rowModel);\r\n\t\tthis._totalHeight += this._config.rowHeight * (this._data.getRowCount() - rowModelCount.length);\r\n\t\tfor (let index in this._rowModel) {\r\n\t\t\tif (this._rowModel[index].height !== undefined) {\r\n\t\t\t\tthis._totalHeight += this._rowModel[index].height;\r\n\t\t\t} else {\r\n\t\t\t\tthis._totalHeight += this._config.rowHeight;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_calcBottomFreezeSize () {\r\n\t\tif (this._config.freezePane && this._config.freezePane.bottom > 0) {\r\n\t\t\tlet sum = 0;\r\n\t\t\tfor (let i=0; i<this._config.freezePane.bottom; i++) {\r\n\t\t\t\tsum += this.getRowHeight((this._config.rowCount-1)-i);\r\n\t\t\t}\r\n\t\t\tthis._bottomFreezeSize = sum;\r\n\t\t} else {\r\n\t\t\tthis._bottomFreezeSize = 0;\r\n\t\t}\r\n\t}\r\n}","import { EventDispatcher } from \"../grid/event\";\r\n\r\nconst CHANGE_EVENT_NAME = 'dataChanged';\r\n\r\nexport class DataTable extends EventDispatcher {\r\n\r\n    constructor (dataModel, extension) {\r\n        super();\r\n\r\n        this._extension = extension;\r\n        this._idRunner = 0;\r\n        this._rid = [];\r\n        this._rowMap = {};\r\n        this._data = [];\r\n        this._blockEvent = false;\r\n        this._processedEvent = [];\r\n        this._transformedRid = [];\r\n        this._searchQuery = null;\r\n        this._searchFields = null;\r\n        this._freezeCount = 0;\r\n\r\n        let { format, data, fields } = dataModel;\r\n\r\n        // Set default format at rows\r\n        if (!format) {\r\n            format = 'rows';\r\n        }\r\n        this._dataFormat = format;\r\n        this._fields = fields;\r\n\r\n        if (Array.isArray(data)) {\r\n            for (let i=0; i<data.length; i++) {\r\n                this.addRow(data[i]);\r\n            }\r\n        } else {\r\n            this._data = [];\r\n        }\r\n    }\r\n\r\n    getRowCount () {\r\n        return this._transformedRid.length;\r\n    }\r\n\r\n    getAllData() {\r\n        return this._data;\r\n    }\r\n\r\n    getData (rowId, field) {\r\n        let row = this._rowMap[rowId];\r\n        if (row) {\r\n            return row[field];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    getDataAt (rowIndex, field) {\r\n        let rowId = this._transformedRid[rowIndex];\r\n        if (rowId) {\r\n            let row = this._rowMap[rowId];\r\n            if (row) {\r\n                return row[field];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    getRowData (rowId) {\r\n        return this._rowMap[rowId];\r\n    }\r\n\r\n    getRowDataAt (rowIndex) {\r\n        let rowId = this._transformedRid[rowIndex];\r\n        if (rowId) {\r\n            return this._rowMap[rowId];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    getRowIndex (rowId) {\r\n        return this._transformedRid.indexOf(rowId);\r\n    }\r\n\r\n    getRowId (rowIndex) {\r\n        return this._transformedRid[rowIndex];\r\n    }\r\n\r\n    freeze () {\r\n        this._freezeCount++;\r\n    }\r\n\r\n    unfreeze () {\r\n        this._freezeCount--;\r\n        if (this._freezeCount < 0) {\r\n            this._freezeCount = 0;\r\n        }\r\n    }\r\n\r\n    setData (rowId, field, value) {\r\n\r\n        let row = this._rowMap[rowId];\r\n\r\n        //Skip updating if the data is not changing\r\n        if (row && row[field] === value) {\r\n            return;\r\n        }\r\n\r\n        const beforeUpdateArg = {\r\n            changeType: 'fieldChange',\r\n\t\t\trowId: rowId,\r\n            field: field,\r\n            prevData: row[field],\r\n\t\t\tdata: value,\r\n\t\t\tcancel: false\r\n        };\r\n\r\n        this._processedEvent.push(beforeUpdateArg);\r\n\r\n        let blocked = false;\r\n\r\n        if (!this._blockEvent) {\r\n\t\t\tthis._blockEvent = true;\r\n\t\t\tthis._extension.executeExtension('dataBeforeUpdate', beforeUpdateArg);\r\n\t\t\tthis._blockEvent = false;\r\n\t\t} else {\r\n            blocked = true;\r\n        }\r\n\r\n\t\tif (!beforeUpdateArg.cancel) {\r\n            if (row) {\r\n                row[field] = beforeUpdateArg.data;\r\n                if (!this._blockEvent) {\r\n                    this._blockEvent = true;\r\n                    this._extension.executeExtension('dataAfterUpdate', beforeUpdateArg);\r\n                    this._blockEvent = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!blocked) {\r\n            let eventArg = {\r\n                updates: this._processedEvent\r\n            };\r\n            this._extension.executeExtension('dataFinishUpdate', eventArg);\r\n            if (this._freezeCount === 0) {\r\n                setTimeout(() => {\r\n                    this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n                }, 100);\r\n            }\r\n            this._processedEvent = [];\r\n        }\r\n    }\r\n\r\n    setDataAt (rowIndex, field, value) {\r\n        const rowId = this._transformedRid[rowIndex];\r\n        if (rowId !== undefined) {\r\n            this.setData(rowId, field, value);\r\n        }\r\n    }\r\n\r\n    addRow (rowData) {\r\n        const count = this._data.length;\r\n        this.insertRow(count, rowData);\r\n    }\r\n\r\n    insertRow (rowIndex, rowData) {\r\n        let rid = null;\r\n        let inserted = false;\r\n        if (this._dataFormat === 'rows') {\r\n            rid = this._generateRowId();\r\n            this._rid.splice(rowIndex, 0, rid);\r\n            this._rowMap[rid] = rowData;\r\n            this._data.splice(rowIndex, 0, rowData);\r\n            inserted = true;\r\n        } else\r\n        if (this._dataFormat === 'array') {\r\n            if (Array.isArray(this._fields)) {\r\n                rid = this._generateRowId();\r\n                this._rid.splice(rowIndex, 0, rid);\r\n                let newObj = this._createObject(rowData, this._fields);\r\n                this._rowMap[rid] = newObj;\r\n                this._data.splice(rowIndex, 0, newObj);\r\n                inserted = true;\r\n            }\r\n        }\r\n\r\n        //Dispatch change event\r\n        if (inserted) {\r\n            if (this._freezeCount === 0) {\r\n                const eventArg = {\r\n                    updates: [{\r\n                        changeType: 'rowAdded',\r\n                        rowId: rid,\r\n                        data: this.getRowData(rid)\r\n                    }]\r\n                };\r\n                this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n            }\r\n        }\r\n\r\n        //Re-apply transformation if it's already there\r\n        if (this._searchQuery) {\r\n            this.search(this._searchQuery, this._searchFields);\r\n        } else {\r\n            this._transformedRid = this._rid.slice();\r\n        }\r\n    }\r\n\r\n    removeRow (rid) {\r\n        let row = this._rowMap[rid];\r\n        let index = this._data.indexOf(row);\r\n        let tIndex = this._transformedRid.indexOf(rid);\r\n        this._data.splice(index, 1);\r\n        this._rid.splice(index, 1);\r\n        this._transformedRid.splice(tIndex, 1);\r\n        delete this._rowMap[rid];\r\n\r\n        if (this._freezeCount === 0) {\r\n            const eventArg = {\r\n                updates: [{\r\n                    changeType: 'rowRemoved',\r\n                    rowId: rid\r\n                }]\r\n            };\r\n            this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n        }\r\n    }\r\n\r\n    removeRowAt (index) {\r\n        let rid = this.getRowId(index);\r\n        this.removeRow(rid);\r\n    }\r\n\r\n    removeAllRows () {\r\n        this._rid = [];\r\n        this._transformedRid = [];\r\n        this._rowMap = {};\r\n        this._data = [];\r\n\r\n        if (this._freezeCount === 0) {\r\n            const eventArg = {\r\n                updates: [{\r\n                    changeType: 'global'\r\n                }]\r\n            };\r\n            setTimeout(() => {\r\n                this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n            }, 100);\r\n        }\r\n    }\r\n\r\n    search (query, fields) {\r\n        //Store for later use\r\n        this._searchQuery = query;\r\n        this._searchFields = fields;\r\n\r\n        //Cache field map for faster field search\r\n        let fieldMap = null;\r\n        if (fields) {\r\n            fieldMap = fields.reduce((acc, val) => {\r\n                acc[val] = true;\r\n            }, {});\r\n        }\r\n\r\n        //Create regex array\r\n        let queryRegex = null;\r\n        if (Array.isArray(query)) {\r\n            queryRegex = query.map(q => new RegExp(q, 'i'));\r\n        } else {\r\n            queryRegex = [new RegExp(query, 'i')];\r\n        }\r\n\r\n        //Filter rows\r\n        this._transformedRid = this._rid.filter((rid) => {\r\n            const rowData = this._rowMap[rid];\r\n            if (rowData) {\r\n                for (var field in rowData) {\r\n                    if ((!fieldMap || fieldMap[field]) && rowData[field]) {\r\n                        for (let i=0; i<queryRegex.length; i++) {\r\n                            const regex = queryRegex[i];\r\n                            if (regex.test(rowData[field])) {\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        //Dispatch global change event\r\n        if (this._freezeCount === 0) {\r\n            const eventArg = {\r\n                updates: [{\r\n                    changeType: 'global'\r\n                }]\r\n            };\r\n            this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n        }\r\n    }\r\n\r\n    clearSearch () {\r\n        this._transformedRid = this._rid.slice();\r\n        this._searchQuery = null;\r\n        this._searchFields = null;\r\n        if (this._freezeCount === 0) {\r\n            const eventArg = {\r\n                updates: [{\r\n                    changeType: 'global'\r\n                }]\r\n            };\r\n            this.dispatch(CHANGE_EVENT_NAME, eventArg);\r\n        }\r\n    }\r\n\r\n    _generateRowId () {\r\n        this._idRunner++;\r\n        return '' + this._idRunner;\r\n    }\r\n\r\n    _createObject(arrayValues, fields) {\r\n        let newObj = {};\r\n        for (let i=0; i<fields.length; i++) {\r\n            newObj[fields[i]] = arrayValues[i];\r\n        }\r\n        return newObj;\r\n    }\r\n\r\n}","export class Extension {\r\n\r\n\tconstructor (grid, config) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._config = config;\r\n\t\tthis._extensionTable = {};\r\n\r\n\t\tthis._extensions = {\r\n\t\t\tcellRender: [],\r\n\t\t\tcellAfterRender: [],\r\n\t\t\tcellUpdate: [],\r\n\t\t\tcellAfterUpdate: [],\r\n\t\t\tcellEditableCheck: [],\r\n\t\t\tcellAfterRecycled: [],\r\n\t\t\tkeyDown: [],\r\n\t\t\tgridAfterRender: [],\r\n\t\t\tdataBeforeRender: [],\r\n\t\t\tdataBeforeUpdate: [],\r\n\t\t\tdataAfterUpdate: [],\r\n\t\t\tdataFinishUpdate: []\r\n\t\t}\r\n\t}\r\n\r\n\tloadExtension (ext, name) {\r\n\t\tif (ext['init']) {\r\n\t\t\text['init'](this._grid, this._config);\r\n\t\t}\r\n\t\tfor (let extPoint in this._extensions) {\r\n\t\t\tif (ext[extPoint]) {\r\n\t\t\t\tthis._extensions[extPoint].push(ext);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (name) {\r\n\t\t\tif (!this._extensionTable[name]) {\r\n\t\t\t\tthis._extensionTable[name] = ext;\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error('Extension name \\'' + name + '\\' has already been loaded');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thasExtension (extPoint) {\r\n\t\treturn (this._extensions[extPoint] && this._extensions[extPoint].length > 0)\r\n\t}\r\n\r\n\tgetExtension (name) {\r\n\t\treturn this._extensionTable[name];\r\n\t}\r\n\r\n\tqueryExtension (extPoint) {\r\n\t\tif (this._extensions[extPoint]) {\r\n\t\t\treturn this._extensions[extPoint];\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\texecuteExtension (extPoint) {\r\n\t\tthis.queryExtension(extPoint).forEach((ext) => {\r\n\t\t\text[extPoint].apply(ext, Array.prototype.slice.call(arguments, 1));\r\n\t\t});\r\n\t}\r\n\r\n}","export class State {\r\n\r\n\tconstructor () {\r\n\t\tthis._state = {};\r\n\t}\r\n\r\n\texists (key) {\r\n\t\treturn (this._state[key] !== undefined);\r\n\t}\r\n\r\n\tget (key) {\r\n\t\treturn this._state[key];\r\n\t}\r\n\r\n\tset (key, value) {\r\n\t\tthis._state[key] = value;\r\n\t}\r\n\t\r\n}","export class SelectionExtension {\r\n\r\n\tinit (grid, config) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._config = config;\r\n\t\tthis._currentSelection = null;\r\n        this._selectionClass = (this._config.selection && this._config.selection.cssClass)?this._config.selection.cssClass:'pgrid-cell-selection';\r\n        this._mouseDownEventHandler = this._mouseDownEventHandler.bind(this);\r\n\t}\r\n\r\n\tkeyDown (e) {\r\n\t\tlet editing = this._grid.state.get('editing');\r\n\t\tif (editing) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet selection = this._grid.state.get('selection');\r\n\t\tif (selection && selection.length > 0) {\r\n\t\t\tlet rowIndex = selection[0].r;\r\n\t\t\tlet colIndex = selection[0].c;\r\n\t\t\tlet alignTop = true;\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t\tcase 40: //Down\r\n\t\t\t\t\trowIndex++;\r\n\t\t\t\t\talignTop = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 38: //Up\r\n\t\t\t\t\trowIndex--;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 37: //Left\r\n\t\t\t\t\tcolIndex--;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 39: //Right\r\n\t\t\t\tcase 9: //Tab\r\n\t\t\t\t\tcolIndex++;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (rowIndex >= 0 && rowIndex < this._grid.model.getRowCount() &&\r\n\t\t\t\tcolIndex >= 0 && colIndex < this._grid.model.getColumnCount()) {\r\n\t\t\t\tconst isHeader = this._grid.model.isHeaderRow(rowIndex);\r\n\t\t\t\tconst rowModel = this._grid.model.getRowModel(rowIndex);\r\n\t\t\t\tif (!rowModel || !isHeader) {\r\n\t\t\t\t\tlet cell = this._grid.view.getCell(rowIndex, colIndex);\r\n\t\t\t\t\tif (cell) {\r\n\t\t\t\t\t\tthis._selectCell(cell, rowIndex, colIndex);\r\n\t\t\t\t\t\tthis._grid.view.scrollToCell(rowIndex, colIndex, alignTop);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcellAfterRender (e) {\r\n\t\te.cell.addEventListener('mousedown', this._mouseDownEventHandler);\r\n\t\tlet selection = this._grid.state.get('selection');\r\n\t\tif (selection && selection.length > 0 && selection[0].r === e.rowIndex && selection[0].c === e.colIndex) {\r\n\t\t\te.cell.classList.add(this._selectionClass);\r\n\t\t\tthis._currentSelection = e.cell;\r\n\t\t}\r\n    }\r\n\r\n    cellAfterRecycled (e) {\r\n        e.cell.removeEventListener('mousedown', this._mouseDownEventHandler, false);\r\n\t}\r\n\t\r\n\tselectCell (colIndex, rowIndex) {\r\n\t\tif (rowIndex >= 0 && rowIndex < this._grid.model.getRowCount() &&\r\n\t\t\tcolIndex >= 0 && colIndex < this._grid.model.getColumnCount()) {\r\n\t\t\tconst isHeader = this._grid.model.isHeaderRow(rowIndex);\r\n\t\t\tconst rowModel = this._grid.model.getRowModel(rowIndex);\r\n\t\t\tif (!rowModel || !isHeader) {\r\n\t\t\t\tlet cell = this._grid.view.getCell(rowIndex, colIndex);\r\n\t\t\t\tif (cell) {\r\n\t\t\t\t\tthis._selectCell(cell, rowIndex, colIndex);\r\n\t\t\t\t\tthis._grid.view.scrollToCell(rowIndex, colIndex, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    _mouseDownEventHandler (e) {\r\n        let actualCell = e.target;\r\n        if (actualCell.classList.contains('pgrid-cell-content')) {\r\n            actualCell = actualCell.parentElement;\r\n        }\r\n        const actualRow = parseInt(actualCell.dataset.rowIndex);\r\n        const actualCol = parseInt(actualCell.dataset.colIndex);\r\n        const rowModel = this._grid.model.getRowModel(actualRow);\r\n        const isHeader = this._grid.model.isHeaderRow(actualRow);\r\n        if (!rowModel || !isHeader) {\r\n            if (actualCell.classList.contains('pgrid-cell')) {\r\n                this._selectCell(actualCell, actualRow, actualCol);\r\n            }\r\n        }\r\n    }\r\n\r\n\t_selectCell (cell, rowIndex, colIndex) {\r\n\t\t//Clear old selection\r\n\t\tif (this._currentSelection && this._currentSelection !== cell) {\r\n\t\t\tthis._currentSelection.classList.remove(this._selectionClass);\r\n\t\t}\r\n\r\n\t\t//Set selection\r\n\t\tthis._currentSelection = cell;\r\n\t\tthis._currentSelection.classList.add(this._selectionClass);\r\n\t\tthis._grid.view.getElement().focus();\r\n\r\n\t\t//Store selection state\r\n\t\tlet selection = this._grid.state.get('selection');\r\n\t\tif (!selection) {\r\n\t\t\tselection = [];\r\n\t\t\tthis._grid.state.set('selection', selection);\r\n\t\t}\r\n\t\tselection.length = 0;\r\n\t\tselection.push({\r\n\t\t\tr: rowIndex,\r\n\t\t\tc: colIndex,\r\n\t\t\tw: 1,\r\n\t\t\th: 1\r\n\t\t});\r\n\r\n\t}\r\n\r\n}","export class EditorExtension {\r\n\r\n\tinit (grid, config) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._config = config;\r\n\t\tthis._editorAttached = false;\r\n        this._scrollHandler = this._scrollHandler.bind(this);\r\n\t\tthis._grid.view.listen('vscroll', this._scrollHandler);\r\n\t\tthis._grid.view.listen('hscroll', this._scrollHandler);\r\n        this._cellDblClickedHandler = this._cellDblClickedHandler.bind(this);\r\n\t}\r\n\r\n\t_scrollHandler () {\r\n\t\tthis._detachEditor();\r\n\t}\r\n\r\n\tkeyDown (e) {\r\n\t\tif (!this._editorAttached) {\r\n\t\t\tif (!e.ctrlKey) {\r\n\t\t\t\tlet selection = this._grid.state.get('selection');\r\n\t\t\t\tif (selection && selection.length > 0) {\r\n\t\t\t\t\tlet rowIndex = selection[0].r;\r\n                    let colIndex = selection[0].c;\r\n                    if (rowIndex >= 0 && rowIndex < this._grid.model.getRowCount() &&\r\n                        colIndex >= 0 && colIndex < this._grid.model.getColumnCount()) {\r\n                        if (e.keyCode === 46) {\r\n                            let cell = this._grid.view.getCell(rowIndex, colIndex);\r\n                            if (cell) {\r\n                                this._clearCell(cell);\r\n                            }\r\n                        } else\r\n                        if (e.keyCode === 13 || (e.keyCode > 31 && !(e.keyCode >= 37 && e.keyCode <= 40))) {\r\n                            let cell = this._grid.view.getCell(rowIndex, colIndex);\r\n                            if (cell) {\r\n                                this._editCell(cell);\r\n                            }\r\n                        }\r\n                    }\r\n\t\t\t\t}\r\n\t\t\t}\r\n        }\r\n\t}\r\n\r\n\tcellAfterRender (e) {\r\n\t\te.cell.addEventListener('dblclick', this._cellDblClickedHandler);\r\n    }\r\n\r\n    cellAfterRecycled (e) {\r\n        e.cell.removeEventListener('dblclick', this._cellDblClickedHandler, false);\r\n    }\r\n\r\n    _cellDblClickedHandler (e) {\r\n        let actualCell = e.target;\r\n        if (actualCell) {\r\n            if (actualCell.classList.contains('pgrid-cell-content')) {\r\n                actualCell = actualCell.parentElement;\r\n            }\r\n            this._editCell(actualCell);\r\n        }\r\n    }\r\n\r\n    _clearCell (cell) {\r\n\t\tlet rowIndex = parseInt(cell.dataset.rowIndex);\r\n\t\tlet colIndex = parseInt(cell.dataset.colIndex);\r\n        if (this._grid.model.canEdit(rowIndex, colIndex)) {\r\n            this._editingRow = rowIndex;\r\n            this._editingCol = colIndex;\r\n\r\n            let customEditor = this._grid.model.getCascadedCellProp(rowIndex, colIndex, 'editor');\r\n            if (customEditor && customEditor.clear) {\r\n                let eventArg = {\r\n                    done: this._done.bind(this)\r\n                };\r\n                customEditor.clear(eventArg);\r\n            } else {\r\n                this._done(null);\r\n            }\r\n        }\r\n    }\r\n\r\n\t_editCell (cell) {\r\n\t\tlet actualCell = cell;\r\n\t\tlet actualRow = parseInt(actualCell.dataset.rowIndex);\r\n\t\tlet actualCol = parseInt(actualCell.dataset.colIndex);\r\n\t\tif (this._grid.model.canEdit(actualRow, actualCol)) {\r\n\r\n\t\t\t//If there's custom editor, use custom editor to attach the editor\r\n\t\t\tthis._grid.state.set('editing', true);\r\n\r\n\t\t\t//Create float editor container\r\n\t\t\tlet cellBound = cell.getBoundingClientRect();\r\n\t\t\tconst scrollingElement = document.scrollingElement || document.documentElement;\r\n\t\t\tlet scrollTop = scrollingElement.scrollTop;\r\n\t\t\tlet scrollLeft = scrollingElement.scrollLeft;\r\n\t\t\tthis._editorContainer = document.createElement('div');\r\n\t\t\tthis._editorContainer.style.position = 'absolute';\r\n\t\t\tthis._editorContainer.style.top = (cellBound.top + scrollTop) + 'px';\r\n\t\t\tthis._editorContainer.style.left = (cellBound.left + scrollLeft) + 'px';\r\n\t\t\tthis._editorContainer.style.width = cellBound.width + 'px';\r\n\t\t\tthis._editorContainer.style.height = cellBound.height + 'px';\r\n\t\t\tdocument.body.appendChild(this._editorContainer);\r\n\r\n            //Get edited data field\r\n            let data = this._grid.model.getDataAt(actualRow, actualCol);\r\n\r\n\t\t\t//Check if there's any custom editor\r\n\t\t\tlet customEditor = this._grid.model.getCascadedCellProp(actualCell.dataset.rowIndex, actualCell.dataset.colIndex, 'editor');\r\n\t\t\tif (customEditor && customEditor.attach) {\r\n                let dataRow = this._grid.model.getRowDataAt(actualRow, actualCol);\r\n                let eventArg = {\r\n                    cell: this._editorContainer,\r\n                    data: data,\r\n                    dataRow: dataRow,\r\n                    done: this._done.bind(this)\r\n                };\r\n\t\t\t\tcustomEditor.attach(eventArg);\r\n\t\t\t} else {\r\n\t\t\t\tthis._attachEditor(this._editorContainer, data, this._done.bind(this));\r\n\t\t\t}\r\n\r\n\t\t\tthis._editorAttached = true;\r\n\t\t\tthis._editingCol = actualCol;\r\n\t\t\tthis._editingRow = actualRow;\r\n\t\t}\r\n\t}\r\n\r\n\t_attachEditor (cell, data, done) {\r\n\t\tif (!this._inputElement) {\r\n\t\t\tlet cellBound = cell.getBoundingClientRect();\r\n\t\t\tthis._inputElement = document.createElement('input');\r\n\t\t\tthis._inputElement.type = 'text';\r\n\t\t\tthis._inputElement.value = data;\r\n\t\t\tthis._inputElement.style.width = (cellBound.width) + 'px';\r\n\t\t\tthis._inputElement.style.height = (cellBound.height) + 'px';\r\n\t\t\tthis._inputElement.className = 'pgrid-cell-text-editor';\r\n\r\n\t\t\tcell.appendChild(this._inputElement);\r\n\r\n\t\t\tthis._inputElement.focus();\r\n\t\t\tthis._inputElement.select();\r\n\r\n\t\t\tthis._arrowKeyLocked = false;\r\n\r\n\t\t\tthis._keydownHandler = (e) => {\r\n\t\t\t\tswitch (e.keyCode) {\r\n\t\t\t\t\tcase 9: //Tab\r\n\t\t\t\t\tcase 13: //Enter\r\n\t\t\t\t\t\t//Prevent double done() call\r\n\t\t\t\t\t\tif (this._inputElement) {\r\n\t\t\t\t\t\t\tthis._inputElement.removeEventListener('blur', this._blurHandler);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (e.keyCode === 9) {\r\n\t\t\t\t\t\t\tdone(e.target.value, undefined, true);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdone(e.target.value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 27: //ESC\r\n\t\t\t\t\t\t//Prevent double done() call\r\n\t\t\t\t\t\tif (this._inputElement) {\r\n\t\t\t\t\t\t\tthis._inputElement.removeEventListener('blur', this._blurHandler);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdone();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 40: //Down\r\n\t\t\t\t\tcase 38: //Up\r\n\t\t\t\t\tcase 37: //Left\r\n\t\t\t\t\tcase 39: //Right\r\n                        const activeTag = document.activeElement.tagName;\r\n                        if (activeTag !== 'INPUT') {\r\n                            done(e.target.value);\r\n                        }\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis._blurHandler = (e) => {\r\n\t\t\t\tdone(e.target.value);\r\n\t\t\t};\r\n\r\n\t\t\tthis._inputElement.addEventListener('keydown', this._keydownHandler);\r\n\t\t\tthis._inputElement.addEventListener('blur', this._blurHandler);\r\n\t\t}\r\n\t}\r\n\r\n\t_detachEditor () {\r\n\t\tif (this._editorContainer && document.body === this._editorContainer.parentNode) {\r\n            document.body.removeChild(this._editorContainer);\r\n\t\t\tthis._editorContainer = null;\r\n\t\t\tif (this._inputElement) {\r\n\t\t\t\tthis._inputElement.removeEventListener('keydown', this._keydownHandler);\r\n\t\t\t\tthis._inputElement.removeEventListener('blur', this._blurHandler);\r\n\t\t\t\tthis._inputElement.removeEventListener('click', this._clickHandler);\r\n\t\t\t\tthis._inputElement.parentElement.removeChild(this._inputElement);\r\n\t\t\t\tthis._inputElement = null;\r\n\t\t\t\tthis._keydownHandler = null;\r\n\t\t\t\tthis._blurHandler = null;\r\n\t\t\t\tthis._clickHandler = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_done (result, multiFields, goNext) {\r\n\t\tthis._detachEditor();\r\n\t\tif (result !== undefined) {\r\n\t\t\tif (!multiFields) {\r\n\t\t\t\tthis._grid.model.setDataAt(this._editingRow, this._editingCol, result);\r\n\t\t\t} else {\r\n\t\t\t\tlet rowId = this._grid.model.getRowId(this._editingRow);\r\n\t\t\t\tif (rowId) {\r\n\t\t\t\t\tfor (let prop in result) {\r\n\t\t\t\t\t\tif (result.hasOwnProperty(prop)) {\r\n\t\t\t\t\t\t\tthis._grid.data.setData(rowId, prop, result[prop]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._grid.view.updateCell(this._editingRow, this._editingCol);\r\n\t\tthis._editorAttached = false;\r\n\t\tthis._grid.state.set('editing', false);\r\n\r\n\t\t//Re-focus at the grid\r\n\t\tthis._grid.view.getElement().focus();\r\n\r\n\t\tif (goNext) {\r\n\t\t\tconst selectionExtension = this._grid.extension.getExtension('DEFAULT_EXT_SELECTION');\r\n\t\t\tif (selectionExtension) {\r\n\t\t\t\tselectionExtension.selectCell(this._editingCol + 1, this._editingRow);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._editingRow = -1;\r\n\t\tthis._editingCol = -1;\r\n\t}\r\n\r\n}","export class CopyPasteExtension {\r\n\r\n    constructor() {\r\n        this._globalClipboard = false;\r\n    }\r\n\r\n\tinit (grid, config) {\r\n\t\tthis._grid = grid;\r\n        this._config = config;\r\n        this._srcSelection = null;\r\n\t}\r\n\r\n\tkeyDown (e) {\r\n        if (this._globalClipboard && e.ctrlKey) {\r\n            if (e.key === 'c') {\r\n                let data = this._copy();\r\n                if (data !== null) {\r\n                    window.clipboardData.setData('text', data);\r\n                }\r\n            } else\r\n            if (e.key === 'v') {\r\n                this._paste(window.clipboardData.getData('text'));\r\n            }\r\n        }\r\n    }\r\n\r\n    gridAfterRender(e) {\r\n        if (!window.clipboardData) {\r\n            this._grid.view.getElement().addEventListener('paste', (pasteEvent) => {\r\n                this._paste(pasteEvent.clipboardData.getData('text'));\r\n            });\r\n            this._grid.view.getElement().addEventListener('copy', (copyEvent) => {\r\n                let data = this._copy();\r\n                if (data !== null) {\r\n                    copyEvent.clipboardData.setData('text/plain', data);\r\n                    copyEvent.preventDefault();\r\n                }\r\n            });\r\n            this._globalClipboard = false;\r\n        } else {\r\n            this._globalClipboard = true;\r\n        }\r\n    }\r\n\r\n    _copy(clipboardData) {\r\n        let selection = this._grid.state.get('selection');\r\n        if (selection && selection.length > 0) {\r\n            let s = selection[0];\r\n            let rows = [];\r\n            for (let i=0; i<s.h; i++) {\r\n                let cols = [];\r\n                for (let j=0; j<s.w; j++) {\r\n                    cols.push(this._grid.model.getDataAt(s.r + i, s.c + j));\r\n                }\r\n                rows.push(cols.join('\\t'));\r\n            }\r\n            this._srcSelection = s;\r\n            return rows.join('\\n');\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    _paste(data) {\r\n        if (data) {\r\n            data = data.replace(/\\n$/g, '');\r\n            let selection = this._grid.state.get('selection');\r\n            if (selection && selection.length > 0) {\r\n                let s = selection[0];\r\n                let rows = data.split('\\n');\r\n                for (let i=0; i<rows.length; i++) {\r\n                    let cols = rows[i].split('\\t');\r\n                    for (let j=0; j<cols.length; j++) {\r\n                        let pasteRow =  s.r + i;\r\n                        let pasteCol = s.c + j;\r\n                        if (this._grid.model.canEdit(pasteRow, pasteCol)) {\r\n                            this._grid.model.setDataAt(pasteRow, pasteCol, cols[j]);\r\n                            this._grid.view.updateCell(pasteRow, pasteCol);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                let srcRowId = -1;\r\n                let srcField = null;\r\n                if (this._srcSelection) {\r\n                    srcRowId = this._grid.model.getRowId(this._srcSelection.r);\r\n                    srcField = this._grid.model.getColumnField(this._srcSelection.c);\r\n                }\r\n                this._grid.dispatch('cellPasted', {\r\n                    srcRowId: srcRowId,\r\n                    srcField: srcField,\r\n                    srcSelection: this._srcSelection,\r\n                    destRowId: this._grid.model.getRowId(s.r),\r\n                    destField: this._grid.model.getColumnField(s.c),\r\n                    destSelection: s,\r\n                    data: data\r\n                });\r\n                this._srcSelection = null;\r\n            }\r\n        }\r\n    }\r\n\r\n}","export class ViewUpdaterExtension {\r\n\r\n    init (grid, config) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._config = config;\r\n\t}\r\n\r\n    dataFinishUpdate (e) {\r\n        let rowIndexCache = {};\r\n        let colIndexCache = {};\r\n        for (let i=0; i<e.updates.length; i++) {\r\n            let {rowId, field} = e.updates[i];\r\n            let rowIndex = null;\r\n            let colIndex = null;\r\n            if (rowIndexCache[rowId]) {\r\n                rowIndex = rowIndexCache[rowId];\r\n            } else {\r\n                rowIndex = this._grid.model.getRowIndex(rowId);\r\n                rowIndexCache[rowId] = rowIndex;\r\n            }\r\n            if (colIndexCache[field]) {\r\n                colIndex = colIndexCache[field];\r\n            } else {\r\n                colIndex = this._grid.model.getColumnIndex(field);\r\n                colIndexCache[rowId] = colIndex;\r\n            }\r\n            if (colIndex !== -1) {\r\n                this._grid.view.updateCell(rowIndex, colIndex);\r\n            }\r\n        }\r\n    }\r\n\r\n}","export class FormatterExtension {\r\n\r\n    init (grid, config) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._config = config;\r\n    }\r\n\r\n    render (e, model, formatter) {\r\n        if (formatter.render) {\r\n            let newEvent = Object.assign({}, e);\r\n            newEvent.colModel = model;\r\n            newEvent.grid = this._grid;\r\n            formatter.render(newEvent);\r\n            e.handled = true;\r\n        }\r\n    }\r\n\r\n    update (e, model, formatter) {\r\n        let newEvent = Object.assign({}, e);\r\n        newEvent.colModel = model;\r\n        newEvent.grid = this._grid;\r\n        if (formatter.update) {\r\n            formatter.update(newEvent);\r\n            e.handled = true;\r\n        } else\r\n        if (formatter.render) {\r\n            formatter.render(newEvent);\r\n            e.handled = true;\r\n        }\r\n    }\r\n\r\n    cellRender (e) {\r\n        const model = this._grid.model.getColumnModel(e.colIndex);\r\n        if (model && model.formatter) {\r\n            if (Array.isArray(model.formatter)) {\r\n                for (let i=0; i<model.formatter.length; i++) {\r\n                    this.render(e, model, model.formatter[i]);\r\n                }\r\n            } else {\r\n                this.render(e, model, model.formatter);\r\n            }\r\n        }\r\n    }\r\n\r\n    cellUpdate (e) {\r\n        const model = this._grid.model.getColumnModel(e.colIndex);\r\n        if (model && model.formatter) {\r\n            if (Array.isArray(model.formatter)) {\r\n                for (let i=0; i<model.formatter.length; i++) {\r\n                    this.update(e, model, model.formatter[i]);\r\n                }\r\n            } else {\r\n                this.update(e, model, model.formatter);\r\n            }\r\n        }\r\n    }\r\n\r\n}","import { PGrid } from './grid/grid';\r\n\r\nwindow.PGrid = PGrid;\r\n\r\n// Polyfill - Element.scrollIntoViewIfNeeded\r\n\r\nif (!Element.prototype.scrollIntoViewIfNeeded) {\r\n    Element.prototype.scrollIntoViewIfNeeded = function (centerIfNeeded) {\r\n        \"use strict\";\r\n\r\n        function makeRange(start, length) {\r\n            return {\"start\": start, \"length\": length, \"end\": start + length};\r\n        }\r\n\r\n        function coverRange(inner, outer) {\r\n            if (\r\n                false === centerIfNeeded ||\r\n                (outer.start < inner.end && inner.start < outer.end)\r\n            ) {\r\n                return Math.max(\r\n                    inner.end - outer.length,\r\n                    Math.min(outer.start, inner.start)\r\n                );\r\n            }\r\n            return (inner.start + inner.end - outer.length) / 2;\r\n        }\r\n\r\n        function makePoint(x, y) {\r\n            return {\r\n                \"x\": x,\r\n                \"y\": y,\r\n                \"translate\": function translate(dX, dY) {\r\n                    return makePoint(x + dX, y + dY);\r\n                }\r\n            };\r\n        }\r\n\r\n        function absolute(elem, pt) {\r\n            while (elem) {\r\n                pt = pt.translate(elem.offsetLeft, elem.offsetTop);\r\n                elem = elem.offsetParent;\r\n            }\r\n            return pt;\r\n        }\r\n\r\n        var target = absolute(this, makePoint(0, 0)),\r\n            extent = makePoint(this.offsetWidth, this.offsetHeight),\r\n            elem = this.parentNode,\r\n            origin;\r\n\r\n        while (elem instanceof HTMLElement) {\r\n            // Apply desired scroll amount.\r\n            origin = absolute(elem, makePoint(elem.clientLeft, elem.clientTop));\r\n            elem.scrollLeft = coverRange(\r\n                makeRange(target.x - origin.x, extent.x),\r\n                makeRange(elem.scrollLeft, elem.clientWidth)\r\n            );\r\n            elem.scrollTop = coverRange(\r\n                makeRange(target.y - origin.y, extent.y),\r\n                makeRange(elem.scrollTop, elem.clientHeight)\r\n            );\r\n\r\n            // Determine actual scroll amount by reading back scroll properties.\r\n            target = target.translate(-elem.scrollLeft, -elem.scrollTop);\r\n            elem = elem.parentNode;\r\n        }\r\n    };\r\n}","import { View } from './view';\r\nimport { Model } from './model';\r\nimport { DataTable } from '../data/table';\r\nimport { Extension } from './extension';\r\nimport { State } from './state';\r\nimport { EventDispatcher } from './event';\r\nimport { Utils } from './utils';\r\n\r\nimport { SelectionExtension } from '../extensions/selection';\r\nimport { EditorExtension } from '../extensions/editor';\r\nimport { CopyPasteExtension } from '../extensions/copypaste';\r\nimport { ViewUpdaterExtension } from '../extensions/view-updater';\r\nimport { FormatterExtension } from '../extensions/formatter';\r\n\r\nexport class PGrid extends EventDispatcher {\r\n\r\n\tconstructor(config) {\r\n\t\tsuper();\r\n\r\n\t\t//Merge config with default config\r\n\t\tlet defaultConfig = {\r\n\t\t\trowCount: 0,\r\n\t\t\theaderRowCount: 1,\r\n\t\t\tfooterRowCount: 0,\r\n\t\t\tcolumnCount: 0,\r\n\t\t\trowHeight: 32,\r\n\t\t\tcolumnWidth: 100\r\n\t\t};\r\n\t\tthis._config = Utils.mixin(config, defaultConfig);\r\n\r\n\t\t//Extensions Store\r\n\t\tthis._extensions = new Extension(this, this._config);\r\n\r\n\t\tthis._data = new DataTable(this._config.dataModel, this._extensions);\r\n\t\tthis._model = new Model(this._config, this._data, this._extensions);\r\n\t\tthis._view = new View(this._model, this._extensions);\r\n\t\tthis._state = new State();\r\n\r\n\t\t//Load default extensions\r\n\t\tif (this._config.selection) {\r\n\t\t\tthis._extensions.loadExtension(new SelectionExtension(), 'DEFAULT_EXT_SELECTION');\r\n\t\t}\r\n\t\tif (this._config.editing) {\r\n\t\t\tthis._extensions.loadExtension(new EditorExtension(), 'DEFAULT_EXT_EDITOR');\r\n\t\t}\r\n\t\tif (this._config.copypaste) {\r\n\t\t\tthis._extensions.loadExtension(new CopyPasteExtension(), 'DEFAULT_EXT_COPYPASTE');\r\n\t\t}\r\n\t\tif (this._config.autoUpdate) {\r\n\t\t\tthis._extensions.loadExtension(new ViewUpdaterExtension(), 'DEFAULT_EXT_VIEW_UPDATER');\r\n\t\t}\r\n\t\tif (this._config.columnFormatter) {\r\n\t\t\tthis._extensions.loadExtension(new FormatterExtension(), 'DEFAULT_EXT_FORMATTER');\r\n\t\t}\r\n\r\n\t\t//Load initial external extensions\r\n\t\tif (this._config.extensions && this._config.extensions.length > 0) {\r\n\t\t\tthis._config.extensions.forEach((ext) => {\r\n\t\t\t\tthis._extensions.loadExtension(ext);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tget view() {\r\n\t\treturn this._view;\r\n\t}\r\n\r\n\tget model() {\r\n\t\treturn this._model;\r\n\t}\r\n\r\n\tget data() {\r\n\t\treturn this._data;\r\n\t}\r\n\r\n\tget extension() {\r\n\t\treturn this._extensions;\r\n\t}\r\n\r\n\tget state () {\r\n\t\treturn this._state;\r\n\t}\r\n\r\n\trender(element) {\r\n\t\tthis._view.render(element);\r\n\t}\r\n\r\n}","export class Utils {\r\n\r\n\tstatic mixin(source, target) {\r\n\t\tfor (var prop in source) {\r\n\t\t\tif (source.hasOwnProperty(prop)) {\r\n\t\t\t\ttarget[prop] = source[prop];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n}"],"sourceRoot":""}